(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dc4d034"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"1c8f":function(e,t,n){"use strict";n("d256")},"315c":function(e,t,n){},"516d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toms-container"},[n("div",{staticClass:"toms-list-searchWrap"},[n("zm-Search",{ref:"search",attrs:{inputList:e.inputListConfig,btnConfig:e.btnConfig},on:{addHandlerFn:e.addHandlerFn,clientCompanyRemote:e.clientCompanyRemote,clientCompanyChange:e.clientCompanyChange,search:e.search,reset:e.resetTable}})],1),n("div",{staticClass:"toms-list-tableWrap"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%","background-color":"white","border-radius":"6px"},attrs:{height:"520px",data:e.tableData,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:e.indexMethod}}),n("el-table-column",{attrs:{prop:"clientCompanyName",label:"所属客户"}}),n("el-table-column",{attrs:{prop:"clientTwoLevelName",label:"客户二级分类"}}),n("el-table-column",{attrs:{width:"200",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"client.twolevel.edit",expression:"'client.twolevel.edit'"}],staticStyle:{color:"#078bfd","font-size":"14px"},attrs:{size:"mini",type:"text"},on:{click:function(n){return e.editFn(t.row)}}},[e._v("编辑")]),n("el-button",{directives:[{name:"has",rawName:"v-has",value:"client.twolevel.delete",expression:"'client.twolevel.delete'"}],staticStyle:{color:"#078bfd","font-size":"14px"},attrs:{size:"mini",type:"text"},on:{click:function(n){return e.deleteFn(t.row)}}},[e._v("删除")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":e.pageData.pageIndex,"page-sizes":[15,30,50],"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.pageCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:pageSize":function(t){return e.$set(e.pageData,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pageData,"pageSize",t)}}})],1)],1),n("add-or-update-modal",{attrs:{title:e.addOrUpdateDialog.dialogTitle,isShowDialog:e.addOrUpdateDialog.isShowDialog,type:e.addOrUpdateDialog.type,rowInfo:e.addOrUpdateDialog.row},on:{closeModal:e.closeModal}})],1)},i=[],r=n("1da1"),o=(n("96cf"),n("ac1f"),n("841c"),n("a9e3"),n("159b"),n("a434"),n("8cc7")),s=n("a937"),c=n("5f98"),l=function(e){return[{type:"remote-input",bind_key:"clientCompanyId",label:"所属客户",optionList:e.companyList,span:6,inputWidth:280,remoteMethod:"clientCompanyRemote",changeFn:"clientCompanyChange",customOption:{customLabel:"clientCompanyName",customValue:"clientCompanyId"}},{type:"text-input",bind_key:"clientTwoLevelName",label:"客户二级分类",placeholder:"请输入",span:6,labelWidth:120,inputWidth:280}]},u={span:24,leftBtnHidden:!Object(c["a"])("client.twolevel.list"),customList:[{role:"client.twolevel.add",customBtnText:"新增",changeFn:"addHandlerFn"}]},d=function(e){return[{label:"序号",type:"index",fixed:"left",width:"50px",kind:"render",render:function(t,n){var a=n.$index+1,i=(e.pageData.pageIndex-1)*e.pageData.pageSize;return t("span",a+i)}},{label:"所属客户",prop:"clientCompanyId",align:"left",minWidth:"150px",hidden:!0},{label:"所属客户",prop:"clientCompanyName",align:"left",minWidth:"150px"},{label:"客户二级分类",prop:"levelName",align:"left",minWidth:"150px"},{label:"操作",fixed:"right",kind:"formatBtn",width:"120px",moreBtnRoles:"employ.record.edit,employ.record.delete",firstBtn:{text:"详情",role:"employ.record.info",fn:"viewFn"},btnList:[{text:"编辑",fn:"editFn",role:"employ.record.edit"},{text:"删除",fn:"deleteFn",role:"employ.record.delete"}]}]},p=n("a417"),m=n("f6b0"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{staticStyle:{"margin-top":"100px"},attrs:{title:e.title,visible:e.isShowDialog,width:"40%","close-on-click-modal":!1},on:{close:function(t){return e.handleCancel("submitInfo")},open:e.initData}},[n("div",{staticClass:"submit-container"},[n("el-form",{ref:"submitInfo",staticClass:"dialogForm",attrs:{model:e.submitInfo,"label-width":"110px",rules:e.rulesNewForm}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"所属客户",prop:"clientCompanyId"}},[n("el-select",{staticClass:"inpWidth",attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,disabled:"edit"==e.type},on:{change:e.getClientSimpleName},model:{value:e.submitInfo.clientCompanyId,callback:function(t){e.$set(e.submitInfo,"clientCompanyId",t)},expression:"submitInfo.clientCompanyId"}},e._l(e.clientCompanySelectList,(function(e){return n("el-option",{key:e.clientCompanyId,attrs:{label:e.clientCompanyName,value:e.clientCompanyId}})})),1)],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"客户二级分类",prop:"clientTwoLevelName"}},[n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.submitInfo.clientTwoLevelName,callback:function(t){e.$set(e.submitInfo,"clientTwoLevelName","string"===typeof t?t.trim():t)},expression:"submitInfo.clientTwoLevelName"}})],1)],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),n("Debounce",{attrs:{time:5100}},[n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleSubmit("submitInfo")}}},[e._v("确 定")])],1)],1)])],1)},h=[],g=n("5530"),b=(n("c740"),n("7db0"),{props:{title:{type:String,default:"默认标题"},isShowDialog:{type:Boolean,default:!1},type:{type:String,default:"add"},rowInfo:{type:Object,default:function(){}}},data:function(){return{submitInfo:{clientCompanyId:"",clientCompanyName:"",clientTwoLevelName:""},clientCompanySelectList:[],rulesNewForm:{clientCompanyId:[{required:!0,message:"请选择客户名称",trigger:"change"}],clientTwoLevelName:[{required:!0,message:"请输入二级分类名称",trigger:"change"},{max:100,message:"长度最大为100个字符",trigger:"blur"}]}}},mounted:function(){},methods:{initData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["m"])({clientType:"IT_CLTP_001"});case 2:n=t.sent,n&&n.length>0&&(e.clientCompanySelectList=n),"edit"!=e.type&&"show"!=e.type||(e.submitInfo.clientCompanyId=e.rowInfo.clientCompanyId,e.submitInfo.clientCompanyName=e.rowInfo.clientCompanyName,e.submitInfo.clientTwoLevelName=e.rowInfo.clientTwoLevelName,a=e.clientCompanySelectList.findIndex((function(t){return t.clientCompanyId==e.submitInfo.clientCompanyId})),-1==a&&e.clientCompanySelectList.push({clientCompanyId:e.submitInfo.clientCompanyId,clientCompanyName:e.submitInfo.clientCompanyName}));case 5:case"end":return t.stop()}}),t)})))()},remoteMethod:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={clientCompanyName:e,clientType:"IT_CLTP_001"},n.next=3,Object(p["m"])(a).then((function(e){t.clientCompanySelectList=e||[]}));case 3:case"end":return n.stop()}}),n)})))()},getClientSimpleName:function(){},getDetail:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["j"])(e.rowInfo);case 2:n=t.sent,e.submitInfo.clientCompanyId=n.clientCompanyId,e.submitInfo.clientCompanyName=n.clientCompanyName,e.submitInfo.clientTwoLevelName=n.clientTwoLevelName;case 6:case"end":return t.stop()}}),t)})))()},handleCancel:function(){this.$emit("closeModal",!1),this.$refs["submitInfo"].resetFields()},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(a){var i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a){n.next=14;break}if(i={},r=t.clientCompanySelectList.find((function(e,n){return e.clientCompanyId==t.submitInfo.clientCompanyId})),t.submitInfo.clientCompanyName=r.clientCompanyName,"add"!=t.type){n.next=10;break}return n.next=7,Object(m["v"])(t.submitInfo);case 7:i=n.sent,n.next=13;break;case 10:return n.next=12,Object(m["x"])(Object(g["a"])(Object(g["a"])({},t.rowInfo),t.submitInfo));case 12:i=n.sent;case 13:200==Number(i.code)?(t.$message({message:"add"==t.type?"新增成功":"编辑成功",type:"success"}),t.$emit("closeModal",!0),t.$refs[e].resetFields()):t.$message({message:i.msg,type:"warning"});case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}}}),y=b,C=(n("9531"),n("2877")),v=Object(C["a"])(y,f,h,!1,null,"c29d9724",null),w=v.exports,O={name:"cstmSecondCategory",components:{zmTable:o["a"],zmSearch:s["a"],addOrUpdateModal:w},data:function(){return{btnConfig:u,companyList:[],tableData:[],columns:d(this),pageData:{pageIndex:1,pageSize:15,pageCount:0},sortData:[],sizeList:[15,30,50],addOrUpdateDialog:{dialogTitle:"新增",isShowDialog:!1,type:"add",row:{}}}},computed:{inputListConfig:function(){return l(this)}},mounted:function(){this.search(),this.getCompanyList()},methods:{indexMethod:function(e){return this.pageData.pageSize*(this.pageData.pageIndex-1)+(e+1)},clientCompanyRemote:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={clientCompanyName:e,clientType:"IT_CLTP_001"},n.next=3,Object(p["m"])(a).then((function(e){t.companyList=e||[]}));case 3:case"end":return n.stop()}}),n)})))()},getCompanyList:function(){var e=this;Object(p["m"])({clientType:"IT_CLTP_001"}).then((function(t){t&&t.length>0&&(e.companyList=t)}))},clientCompanyChange:function(e){e||this.getCompanyList()},search:function(){var e=this.$refs["search"].getSearchData(),t=JSON.parse(JSON.stringify(e));this.pageData.pageIndex=1,this.searchData=t,this.getTableData(t)},resetTable:function(){this.pageData.pageIndex=1,this.searchData={},this.getTableData(this.searchData)},closeModal:function(e){this.addOrUpdateDialog.isShowDialog=!1,e&&this.resetTable()},addHandlerFn:function(){this.addOrUpdateDialog.dialogTitle="新增客户二级分类",this.addOrUpdateDialog.isShowDialog=!0,this.addOrUpdateDialog.type="add"},editFn:function(e){this.addOrUpdateDialog.dialogTitle="修改客户二级分类",this.addOrUpdateDialog.isShowDialog=!0,this.addOrUpdateDialog.type="edit",this.addOrUpdateDialog.row=e},deleteFn:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(m["u"])(e);case 2:a=n.sent,200==Number(a.code)?(t.$message.success("删除成功"),t.search()):t.$message.warning(a.msg);case 4:case"end":return n.stop()}}),n)}))))},getTableData:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={input:e},i=Object.assign({},t.pageData,a),n.next=4,Object(m["r"])(i);case 4:r=n.sent,t.pageData.pageIndex=r.pageIndex,t.pageData.pageCount=r.rowCount,t.tableData=r.result;case 8:case"end":return n.stop()}}),n)})))()},handleCurrentChange:function(e){this.pageData.pageIndex=e;var t=this.$refs["search"].getSearchData(),n=JSON.parse(JSON.stringify(t));this.getTableData(n)},handleSizeChange:function(e){this.pageData.pageIndex=1,this.pageData.pageSize=e;var t=this.$refs["search"].getSearchData(),n=JSON.parse(JSON.stringify(t));this.getTableData(n)},sortChange:function(e){var t=this,n="";n="ascending"===e.order?"asc":"desc";var a={display:n,field:e.prop};0===this.sortData.length?this.sortData.push(a):this.sortData.forEach((function(e,n){if(e.field===a.field){if(e.display===a.display)return void t.sortData.splice(n,1);t.sortData.splice(n,1),t.sortData.push(a)}else t.sortData.push(a)})),this.getTableData()}}},I=O,x=(n("1c8f"),Object(C["a"])(I,a,i,!1,null,"c1941d06",null));t["default"]=x.exports},"841c":function(e,t,n){"use strict";var a=n("d784"),i=n("825a"),r=n("1d80"),o=n("129f"),s=n("14c3");a("search",1,(function(e,t,n){return[function(t){var n=r(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n):new RegExp(t)[e](String(n))},function(e){var a=n(t,e,this);if(a.done)return a.value;var r=i(e),c=String(this),l=r.lastIndex;o(l,0)||(r.lastIndex=0);var u=s(r,c);return o(r.lastIndex,l)||(r.lastIndex=l),null===u?-1:u.index}]}))},9531:function(e,t,n){"use strict";n("315c")},d256:function(e,t,n){},f6b0:function(e,t,n){"use strict";n.d(t,"l",(function(){return i})),n.d(t,"k",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"m",(function(){return c})),n.d(t,"n",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"p",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"w",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"t",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"h",(function(){return y})),n.d(t,"f",(function(){return C})),n.d(t,"s",(function(){return v})),n.d(t,"r",(function(){return w})),n.d(t,"v",(function(){return O})),n.d(t,"x",(function(){return I})),n.d(t,"j",(function(){return x})),n.d(t,"u",(function(){return D})),n.d(t,"q",(function(){return S}));var a=n("b775");function i(e){return Object(a["a"])({url:"/business/client/queryClientCompanyList",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/business/client/queryClientCompanyInfo",method:"post",params:e})}function o(e){return Object(a["a"])({url:"/business/client/saveOrUpdateClientCompany",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/business/client/removeClientCompany",method:"post",params:e})}function c(e){return Object(a["a"])({url:"/business/contract/queryContractListByClientId",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/business/contract/queryContractCompanyListByClientId",method:"post",params:e})}function u(e){return Object(a["a"])({url:"/business/client/checkReClientCompanyInfo",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/business/client/queryClientCompanyWorkplaceListByClientCompanyId",method:"post",params:e})}function p(e){return Object(a["a"])({url:"/business/scope/queryClientOrgList",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/business/scope/createClientOrg",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/business/scope/updateClientOrg",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/business/scope/createContractOrg",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/business/scope/queryContractOrgListById",method:"post",params:e})}function b(e){return Object(a["a"])({url:"/business/scope/closeClientOrg",method:"post",params:e})}function y(e){return Object(a["a"])({url:"/business/scope/deleteContractOrg",method:"post",params:e})}function C(e){return Object(a["a"])({url:"/business/scope/deleteClientOrg",method:"post",params:e})}function v(e){return Object(a["a"])({url:"/business/scope/queryContractOrgList",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/business/clientlevel/queryClientTwoLevelList",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/business/clientlevel/save",method:"post",data:e})}function I(e){return Object(a["a"])({url:"/business/clientlevel/update",method:"post",data:e})}function x(e){return Object(a["a"])({url:"/business/clientlevel/detail",method:"post",data:e})}function D(e){return Object(a["a"])({url:"/business/clientlevel/remove",method:"post",data:e})}function S(e){return Object(a["a"])({url:"/business/clientlevel/queryClientTwoLevelBySelect",method:"post",data:e})}}}]);