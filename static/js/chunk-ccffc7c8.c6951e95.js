(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccffc7c8"],{"43e5":function(e,t,a){"use strict";a("57d9")},"57d9":function(e,t,a){},"82ed":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer-container"},[a("div",{staticClass:"search-wrap"},[a("zm-Search",{ref:"search",attrs:{inputList:e.inputList,btnConfig:e.btnConfig},on:{deleteDraftPrcs:e.deleteDraftPrcs,search:e.search,reset:e.resetTable}})],1),a("div",{staticClass:"tableContent"},[a("zm-table",{ref:"tableRef",staticStyle:{width:"100%"},attrs:{"header-cell-style":{"text-align":"center"},"header-cell-class-name":e.handleHeaderCellClass,tableData:e.tableData,columns:e.columns,height:"527px",currentPage:e.pageData.pageIndex,pageSize:e.pageData.pageSize,total:e.pageData.pageCount,sizeList:e.sizeList,isCheckboxGroup:!0},on:{handleCurrentChange:e.handleCurrentChange,sortChange:e.sortChange,handleSizeChange:e.handleSizeChange,selectionChange:e.selectionChange}})],1)])},r=[],s=a("1da1"),o=a("5530"),c=(a("d81d"),a("159b"),a("a434"),a("7db0"),a("96cf"),a("8cc7")),i=a("a937"),u=a("5f98"),l=function(e){return[{type:"text-input",bind_key:"subject",labelWidth:"60px",inputWidth:240,label:"工作主题",placeholder:"请输入",span:6},{type:"select-input",bind_key:"flowId",label:"流程名称",span:6,optionList:e.flowNameList},{type:"date-input",span:6,label:"时间段",inputWidth:240,labelWidth:"60px",bind_key:"fullDate",datePickerType:"daterange"}]},d={span:24,customList:[{role:"dashboard.draft.delete",customBtnText:"删除",changeFn:"deleteDraftPrcs"}],leftBtnHidden:!Object(u["a"])("dashboard.draft.list")},p=function(e){return[{type:"selection",fixed:"left",width:"50px"},{label:"序号",width:"50px",kind:"render",render:function(t,a){var n=a.$index+1,r=(e.pageData.pageIndex-1)*e.pageData.pageSize;return t("span",n+r)}},{label:"工作主题",prop:"taskName",kind:"render",align:"left",width:"400px",render:function(t,a){var n=JSON.stringify(a.row),r=encodeURIComponent(n),s=a.row.taskNodeName||a.row.taskName,o=a.row.color?"red":"";return t("span",{class:{renderOperation:!a.row.color},style:{color:o,cursor:"pointer"},on:{click:function(){if(Object(u["a"])("dashboard.draft.info"))switch(e.CHANGE_EDIT_PROCESS_STATUS(!0),a.row.flowName){case"员工定薪流程":e.$router.push({path:"/workbench/initiateProcess/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工入职流程":e.$router.push({path:"/workbench/entryProcess/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工调薪流程":e.$router.push({path:"/workbench/salary/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工信息变更流程":e.$router.push({path:"/workbench/infoChangeProcess/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工转正流程":e.$router.push({path:"/workbench/conversion/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工离职流程":e.$router.push({path:"/workbench/dismission/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工离职流程(新)":e.$router.push({path:"/workbench/newDismissionFlow/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工信息变更流程（SSC）":e.$router.push({path:"/workbench/infoChangeProcessSSC/".concat(a.row.taskInstanceId),query:{taskObj:r}});break}else e.$message.warning("没有列表详情权限，请联系管理员")}}},s)}},{label:"流程名称",prop:"flowName",align:"left",sortable:"custom",minWidth:"140px"},{label:"当前环节",prop:"nodeName",align:"left"},{label:"保存时间",prop:"assignUpdatorTime",sortable:"custom"},{label:"当前状态",prop:"runStatusCn",sortable:"custom"}]},f=a("fa38"),h=a("2f62"),m=a("d14b"),b={name:"DraftProcess",components:{zmTable:c["a"],zmSearch:i["a"]},data:function(){var e=p(this);return{btnConfig:d,tableData:[],columns:e,pageData:{pageIndex:1,pageSize:15,pageCount:0},searchData:{},sortData:[{display:"desc",field:"assignCreatorTime"}],sizeList:[15,30,50],checkList:[],flowNameList:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(h["e"])("entryCfmSalary",["isEditProcess","isRereshListPage"])),{},{inputList:function(){return l(this)}}),mounted:function(){this.getDraftList(),this.getFlowNameList()},beforeRouteEnter:function(e,t,a){a((function(e){console.log(e.isRereshListPage),e.isRereshListPage&&(console.log("会执行吗"),e.getDraftList(),e.getFlowNameList(),e.CHANGE_LIST_PAGE_STAUTS(!1))}))},activated:function(){var e=this;this.$nextTick((function(){e.$refs.tableRef.doLayoutTable()}))},methods:Object(o["a"])(Object(o["a"])({},Object(h["d"])("entryCfmSalary",["CHANGE_EDIT_PROCESS_STATUS","CHANGE_LIST_PAGE_STAUTS"])),{},{getDraftList:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s,c,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={},r=e||{},n.queryRecordDTO=Object(o["a"])({},r),n.queryRecordDTO.userId=t.$store.state.user.userInfo.userId,n.queryRecordDTO.runStatus="IT_RUNS_001",n.queryRecordDTO.runType="IT_RUNX_001",s={input:n},c=Object.assign({},t.pageData,s),c.input.queryRecordDTO.displays=t.sortData,a.next=11,Object(m["s"])(c);case 11:i=a.sent,t.pageData.pageIndex=i.pageIndex,t.pageData.pageCount=i.rowCount,t.tableData=i.result[0].queryRecordVOList;case 15:case"end":return a.stop()}}),a)})))()},getFlowNameList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["p"])({input:{},pageIndex:1,pageSize:999});case 2:a=t.sent,e.flowNameList=Array.isArray(a.result)&&a.result.map((function(e){return{text:e.flowName,value:e.flowId}}));case 4:case"end":return t.stop()}}),t)})))()},deleteDraftPrcs:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.checkList.length){t.next=3;break}return e.$message.warning("请选择复选框之后再进行删除"),t.abrupt("return");case 3:e.$confirm("是否确定删除此草稿数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a.flowTempList=[],e.checkList.forEach((function(e){var t={};t.flowName=e.flowName,t.taskInstanceId=e.taskInstanceId,t.version=e.version,a.flowTempList.push(t)})),t.next=5,Object(m["c"])(a);case 5:n=t.sent,"200"===n.code&&(e.$message.success("删除成功"),e.getDraftList());case 7:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))()},selectionChange:function(e){this.checkList=e},search:function(e){this.pageData.pageIndex=1;var t=JSON.parse(JSON.stringify(e));this.searchData=t,t.fullDate&&2===t.fullDate.length&&(t.startTime=new Date(t.fullDate[0]),t.endTime=new Date(t.fullDate[1]),delete t.fullDate,console.log("执行了吗")),console.log(t,"查询参数"),this.getDraftList(t)},handleSizeChange:function(e){this.pageData.pageIndex=1,this.pageData.pageSize=e,this.getDraftList(this.searchData)},resetTable:function(){this.pageData.pageIndex=1,this.searchData={},this.getDraftList(this.searchData)},handleCurrentChange:function(e){this.pageData.pageIndex=e,this.getDraftList(this.searchData)},sortChange:function(e){var t=this,a="";if(a="ascending"===e.order?"asc":"desc",null!==e.order){var n={display:a,field:e.prop};if(0===this.sortData.length)this.sortData.push(n);else{var r=this.sortData.find((function(e){return e.field===n.field}));if(r){var s="";this.sortData.forEach((function(e,t){e.field===r.field&&(s=t)})),this.sortData.splice(s,1,n)}else this.sortData.push(n)}this.getDraftList()}else this.sortData.forEach((function(a,n){a.field===e.prop&&t.sortData.splice(n,1)}))},handleHeaderCellClass:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;this.sortData.forEach((function(e){if(t.property===e.field){var a="";"desc"===e.display&&(a="descending"),"asc"===e.display&&(a="ascending"),t.order=a}}))}})},g=b,k=(a("43e5"),a("2877")),w=Object(k["a"])(g,n,r,!1,null,"1311a15c",null);t["default"]=w.exports},d14b:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"i",(function(){return s})),a.d(t,"j",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"s",(function(){return i})),a.d(t,"p",(function(){return u})),a.d(t,"e",(function(){return l})),a.d(t,"v",(function(){return d})),a.d(t,"t",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"u",(function(){return h})),a.d(t,"c",(function(){return m})),a.d(t,"r",(function(){return b})),a.d(t,"q",(function(){return g})),a.d(t,"k",(function(){return k})),a.d(t,"m",(function(){return w})),a.d(t,"b",(function(){return D})),a.d(t,"o",(function(){return y})),a.d(t,"n",(function(){return O})),a.d(t,"h",(function(){return j})),a.d(t,"l",(function(){return C})),a.d(t,"a",(function(){return I}));a("99af");var n=a("b775");function r(){return Object(n["a"])({url:"/task/initFlow",method:"post"})}function s(e){return Object(n["a"])({url:"/task/start",method:"post",params:e})}function o(e){return Object(n["a"])({url:"/task/readyCommit?orgId=".concat(e.orgId,"&city=").concat(e.city),method:"post",data:e.taskDTO})}function c(e){return Object(n["a"])({url:"/task/commit",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/task/queryTasksPage",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/task/queryTaskDetail",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/task/queryRecordList",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/task/breakTask",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/task/readTask",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/task/queryCanBackNodeList",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/task/saveTask",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/task/removeTask",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/task/queryTaskUppriceSelectList?empName=".concat(e.empName,"&flowName=").concat(e.flowName,"&phoneNo=").concat(e.phoneNo),method:"post",data:e})}function g(e){return Object(n["a"])({url:"/task/queryTaskSelect",method:"post",params:e})}function k(e){return Object(n["a"])({url:"/task/queryEmployFlowPage",method:"post",data:e})}function w(e){return Object(n["a"])({url:"/task/queryEmployTaskRecord",method:"post",data:e})}function D(e){return Object(n["a"])({url:"/task/checkEmployUppriceGT6Month?empName=".concat(e.empName,"&flowName=").concat(e.flowName,"&phoneNo=").concat(e.phoneNo),method:"post",data:e})}function y(e){return Object(n["a"])({url:"/salary/queryNewSalaryInfo?employNum=".concat(e.employNum),method:"post",data:e})}function O(e){return Object(n["a"])({url:"/task/queryLeaveSelectList",method:"post",params:e})}function j(e){return Object(n["a"])({url:"/protectRule/getProtectRult",method:"post",params:e})}function C(e){return Object(n["a"])({url:"/employ/archives/queryEmployOfferDetail",method:"post",params:e})}function I(e){return Object(n["a"])({url:"/task/cancelTask",method:"post",data:e})}}}]);