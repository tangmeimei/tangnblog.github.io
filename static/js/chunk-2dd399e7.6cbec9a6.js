(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dd399e7"],{"4cdb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"toms-container"},[a("div",{staticClass:"toms-list-searchWrap"},[a("zm-Search",{ref:"search",attrs:{inputList:e.inputList,btnConfig:e.btnConfig},on:{search:e.search,reset:e.resetTable,addWorkplace:e.addFn}})],1),a("div",{staticClass:"toms-list-tableWrap"},[a("zm-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{tableData:e.tableData,columns:e.columns,height:"527px","header-cell-style":{"text-align":"center"},"header-cell-class-name":e.handleHeaderCellClass,currentPage:e.pageData.pageIndex,pageSize:e.pageData.pageSize,total:e.pageData.pageCount,sizeList:e.sizeList},on:{editFn:e.editFn,deleteFn:e.deleteFn,handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1),a("el-dialog",{attrs:{title:e.modalTitle,visible:e.dialogVisible,closeOnClickModal:!1,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{key:e.modalKey,ref:"workplaceForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属公司",prop:"tbCompanyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属公司",disabled:e.isEdit},model:{value:e.form.tbCompanyId,callback:function(t){e.$set(e.form,"tbCompanyId",t)},expression:"form.tbCompanyId"}},e._l(e.companyList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.tbCompanyName,value:e.tbCompanyId}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办公区域",prop:"workArea"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择办公区域",disabled:e.isEdit},model:{value:e.form.workArea,callback:function(t){e.$set(e.form,"workArea",t)},expression:"form.workArea"}},e._l(e.baseDataOptionList.IT_CITY,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办公职场",prop:"officeName"}},[a("el-input",{attrs:{placeholder:"请输入办公职场",maxlength:"100"},model:{value:e.form.officeName,callback:function(t){e.$set(e.form,"officeName",t)},expression:"form.officeName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职场地址",prop:"officeAddress"}},[a("el-input",{attrs:{placeholder:"请输入职场地址",maxlength:"100"},model:{value:e.form.officeAddress,callback:function(t){e.$set(e.form,"officeAddress",t)},expression:"form.officeAddress"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("workplaceForm")}}},[e._v("确 定")])],1)],1)],1)},n=[],o=a("1da1"),s=a("5530"),i=(a("159b"),a("96cf"),a("8cc7")),c=a("a937"),l=a("5f98"),u=a("4360"),d=u["a"].state.baseData.baseDataOptionList,p=function(e){return[{type:"select-input",bind_key:"tbCompanyId",label:"所属公司",span:6,optionList:e.companyList,customOption:{customLabel:"tbCompanyName",customValue:"tbCompanyId"}},{type:"select-input",bind_key:"workArea",label:"办公区域",span:6,optionList:d.IT_CITY},{type:"text-input",bind_key:"officeName",placeholder:"请输入",label:"办公职场",span:6}]},m={span:24,customList:[{role:"formalemploy.workplace.add",customBtnText:"新增",changeFn:"addWorkplace"}],leftBtnHidden:!Object(l["a"])("formalemploy.workplace.list")},f=function(e){return[{label:"序号",width:"50px",kind:"render",render:function(t,a){var r=a.$index+1,n=(e.pageData.pageIndex-1)*e.pageData.pageSize;return t("span",r+n)}},{label:"所属公司",prop:"tbCompanyName",align:"center"},{label:"办公区域",prop:"workAreaCn",align:"center"},{label:"办公职场",prop:"officeName"},{label:"职场地址",prop:"officeAddress",align:"left"},{label:"操作",fixed:"right",kind:"formatBtn",width:"120px",moreBtnRoles:"employ.record.delete",firstBtn:{text:"编辑",role:"formalemploy.workplace.edit",fn:"editFn"},btnList:[{text:"删除",fn:"deleteFn",role:"formalemploy.workplace.delete"}]}]},b=(a("d14b"),a("f8af")),h=a("2f62"),g=a("a417"),k={name:"Workplace",components:{zmTable:i["a"],zmSearch:c["a"]},data:function(){return{btnConfig:m,tableData:[],columns:f(this),pageData:{pageIndex:1,pageSize:15,pageCount:0},tableLoading:!1,sortData:[],searchData:{},sizeList:[15,30,50],companyList:[],workAreaList:[],dialogVisible:!1,form:{tbCompanyId:"",workArea:"",officeName:"",officeAddress:""},rules:{tbCompanyId:[{required:!0,message:"请选择所属公司",trigger:"change"}],workArea:[{required:!0,message:"请选择办公区域",trigger:"change"}],officeName:[{required:!0,message:"请选输入办公职场",trigger:"blur"}],officeAddress:[{required:!0,message:"请输入职场地址",trigger:"blur"}]},isEdit:!1,modalTitle:"新增职场",modalKey:1}},computed:Object(s["a"])(Object(s["a"])({},Object(h["e"])("baseData",["baseDataOptionList"])),{},{inputList:function(){return p(this)}}),mounted:function(){this.getTbCompanyList(),this.getWorkplaceList()},methods:{formReset:function(){this.form.tbCompanyId="",this.form.workArea="",this.form.officeName="",this.form.officeAddress=""},getTbCompanyList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["I"])();case 2:a=t.sent,e.companyList=a;case 4:case"end":return t.stop()}}),t)})))()},onSubmit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=15;break}if(t.isEdit){e.next=8;break}return e.next=4,Object(b["a"])(t.form);case 4:r=e.sent,"200"===r.code?(t.$message.success("新增成功"),t.dialogVisible=!1,t.formReset(),t.getWorkplaceList()):t.$message.error(r.msg),e.next=13;break;case 8:return n=Object(s["a"])({employWorkplaceId:t.employWorkplaceId},t.form),e.next=11,Object(b["l"])(n);case 11:o=e.sent,"200"===o.code?(t.$message.success("编辑成功"),t.dialogVisible=!1,t.formReset(),t.getWorkplaceList()):t.$message.error(o.msg);case 13:e.next=17;break;case 15:return console.log("error submit!!"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addFn:function(){this.isEdit=!1,this.modalTitle="新增职场",this.modalKey++,this.formReset(),this.dialogVisible=!0},getWorkplaceList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={},Object.assign(r,e),n={input:r},o=Object.assign({},t.pageData,n),a.next=6,Object(b["j"])(o);case 6:s=a.sent,t.pageData.pageIndex=s.pageIndex,t.pageData.pageCount=s.rowCount,t.tableData=s.result;case 10:case"end":return a.stop()}}),a)})))()},search:function(e){this.pageData.pageIndex=1;var t=JSON.parse(JSON.stringify(e));this.searchData=t,this.getWorkplaceList(t)},handleSizeChange:function(e){this.pageData.pageSize=e,this.getWorkplaceList()},editFn:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),t.formReset(),t.modalTitle="编辑职场",t.isEdit=!0,t.dialogVisible=!0,t.modalKey++,t.employWorkplaceId=e.employWorkplaceId,r={employWorkplaceId:t.employWorkplaceId},a.next=10,Object(b["i"])(r);case 10:n=a.sent,t.form.tbCompanyId=n.tbCompanyId,t.form.workArea=n.workArea,t.form.officeName=n.officeName,t.form.officeAddress=n.officeAddress;case 15:case"end":return a.stop()}}),a)})))()},resetTable:function(){this.pageData.pageIndex=1,this.searchData={},this.getWorkplaceList(this.searchData)},deleteFn:function(e){var t=this,a={employWorkplaceId:e.employWorkplaceId},r=this.$createElement;this.$msgbox({title:"确认提示",message:r("p",null,[r("i",{class:"el-icon-question",style:"color: #FE9400; font-size: 20px"}," "),r("span",{style:"color: #666666; font-size: 16px; margin-left: 5px"},"是否确定删除此职场的信息？"),r("p",{style:"color: #999999; margin-left: 25px"},"删除此职场信息后将无法查询到职场相关的任何数据信息，且将记录此次删除人和操作和信息。")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["k"])(a);case 2:r=e.sent,"200"===r.code?(t.$message.success("删除成功"),t.getWorkplaceList()):t.$message.error(r.msg);case 4:case"end":return e.stop()}}),e)}))))},handleCurrentChange:function(e){this.pageData.pageIndex=e,this.getWorkplaceList(this.searchData)},handleHeaderCellClass:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;this.sortData.forEach((function(e){if(t.property===e.field){var a="";"desc"===e.display&&(a="descending"),"asc"===e.display&&(a="ascending"),t.order=a}}))}},watch:{}},y=k,w=a("2877"),O=Object(w["a"])(y,r,n,!1,null,null,null);t["default"]=O.exports},d14b:function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"i",(function(){return o})),a.d(t,"j",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"s",(function(){return c})),a.d(t,"p",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"v",(function(){return d})),a.d(t,"t",(function(){return p})),a.d(t,"f",(function(){return m})),a.d(t,"u",(function(){return f})),a.d(t,"c",(function(){return b})),a.d(t,"r",(function(){return h})),a.d(t,"q",(function(){return g})),a.d(t,"k",(function(){return k})),a.d(t,"m",(function(){return y})),a.d(t,"b",(function(){return w})),a.d(t,"o",(function(){return O})),a.d(t,"n",(function(){return j})),a.d(t,"h",(function(){return x})),a.d(t,"l",(function(){return C})),a.d(t,"a",(function(){return v}));a("99af");var r=a("b775");function n(){return Object(r["a"])({url:"/task/initFlow",method:"post"})}function o(e){return Object(r["a"])({url:"/task/start",method:"post",params:e})}function s(e){return Object(r["a"])({url:"/task/readyCommit?orgId=".concat(e.orgId,"&city=").concat(e.city),method:"post",data:e.taskDTO})}function i(e){return Object(r["a"])({url:"/task/commit",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/task/queryTasksPage",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/task/queryTaskDetail",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/task/queryRecordList",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/task/breakTask",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/task/readTask",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/task/queryCanBackNodeList",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/task/saveTask",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/task/removeTask",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/task/queryTaskUppriceSelectList?empName=".concat(e.empName,"&flowName=").concat(e.flowName,"&phoneNo=").concat(e.phoneNo),method:"post",data:e})}function g(e){return Object(r["a"])({url:"/task/queryTaskSelect",method:"post",params:e})}function k(e){return Object(r["a"])({url:"/task/queryEmployFlowPage",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/task/queryEmployTaskRecord",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/task/checkEmployUppriceGT6Month?empName=".concat(e.empName,"&flowName=").concat(e.flowName,"&phoneNo=").concat(e.phoneNo),method:"post",data:e})}function O(e){return Object(r["a"])({url:"/salary/queryNewSalaryInfo?employNum=".concat(e.employNum),method:"post",data:e})}function j(e){return Object(r["a"])({url:"/task/queryLeaveSelectList",method:"post",params:e})}function x(e){return Object(r["a"])({url:"/protectRule/getProtectRult",method:"post",params:e})}function C(e){return Object(r["a"])({url:"/employ/archives/queryEmployOfferDetail",method:"post",params:e})}function v(e){return Object(r["a"])({url:"/task/cancelTask",method:"post",data:e})}},f8af:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"j",(function(){return o})),a.d(t,"k",(function(){return s})),a.d(t,"l",(function(){return i})),a.d(t,"i",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"d",(function(){return f})),a.d(t,"b",(function(){return b}));var r=a("b775");function n(e){return Object(r["a"])({url:"/employ/workplace/save",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/employ/workplace/queryEmployWorkplaceList",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/employ/workplace/remove",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/employ/workplace/update",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/employ/workplace/detail",method:"post",data:e})}function l(e,t){return Object(r["a"])({url:"/employ/workplace/queryEmployWorkplaceBySelect",method:"post",data:e,params:t})}function u(e){return Object(r["a"])({url:"/employ/two/queryFormalEmployChangeList",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/employ/two/exportFormalEmployChangeList",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/employ/two/queryUnFormalEmployChangeList",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/employ/two/exportUnFormalEmployChangeList",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/employ/archives/exportTwoEmploy",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/employ/archives/exportEmployInfoTwoContract",method:"post",data:e})}}}]);