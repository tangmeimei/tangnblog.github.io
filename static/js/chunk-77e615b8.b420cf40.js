(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77e615b8"],{3881:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i}));n("7db0"),n("99af"),n("159b");var o=n("4360");function r(e){e||console.log("请传参为权限code");var t=o["a"].state.processPermission.processPermissionList;if(!(t.length<1)){var n=t.find((function(t){return t.resourceCode===e}));if(n)return"IT_FARS_004"===n.resourceStatus}}function a(e){e||console.log("请传参为权限code");var t=o["a"].state.processPermission.processPermissionList;if(!(t.length<1)){var n=t.find((function(t){return t.resourceCode===e}));if(n)return"IT_FARS_005"===n.resourceStatus}}function i(e){var t=o["a"].state.processPermission.processPermissionList,n=[];if(n=n.concat(e),!(t.length<1)){var r=!1;return n.forEach((function(e){for(var n=0,o=t.length;n<o;n++)if(t[n].resourceCode===e&&"IT_FARS_004"!==t[n].resourceStatus){r=!0;break}})),r}}},"470f":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ccContainer"},[n("el-dialog",e._b({attrs:{title:"选择人员",visible:e.isShowCcModal,width:"25%","destroy-on-close":!0,"close-on-click-modal":!1},on:{close:e.handleCancel}},"el-dialog",e.$attrs,!1),[n("el-form",{ref:"ruleForm",attrs:{model:e.employForm,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"姓名",prop:"employId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"请输入工号或姓名","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.handleSelectChange,keyup:e.handleInput},model:{value:e.employForm.employId,callback:function(t){e.$set(e.employForm,"employId",t)},expression:"employForm.employId"}},e._l(e.optionList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"所属组织"}},[n("el-input",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.currentOrg,callback:function(t){e.currentOrg=t},expression:"currentOrg"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)],1)},r=[],a=n("1da1"),i=n("5530"),s=(n("96cf"),n("d81d"),n("99af"),n("159b"),n("a15b"),n("a417")),c=n("ed08"),u=n("dc27"),l=n("2f62"),d={name:"CcPeopleModal",props:{isShowCcModal:{type:Boolean,default:!1},customEventName:{type:String,default:"handleConfirm"},isQueryUser:{type:Boolean,default:!1},isLeave:{type:Boolean,default:!1},isQueryJfOrZp:{type:Boolean,default:!1},roleType:{type:String,default:""},employType:{type:String,default:""}},data:function(){return{loading:!1,optionList:[],rules:{employId:{message:"请输入员工姓名",required:!0,trriger:"change"}},employForm:{employId:""},currentOrg:"",selectedItemData:{},oneDimensionArr:[]}},computed:Object(i["a"])({},Object(l["e"])("baseData",["orgTreeData"])),watch:{},mounted:function(){this.registerCloseEvent(),this.getOrgTreeList()},methods:{handleInput:function(e){},handleSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.$emit(e.customEventName,e.selectedItemData),e.$emit("update:isShowCcModal",!1))}))},handleCancel:function(){this.$refs.ruleForm.resetFields(),this.$refs.ruleForm.clearValidate(),this.$emit("update:isShowCcModal",!1)},remoteMethod:function(e){if(this.loading=!0,""!==e)if(e=encodeURI(e),this.isQueryUser)if(this.isQueryJfOrZp){var t={keyword:e,roleType:this.roleType};this.queryJfOrZp(t)}else{var n={keyword:e};this.queryUser(n)}else{var o={keyWord:e,isLeave:this.isLeave,employType:this.employType||""};this.queryEmployee(o)}else this.optionList=[]},queryJfOrZp:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["Z"])(e);case 2:o=n.sent,t.loading=!1,t.optionList=Array.isArray(o)&&o.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(i["a"])({text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName," | ").concat(e.orgName),value:e.userInfo.userId},t)}));case 5:case"end":return n.stop()}}),n)})))()},queryUser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["L"])(e);case 2:o=n.sent,t.loading=!1,t.optionList=Array.isArray(o)&&o.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(i["a"])({text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName," | ").concat(e.orgName),value:e.userInfo.userId},t)}));case 5:case"end":return n.stop()}}),n)})))()},getUserSelectListByOrg:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["M"])(e);case 2:o=n.sent,t.loading=!1,t.optionList=Array.isArray(o)&&o.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(i["a"])({text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName," | ").concat(e.orgName),value:e.userInfo.userId},t)}));case 5:case"end":return n.stop()}}),n)})))()},queryEmployee:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["R"])(e);case 2:o=n.sent,t.loading=!1,t.optionList=Array.isArray(o)&&o.map((function(e){return Object(i["a"])({text:"[".concat(e.employNo,"] ").concat(e.employName," | ").concat(e.orgCn),value:e.employId},e)}));case 5:case"end":return n.stop()}}),n)})))()},handleSelectChange:function(e){var t=this;this.optionList.forEach((function(n){if(n.value===e)if(t.selectedItemData=n,t.isQueryUser){var o=t.queryItemById(n.orgId,t.orgTreeData);if(o.parentId){var r=t.getAllParentOrgId(o.parentId,t.oneDimensionArr).reverse();r.push(o.orgName),t.currentOrg=r.join("/"),t.selectedItemData.orgFullName=t.currentOrg}else t.currentOrg=o.orgName}else t.currentOrg=n.orgCn}))},registerCloseEvent:function(){var e=this,t=document.querySelector(".ccContainer .el-dialog__close");t&&t.addEventListener("click",(function(){e.handleCancel()}))},getOrgTreeList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.oneDimensionArr=e.toOneDimensionArr(Object(c["a"])(e.orgTreeData));case 1:case"end":return t.stop()}}),t)})))()},queryItemById:function(e,t){var n=null;function o(t){t.forEach((function(t){if(e===t.orgId)return n=t;t.children&&t.children.length>0&&o(t.children)}))}return o(t),n},toOneDimensionArr:function(e){var t=[];Object(c["a"])(e);function n(e){e.forEach((function(e){t.push(e),e.children&&e.children.length>0&&(n(e.children),delete e.children)}))}return n(e),t},getAllParentOrgId:function(e,t){var n=[];function o(e,t){t.forEach((function(r){e===r.orgId&&e===r.orgId&&(n.push(r.orgName),o(r.parentId,t))}))}return o(e,t),n}}},m=d,p=n("2877"),f=Object(p["a"])(m,o,r,!1,null,"c8833b38",null);t["a"]=f.exports},"6d07":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"imgContainer"},[n("el-dialog",{attrs:{title:e.title,visible:e.showImgModal,width:"30%","close-on-click-modal":!1,top:"10vh"},on:{"update:visible":function(t){e.showImgModal=t}}},[n("el-image",{attrs:{src:e.src}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])])],1)],1)},r=[],a={name:"preceeImage",props:{isShowImgModal:{type:Boolean,default:!1},src:{type:String,default:""},title:{type:String,default:"流程图"}},data:function(){return{ccForm:{name:"",org:""},showImgModal:!1,loading:!1,optionList:[]}},watch:{isShowImgModal:{handler:function(e){e&&(this.showImgModal=!0)},immediate:!0},showImgModal:{handler:function(e){e||this.$emit("update:isShowImgModal",!1)}}},mounted:function(){},methods:{}},i=a,s=n("2877"),c=Object(s["a"])(i,o,r,!1,null,"7d9f3cd8",null);t["a"]=c.exports},"86c5":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"submitModal"},[n("el-dialog",{attrs:{title:e.submitInfo.assignTypeCn,visible:e.isShowSubmitModal,width:"30%","close-on-click-modal":!1},on:{close:e.handleCancel}},[n("div",{staticClass:"submit-container"},[n("div",{staticClass:"top-content"},[n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[e._v("审批环节")]),n("div",{staticClass:"value"},[e._v(e._s(e.submitInfo.nodeName))])]),n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[e._v("审批类型")]),n("div",{staticClass:"value"},[e._v(e._s(e.submitInfo.assignTypeCn))])]),n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[e._v("审批人")]),n("div",{staticClass:"value"},[e._v(e._s(e.submitInfo.assignName))])])]),n("div",{staticClass:"bottom-content"},[n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[n("div",{staticClass:"title"},[e._v("添加审批人")])]),n("div",{staticClass:"value",staticStyle:{overflow:"auto",height:"100px"}},[e.submitInfo.approverList&&0===e.submitInfo.approverList.length?n("div",{staticClass:"tip",staticStyle:{"font-size":"12px",color:"#ccc"}},[e._v(" 对方收到待办审批 ")]):e._e(),e._l(e.submitInfo.approverList,(function(t,o){return n("el-tag",{key:t.assignName,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:""},on:{close:function(t){return e.closeApproval(o)}}},[e._v(" "+e._s(t.assignName)+" ")])}))],2),n("div",{staticClass:"operation"},[n("div",{staticClass:"first"},[n("i",{staticClass:"iconfont icon-B",on:{click:e.openApprovalModal}})]),n("div",{staticClass:"last"},[n("i",{staticClass:"iconfont icon-shanchurenyuan",on:{click:e.deleteAllApproval}})])])]),n("div",{staticClass:"item",staticStyle:{"border-top":"none"}},[n("div",{staticClass:"label"},[n("div",{staticClass:"title"},[e._v("抄送人员")])]),n("div",{staticClass:"value",staticStyle:{overflow:"auto",height:"100px"}},[e.submitInfo.ccPeopleList&&0===e.submitInfo.ccPeopleList.length?n("div",{staticClass:"tip",staticStyle:{"font-size":"12px",color:"#ccc"}},[e._v(" 对方将收到待阅 ")]):e._l(e.submitInfo.ccPeopleList,(function(t,o){return n("el-tag",{key:t.assignName,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:""},on:{close:function(t){return e.closeCcPeople(o)}}},[e._v(" "+e._s(t.assignName)+" ")])}))],2),n("div",{staticClass:"operation"},[n("div",{staticClass:"first"},[n("i",{staticClass:"iconfont icon-B",on:{click:e.openCcPeopleModal}})]),n("div",{staticClass:"last"},[n("i",{staticClass:"iconfont icon-shanchurenyuan",on:{click:e.deleteAllCcPeople}})])])])])]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),n("Debounce",{attrs:{time:500,events:"click"}},[n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleSubmit(t)}}},[e._v("确 定")])],1)],1),n("cc-people-modal",{key:e.addApproveModalKeyFlag,attrs:{isShowCcModal:e.isShowAddModal,"append-to-body":"",isQueryUser:!0},on:{"update:isShowCcModal":function(t){e.isShowAddModal=t},"update:is-show-cc-modal":function(t){e.isShowAddModal=t},handleConfirm:e.addApproval}}),n("cc-people-modal",{key:e.addCcPeopleModalKeyFlag,attrs:{isShowCcModal:e.isShowCcModal,"append-to-body":"",isQueryUser:!0},on:{"update:isShowCcModal":function(t){e.isShowCcModal=t},"update:is-show-cc-modal":function(t){e.isShowCcModal=t},handleConfirm:e.addCcPeople}})],1)],1)},r=[],a=n("1da1"),i=(n("96cf"),n("159b"),n("99af"),n("4de4"),n("a434"),n("470f")),s=n("a417"),c={name:"SubmitModal",components:{ccPeopleModal:i["a"]},props:{isShowSubmitModal:{type:Boolean,default:!1},submitInfo:{type:Object,default:function(){return{}}},customEventName:{type:String,default:"submitFormData"},isDisabledEvent:{type:Boolean,default:!1}},data:function(){return{isShowAddModal:!1,isShowCcModal:!1,addApproveModalKeyFlag:0,addCcPeopleModalKeyFlag:100,submitFlag:!0}},mounted:function(){this.registerCloseEvent(),this.addCcPeopleForZpRole()},methods:{addCcPeopleForZpRole:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.query.objStr){t.next=10;break}if(n=JSON.parse(decodeURIComponent(e.$route.query.objStr)),o=n.flowName,n.version,"员工定薪流程"!==o&&"员工入职流程"!==o){t.next=10;break}return t.next=6,Object(s["J"])({roleId:"B07212671AEE000"});case 6:if(r=t.sent,r&&0!==r.length){t.next=9;break}return t.abrupt("return");case 9:r.forEach((function(t){var n={assignId:t.userInfo&&t.userInfo.userId,assignName:"[".concat(t.userInfo&&t.userInfo.loginName,"] ").concat(t.userInfo&&t.userInfo.userName),assignType:e.submitInfo.assignType,runType:"IT_RUNX_002"};e.submitInfo.ccPeopleList.push(n)}));case 10:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){this.submitFlag&&(this.submitFlag=!1,console.log(this.isDisabledEvent,"里面的按钮重复提交"),this.isDisabledEvent||this.$emit(this.customEventName))},openApprovalModal:function(){"IT_SPLX_002"!==this.submitInfo.assignType?(this.isShowAddModal=!0,this.addApproveModalKeyFlag+=1):this.$message.warning("单签类型不允许添加审批人")},openCcPeopleModal:function(){this.isShowCcModal=!0,this.addCcPeopleModalKeyFlag+=1},addApproval:function(e){console.log(e,"审批类型");var t=this.submitInfo.approverList.filter((function(t){return t.assignName===e.text}));if(t.length>0)this.$message.warning("审批人已添加，请勿重复提交！");else{var n={assignId:e.value,assignName:e.text,assignType:this.submitInfo.assignType,runType:"IT_RUNX_003"};console.log(n,"添加的参数"),this.submitInfo.approverList.push(n),console.log(e,"添加审批人")}},addCcPeople:function(e){var t=this.submitInfo.ccPeopleList.filter((function(t){return t.assignName===e.text}));if(t.length>0)this.$message.warning("抄送人已添加，请勿重复提交！");else{var n={assignId:e.value,assignName:e.text,assignType:this.submitInfo.assignType,runType:"IT_RUNX_002"};this.submitInfo.ccPeopleList.push(n)}},closeApproval:function(e){this.submitInfo.approverList.splice(e,1)},closeCcPeople:function(e){this.submitInfo.ccPeopleList.splice(e,1)},deleteAllApproval:function(){var e=this;this.$confirm("请确认是否要清除全部审批人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.submitInfo.approverList=[]}))},deleteAllCcPeople:function(){var e=this;this.$confirm("请确认是否要清除全部抄送人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.submitInfo.ccPeopleList=[]}))},handleCancel:function(){this.$emit("update:isShowSubmitModal",!1)},registerCloseEvent:function(){var e=this,t=document.querySelector(".submitModal .el-dialog__close");t&&t.addEventListener("click",(function(){e.handleCancel()}))}}},u=c,l=(n("d4b6"),n("2877")),d=Object(l["a"])(u,o,r,!1,null,"e4c06214",null);t["a"]=d.exports},c940:function(e,t,n){},d4b6:function(e,t,n){"use strict";n("c940")},dc27:function(e,t,n){"use strict";n.d(t,"t",(function(){return r})),n.d(t,"R",(function(){return a})),n.d(t,"db",(function(){return i})),n.d(t,"E",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"x",(function(){return u})),n.d(t,"J",(function(){return l})),n.d(t,"K",(function(){return d})),n.d(t,"G",(function(){return m})),n.d(t,"cb",(function(){return p})),n.d(t,"P",(function(){return f})),n.d(t,"bb",(function(){return h})),n.d(t,"N",(function(){return b})),n.d(t,"eb",(function(){return y})),n.d(t,"hb",(function(){return v})),n.d(t,"ab",(function(){return g})),n.d(t,"gb",(function(){return I})),n.d(t,"H",(function(){return C})),n.d(t,"I",(function(){return O})),n.d(t,"F",(function(){return w})),n.d(t,"L",(function(){return S})),n.d(t,"O",(function(){return k})),n.d(t,"fb",(function(){return j})),n.d(t,"jb",(function(){return x})),n.d(t,"w",(function(){return E})),n.d(t,"C",(function(){return N})),n.d(t,"s",(function(){return L})),n.d(t,"U",(function(){return _})),n.d(t,"V",(function(){return T})),n.d(t,"M",(function(){return F})),n.d(t,"v",(function(){return A})),n.d(t,"ib",(function(){return $})),n.d(t,"p",(function(){return P})),n.d(t,"h",(function(){return D})),n.d(t,"W",(function(){return M})),n.d(t,"g",(function(){return B})),n.d(t,"n",(function(){return R})),n.d(t,"X",(function(){return q})),n.d(t,"B",(function(){return U})),n.d(t,"Q",(function(){return G})),n.d(t,"D",(function(){return J})),n.d(t,"l",(function(){return V})),n.d(t,"i",(function(){return Z})),n.d(t,"m",(function(){return X})),n.d(t,"y",(function(){return H})),n.d(t,"A",(function(){return Q})),n.d(t,"z",(function(){return W})),n.d(t,"S",(function(){return K})),n.d(t,"c",(function(){return z})),n.d(t,"e",(function(){return Y})),n.d(t,"b",(function(){return ee})),n.d(t,"d",(function(){return te})),n.d(t,"j",(function(){return ne})),n.d(t,"f",(function(){return oe})),n.d(t,"Z",(function(){return re})),n.d(t,"T",(function(){return ae})),n.d(t,"q",(function(){return ie})),n.d(t,"Y",(function(){return se})),n.d(t,"r",(function(){return ce})),n.d(t,"o",(function(){return ue})),n.d(t,"u",(function(){return le})),n.d(t,"k",(function(){return de}));var o=n("b775");function r(e){return Object(o["a"])({url:"/employ/attr/queryEmployAttrList",method:"post",data:e})}function a(e){return Object(o["a"])({url:"/employ/archives/queryEmployList",method:"post",params:e})}function i(e){return Object(o["a"])({url:"/employ/attr/saveOrUpdateEmployAttr",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/employ/attr/queryEmployAttr",method:"post",params:e})}function c(e){return Object(o["a"])({url:"/employ/attr/addOrCancelAttr",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/employ/attr/queryEmployAttrHistory",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/employ/free/queryEmployFreeList",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/employ/free/queryEmployFreePoolList",method:"post",data:e})}function m(e){return Object(o["a"])({url:"/employ/free/queryEmployFree",method:"post",params:e})}function p(e){return Object(o["a"])({url:"/employ/archives/saveOrUpdateEmploy",method:"post",data:e})}function f(e){return Object(o["a"])({url:"/employ/archives/queryEmployInfoList",method:"post",data:e})}function h(e){return Object(o["a"])({url:"/employ/archives/removeEmployInfo",method:"post",params:e})}function b(e){return Object(o["a"])({url:"/employ/archives/queryEmployInfoDetail",method:"post",params:e})}function y(e){return Object(o["a"])({url:"/employ/free/saveOrUpdateEmployFree",method:"post",data:e})}function v(e){return Object(o["a"])({url:"/employ/free/updateEmployFreeEntry",method:"post",data:e})}function g(e){return Object(o["a"])({url:"/employ/free/removeEmployFree",method:"post",params:e})}function I(e){return Object(o["a"])({url:"/employ/free/updateCancelEmployFree",method:"post",data:e})}function C(e){return Object(o["a"])({url:"/employ/free/queryEmployFreeDetail",method:"post",params:e})}function O(e){return Object(o["a"])({url:"/employ/free/queryEmployFreeHistory",method:"post",data:e})}function w(e){return Object(o["a"])({url:"/employ/archives/queryEmployFormalList",method:"post",data:e})}function S(e){return Object(o["a"])({url:"/employ/archives/queryEmployHistoryList",method:"post",params:e})}function k(e){return Object(o["a"])({url:"/employ/archives/queryEmployInfo",method:"post",params:e})}function j(e){return Object(o["a"])({url:"/employ/archives/updateBatchFormal",method:"post",data:e})}function x(e){return Object(o["a"])({url:"/employ/archives/updateFormalDelay",method:"post",data:e})}function E(){return Object(o["a"])({url:"/employ/archives/queryAppointCount",method:"post"})}function N(e){return Object(o["a"])({url:"/employ/archives/queryEmployBaseDetail?employId=".concat(e.employId),method:"post"})}function L(e){return Object(o["a"])({url:"/employ/archives/getEmployBaseDetail",method:"post",params:e})}function _(e){return Object(o["a"])({url:"/employ/archives/queryEmployWorkCount",method:"post",params:e})}function T(e){return Object(o["a"])({url:"/employ/archives/queryLastEmployChangeRecord",method:"post",params:e})}function F(e){return Object(o["a"])({url:"/employ/archives/queryEmployInfoContractPage",method:"post",data:e})}function A(e){return Object(o["a"])({url:"/employ/archives/operateEmployInfoContract",method:"post",data:e})}function $(e){return Object(o["a"])({url:"/employ/archives/updateEmployInfoContract",method:"post",data:e})}function P(e){return Object(o["a"])({url:"/employ/archives/exportEmployInfoContract",method:"post",data:e})}function D(e){return Object(o["a"])({url:"/employ/archives/checkSpecialDate",method:"post",data:e})}function M(e){return Object(o["a"])({url:"/employ/free/queryNewEmployFreeDetail",method:"post",params:e})}function B(e){return Object(o["a"])({url:"/employ/archives/checkFlow",method:"post",params:e})}function R(e){return Object(o["a"])({url:"/employ/archives/exportEmploy",method:"post",data:e})}function q(e){return Object(o["a"])({url:"/system/org/queryOrgMoney?employType=".concat(e.employType),method:"post"})}function U(e){return Object(o["a"])({url:"/employ/activity/getNewEmployList",method:"post",data:e})}function G(e){return Object(o["a"])({url:"/employ/activity/getReductionEmployList",method:"post",data:e})}function J(e){return Object(o["a"])({url:"/employ/activity/getPositiveEmployList",method:"post",data:e})}function V(e){return Object(o["a"])({url:"/employ/activity/exportPositiveEmployExcel",method:"post",data:e})}function Z(e){return Object(o["a"])({url:"/employ/activity/exportNewEmployExcel",method:"post",data:e})}function X(e){return Object(o["a"])({url:"/employ/activity/exportReductionEmployExcel",method:"post",data:e})}function H(e){return Object(o["a"])({url:"/business/client/queryClientCompanySelectListByLike",method:"post",params:e})}function Q(e){return Object(o["a"])({url:"/business/contract/queryContractSelectByOrgIdANDClientCompanyIdOnEmploy",method:"post",params:e})}function W(e){return Object(o["a"])({url:"/business/client/queryClientCompanyWorkplaceListByLike",method:"post",params:e})}function K(e){return Object(o["a"])({url:"/employ/activity/getaddOrLeaveEmployList",method:"post",data:e})}function z(e){return Object(o["a"])({url:"/employ/two/updChangeLeave",method:"post",data:e})}function Y(e){return Object(o["a"])({url:"/employ/two/updChangeEmployType",method:"post",data:e})}function ee(e){return Object(o["a"])({url:"/employ/two/updChangeZhuanOrg",method:"post",data:e})}function te(e){return Object(o["a"])({url:"/employ/two/updChangeTiaoGang",method:"post",data:e})}function ne(e){return Object(o["a"])({url:"/employ/two/exportUnFormalEmployChangeFinanceList",method:"post",data:e})}function oe(e){return Object(o["a"])({url:"/employ/two/getTwoDetail",method:"get",params:e})}function re(e){return Object(o["a"])({url:"/system/user/queryUserSelectListByCondition",method:"post",params:e})}function ae(e){return Object(o["a"])({url:"/employ/archives/queryEmployRosterList",method:"post",data:e})}function ie(e){return Object(o["a"])({url:"/employ/archives/exportEmployRoster",method:"post",data:e})}function se(e){return Object(o["a"])({url:"/employ/archives/queryRosterList",method:"post",data:e})}function ce(e){return Object(o["a"])({url:"/employ/archives/exportRoster",method:"post",data:e})}function ue(e){return Object(o["a"])({url:"/employ/free/exportEmployFree",method:"post",data:e})}function le(e){return Object(o["a"])({url:"/employ/rosterrealtime/getLastContrastInfo",method:"get",data:e})}function de(e){return Object(o["a"])({url:"/employ/rosterrealtime/exportContrastExcel",method:"get",data:e})}},f6f0:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"toms-add-submitForm"},[e.allBtnList.includes(e.moduleName+".button.close")?n("div",{staticClass:"item",on:{click:e.closePage}},[e._v(" 关闭 ")]):e._e(),e.allBtnList.includes(e.moduleName+".button.review")?n("div",{staticClass:"item",on:{click:e.handlePreview}},[e._v(" 预览 ")]):e._e(),e.allBtnList.includes(e.moduleName+".button.flowimg")?n("div",{staticClass:"item",on:{click:function(t){e.isShowImgModal=!0}}},[e._v(" 流程图 ")]):e._e(),n("Debounce",{attrs:{time:500,events:"click"}},[e.allBtnList.includes(e.moduleName+".button.save")&&e.isShowDraftBtn?n("div",{staticClass:"item",on:{click:e.saveDraft}},[e._v(" 保存 ")]):e._e()]),n("Debounce",{attrs:{time:500,events:"click"}},[e.allBtnList.includes(e.moduleName+".button.submit")?n("div",{staticClass:"item submit",on:{click:e.submitForm}},[e._v(" 提交 ")]):e._e()])],1),n("process-image",{attrs:{isShowImgModal:e.isShowImgModal,src:e.processImageSrc},on:{"update:isShowImgModal":function(t){e.isShowImgModal=t},"update:is-show-img-modal":function(t){e.isShowImgModal=t}}}),n("submit-modal",{attrs:{isDisabledEvent:e.isDisabledEvent,isShowSubmitModal:e.isShowSubmitModal,submitInfo:e.submitInfo,customEventName:"finalSubmit"},on:{"update:isShowSubmitModal":function(t){e.isShowSubmitModal=t},"update:is-show-submit-modal":function(t){e.isShowSubmitModal=t},finalSubmit:e.finalSubmit}})],1)},r=[],a=n("1da1"),i=n("5530"),s=(n("96cf"),n("caad"),n("2532"),n("a15b"),n("d81d"),n("99af"),n("159b"),n("6d07")),c=n("470f"),u=n("86c5"),l=n("2f62"),d=n("d14b"),m={name:"ProcessOperationBtn",components:{processImage:s["a"],ccPeopleModal:c["a"],submitModal:u["a"]},props:{processFormParams:{type:Object,default:function(){return{}}},processImageSrc:{type:String,default:function(){return""}},prepareCommitParams:{type:Object,default:function(){return{}}},taskFlowConfig:{type:Object,default:function(){return{}}},taskNodeInstance:{type:Object,default:function(){return{}}},taskInstance:{type:Object,default:function(){return{}}},aprvData:{type:Object,default:function(){return{}}},componentRefs:{type:Array,default:function(){return[]}},uploadTableData:{type:Array,default:function(){return[]}},moduleName:{type:String,default:function(){return"price"}},isBeforeCommit:{type:Boolean,default:function(){return!1}},beforeCommit:{type:Function},isFirstSubmitProcess:{type:Boolean,default:function(){return!0}},isContinue:{type:Boolean,default:function(){return!0}},currenFlowInfo:{type:Object,default:function(){return{}}},notGetJobOrUv:{type:Boolean,default:!1}},data:function(){return{allBtnList:[],isShowImgModal:!1,isShowCcModal:!1,isShowSubmitModal:!1,submitInfo:{approverList:[],ccPeopleList:[]},isNextNode:!1,taskNextAssignList:[],isDisabledEvent:!1,isShowDraftBtn:!0}},computed:Object(i["a"])({},Object(l["e"])("processPermission",["hasBtnPmsCodeList"])),watch:{hasBtnPmsCodeList:{deep:!0,handler:function(e){e.length>0&&(this.allBtnList=e)}},"currenFlowInfo.taskFlowNodeConfig.nodeName":{handler:function(e){if(e&&this.$route.query.taskObj)if(e.includes("010")){var t=this.$route.query.taskObj,n=JSON.parse(decodeURIComponent(t));if("IT_RUNS_001"===n.runStatus)return console.ta,void(this.isShowDraftBtn=!0);this.isShowDraftBtn=!1}else this.isShowDraftBtn=!1},immediate:!0}},methods:Object(i["a"])(Object(i["a"])({},Object(l["d"])("entryCfmSalary",["CHANGE_EDIT_PROCESS_STATUS","CHANGE_LIST_PAGE_STAUTS"])),{},{submitForm:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,o,r,a,i,s,c,u,l,m,p,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=null,e.$parent.getAllFormData&&e.$emit("getAllFormData"),n="IT_RWSP_002"===e.aprvData.auditType||"IT_RWSP_003"===e.aprvData.auditType?!!e.$parent.$refs.approvalForm.validateApprovalModule():e.validateAllForm(),!n){t.next=49;break}if("员工转正流程"!==e.taskFlowConfig.flowName||"IT_ZZLX_002"!==e.processFormParams.formalType||!e.processFormParams.currenNode||!e.processFormParams.currenNode.includes("020")){t.next=9;break}return t.next=7,e.$confirm("此员工为提前转正，是否确认提交转正信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 7:a=t.sent,console.log("预提交之前",a);case 9:if(!e.isBeforeCommit){t.next=17;break}if(!e.isContinue){t.next=16;break}return t.next=13,e.beforeCommit();case 13:if(i=t.sent,!1!==i){t.next=16;break}return t.abrupt("return");case 16:e.$parent.isContinue=!0;case 17:return s=e.prepareCommitParams,c=s.city,u=s.orgId,l=null,"员工信息变更流程（SSC）"===(null===(o=e.taskFlowConfig)||void 0===o?void 0:o.flowName)&&"IT_XXBG_005"===(null===(r=e.processFormParams)||void 0===r?void 0:r.changeType)&&(l=null===(m=e.processFormParams)||void 0===m?void 0:m.entryOrgId),t.next=22,Object(d["j"])({city:c,orgId:u,taskDTO:{currentOrgId:l,taskFlowConfig:e.taskFlowConfig,taskNodeInstance:e.taskNodeInstance,relatedObject:e.processFormParams,taskInstance:e.taskInstance,notGetJobOrUv:e.notGetJobOrUv,taskFileDTOS:e.uploadTableData.length>0?e.uploadTableData:[]}});case 22:if(p=t.sent,console.log("准备提交ok，返回的值如下",p),console.log(e.aprvData,"审批formData"),"IT_RWSP_002"!==e.aprvData.auditType&&"IT_RWSP_003"!==e.aprvData.auditType){t.next=31;break}e.taskNextAssignList=p.nextTaskAssignList||[],e.isNextNode=p.isNext,e.finalSubmit(),t.next=46;break;case 31:if(e.isNextNode=p.isNext,!p.isNext){t.next=45;break}if(e.taskNextAssignList=p.nextTaskAssignList,console.log(p.nextTaskAssignList,"审批人信息"),e.submitInfo.nodeName=p.nextTaskFlowNodeConfig.nodeName,1===e.taskNextAssignList.length&&(e.submitInfo=Object.assign(e.submitInfo,e.taskNextAssignList[0])),0!==e.taskNextAssignList.length){t.next=41;break}return e.submitInfo={approverList:[],ccPeopleList:[]},e.$message.warning("下个审批环节未配置审批人，请联系管理人员进行配置再提交！"),t.abrupt("return");case 41:e.taskNextAssignList.length>1&&(f=e.taskNextAssignList.map((function(e){return e.assignName})).join("/"),e.submitInfo.assignName=f,e.submitInfo.assignTypeCn=e.taskNextAssignList[0].assignTypeCn),e.isShowSubmitModal=!0,t.next=46;break;case 45:e.finalSubmit();case 46:return t.abrupt("return");case 49:return e.isFirstSubmitProcess?e.$message.warning("请检查必填写"):e.$message.warning("该流程已发起，请勿重复发起"),e.$nextTick((function(){var e=document.getElementsByClassName("is-error");e&&e.length&&e[0].scrollIntoView({block:"center",behavior:"smooth"})})),t.abrupt("return");case 52:case"end":return t.stop()}}),t)})))()},finalSubmit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,o,r,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.isDisabledEvent,"DIasbled事件"),!e.isDisabledEvent){t.next=3;break}return t.abrupt("return");case 3:return e.isNextNode&&(e.taskNodeInstance.taskNextAssignList=e.taskNextAssignList.concat(e.submitInfo.approverList,e.submitInfo.ccPeopleList)),r={taskFlowConfig:e.taskFlowConfig,taskNodeInstance:e.taskNodeInstance,relatedObject:e.processFormParams,taskFileDTOS:e.uploadTableData,taskInstance:e.taskInstance,notGetJobOrUv:e.notGetJobOrUv,taskAuditDTO:e.aprvData},"员工信息变更流程（SSC）"===(null===(n=r.taskFlowConfig)||void 0===n?void 0:n.flowName)&&"IT_XXBG_005"===(null===(o=r.relatedObject)||void 0===o?void 0:o.changeType)&&(r.currentOrgId=null===(a=r.relatedObject)||void 0===a?void 0:a.entryOrgId),t.next=8,Object(d["d"])(r);case 8:i=t.sent,"200"===i.code?(e.isDisabledEvent=!0,console.log("zhixingchenggongelema"),e.CHANGE_LIST_PAGE_STAUTS(!0),e.$message.success("提交成功"),e.isShowSubmitModal=!1,s=e.$route,e.$store.dispatch("tagsView/delView",s).then((function(t){t.visitedViews;e.$router.push("/workbench/backlog")}))):e.$message.error(i.msg||""),console.log("触发正式提交");case 11:case"end":return t.stop()}}),t)})))()},validateAllForm:function(){var e=this,t=!0;if(this.componentRefs.forEach((function(n){n.isHasSon?(console.log("validateAllForm item",n,e.$parent.$refs[n.ref]),n.list?n.list.forEach((function(o){e.$parent.$refs[n.ref]&&e.$parent.$refs[n.ref].$refs[o]&&e.$parent.$refs[n.ref].$refs[o].validate((function(e){e||(t=!1)}))})):e.$parent.$refs[n.ref]&&e.$parent.$refs[n.ref].$refs[n.ref].validate((function(e){e||(t=!1)}))):e.$parent.$refs[n.ref]&&e.$parent.$refs[n.ref].validate((function(e){e||(t=!1)}))})),this.$parent.customValidate){var n=this.$parent.customValidate();n||(t=!1)}return this.$parent.$refs.approvalForm&&(this.$parent.$refs.approvalForm.validateApprovalModule()||(t=!1)),t},closePage:function(){var e=this,t=this.$route;this.$confirm("内容未保存, 是否直接关闭?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$store.dispatch("tagsView/delView",t).then((function(t){t.visitedViews;e.$router.push("/workbench/backlog")}))}))},handlePreview:function(){this.$emit("openPreviewModal")},handleConfirm:function(e){this.$emit("ccPeopleCallback",e)},saveDraft:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isDisabledEvent){t.next=2;break}return t.abrupt("return");case 2:return e.$parent.getAllFormData&&e.$emit("getAllFormData"),t.next=5,Object(d["u"])({taskFlowConfig:e.taskFlowConfig,taskNodeInstance:e.taskNodeInstance,relatedObject:e.processFormParams,taskInstance:e.taskInstance,taskFileDTOS:e.uploadTableData.length>0?e.uploadTableData:[]});case 5:n=t.sent,"200"===n.code?(e.isDisabledEvent=!0,e.$message.success("草稿保存成功"),e.CHANGE_LIST_PAGE_STAUTS(!0),o=e.$route,e.$store.dispatch("tagsView/delView",o).then((function(t){t.visitedViews;e.$router.push("/workbench/draft")}))):e.$message.error(n.msg||"");case 7:case"end":return t.stop()}}),t)})))()}})},p=m,f=n("2877"),h=Object(f["a"])(p,o,r,!1,null,"180a8378",null);t["a"]=h.exports}}]);