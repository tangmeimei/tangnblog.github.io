(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a787e53"],{"35ad":function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"k",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"y",(function(){return l})),n.d(t,"A",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"j",(function(){return p})),n.d(t,"l",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"p",(function(){return m})),n.d(t,"z",(function(){return h})),n.d(t,"x",(function(){return g})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return y})),n.d(t,"w",(function(){return C})),n.d(t,"a",(function(){return w})),n.d(t,"v",(function(){return b})),n.d(t,"B",(function(){return v})),n.d(t,"r",(function(){return I})),n.d(t,"q",(function(){return D})),n.d(t,"s",(function(){return L})),n.d(t,"i",(function(){return O})),n.d(t,"u",(function(){return E})),n.d(t,"o",(function(){return T})),n.d(t,"n",(function(){return x})),n.d(t,"t",(function(){return j})),n.d(t,"g",(function(){return k})),n.d(t,"m",(function(){return S}));var a=n("b775");function o(e){return Object(a["a"])({url:"/business/contract/queryContractList",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/business/client/queryClientCompanyInfos",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/business/contract/deleteContract",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/business/contract/saveOrUpdate",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/business/contract/saveOrUpdateRelation",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/business/contract/queryContractInfo",method:"post",params:e})}function p(e){return Object(a["a"])({url:"/business/contract/queryContractSelectList",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/commons/basedata/queryCompanyList",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/business/client/queryAllClientCompanySelectList",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/business/client/queryClientCompanyListNoScope",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/business/contract/saveContractPrice",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/business/contract/addContractAndVirtualRelation",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/business/contract/queryContractFileList",method:"post",params:e})}function y(e){return Object(a["a"])({url:"/business/contract/queryContractPrice",method:"post",params:e})}function C(e){return Object(a["a"])({url:"/business/contract/queryTMContractPrice",method:"post",params:e})}function w(e){return Object(a["a"])({url:"/business/contract/checkContractInfo",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/business/contract/queryStagingList",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/business/contract/saveOrupdateStaging",method:"post",data:e})}function I(e){return Object(a["a"])({url:"/business/contract/queryContractPriceDimension",method:"post",params:e})}function D(e){return Object(a["a"])({url:"/business/contract/queryContractSelectListByLike",method:"post",params:e})}function L(e){return Object(a["a"])({url:"/business/contract/queryContractPriceResult",method:"post",params:e})}function O(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryForStation",method:"post",data:e})}function E(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryForLevel",method:"post",data:e})}function T(e){return Object(a["a"])({url:"/salary/salaryLineSet/querForPirce",method:"post",data:e})}function x(e){return Object(a["a"])({url:"/salary/salaryLineSet/querForDetail",method:"post",data:e})}function j(e){return Object(a["a"])({url:"/business/contract/queryContractSelectByOrgIdANDClientCompanyId",method:"post",params:e})}function k(e){return Object(a["a"])({url:"/business/contract/getContractPrice",method:"post",params:e})}function S(e){return Object(a["a"])({url:"/business/contract/queryContractPriceVersionList/".concat(e),method:"post"})}},"470f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ccContainer"},[n("el-dialog",e._b({attrs:{title:"选择人员",visible:e.isShowCcModal,width:"25%","destroy-on-close":!0,"close-on-click-modal":!1},on:{close:e.handleCancel}},"el-dialog",e.$attrs,!1),[n("el-form",{ref:"ruleForm",attrs:{model:e.employForm,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"姓名",prop:"employId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"请输入工号或姓名","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.handleSelectChange,keyup:e.handleInput},model:{value:e.employForm.employId,callback:function(t){e.$set(e.employForm,"employId",t)},expression:"employForm.employId"}},e._l(e.optionList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"所属组织"}},[n("el-input",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.currentOrg,callback:function(t){e.currentOrg=t},expression:"currentOrg"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)],1)},o=[],r=n("1da1"),i=n("5530"),l=(n("96cf"),n("d81d"),n("99af"),n("159b"),n("a15b"),n("a417")),s=n("ed08"),c=n("dc27"),p=n("2f62"),u={name:"CcPeopleModal",props:{isShowCcModal:{type:Boolean,default:!1},customEventName:{type:String,default:"handleConfirm"},isQueryUser:{type:Boolean,default:!1},isLeave:{type:Boolean,default:!1},isQueryJfOrZp:{type:Boolean,default:!1},roleType:{type:String,default:""},employType:{type:String,default:""}},data:function(){return{loading:!1,optionList:[],rules:{employId:{message:"请输入员工姓名",required:!0,trriger:"change"}},employForm:{employId:""},currentOrg:"",selectedItemData:{},oneDimensionArr:[]}},computed:Object(i["a"])({},Object(p["e"])("baseData",["orgTreeData"])),watch:{},mounted:function(){this.registerCloseEvent(),this.getOrgTreeList()},methods:{handleInput:function(e){},handleSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.$emit(e.customEventName,e.selectedItemData),e.$emit("update:isShowCcModal",!1))}))},handleCancel:function(){this.$refs.ruleForm.resetFields(),this.$refs.ruleForm.clearValidate(),this.$emit("update:isShowCcModal",!1)},remoteMethod:function(e){if(this.loading=!0,""!==e)if(e=encodeURI(e),this.isQueryUser)if(this.isQueryJfOrZp){var t={keyword:e,roleType:this.roleType};this.queryJfOrZp(t)}else{var n={keyword:e};this.queryUser(n)}else{var a={keyWord:e,isLeave:this.isLeave,employType:this.employType||""};this.queryEmployee(a)}else this.optionList=[]},queryJfOrZp:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["Z"])(e);case 2:a=n.sent,t.loading=!1,t.optionList=Array.isArray(a)&&a.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(i["a"])({text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName," | ").concat(e.orgName),value:e.userInfo.userId},t)}));case 5:case"end":return n.stop()}}),n)})))()},queryUser:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["L"])(e);case 2:a=n.sent,t.loading=!1,t.optionList=Array.isArray(a)&&a.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(i["a"])({text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName," | ").concat(e.orgName),value:e.userInfo.userId},t)}));case 5:case"end":return n.stop()}}),n)})))()},getUserSelectListByOrg:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["M"])(e);case 2:a=n.sent,t.loading=!1,t.optionList=Array.isArray(a)&&a.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(i["a"])({text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName," | ").concat(e.orgName),value:e.userInfo.userId},t)}));case 5:case"end":return n.stop()}}),n)})))()},queryEmployee:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["R"])(e);case 2:a=n.sent,t.loading=!1,t.optionList=Array.isArray(a)&&a.map((function(e){return Object(i["a"])({text:"[".concat(e.employNo,"] ").concat(e.employName," | ").concat(e.orgCn),value:e.employId},e)}));case 5:case"end":return n.stop()}}),n)})))()},handleSelectChange:function(e){var t=this;this.optionList.forEach((function(n){if(n.value===e)if(t.selectedItemData=n,t.isQueryUser){var a=t.queryItemById(n.orgId,t.orgTreeData);if(a.parentId){var o=t.getAllParentOrgId(a.parentId,t.oneDimensionArr).reverse();o.push(a.orgName),t.currentOrg=o.join("/"),t.selectedItemData.orgFullName=t.currentOrg}else t.currentOrg=a.orgName}else t.currentOrg=n.orgCn}))},registerCloseEvent:function(){var e=this,t=document.querySelector(".ccContainer .el-dialog__close");t&&t.addEventListener("click",(function(){e.handleCancel()}))},getOrgTreeList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.oneDimensionArr=e.toOneDimensionArr(Object(s["a"])(e.orgTreeData));case 1:case"end":return t.stop()}}),t)})))()},queryItemById:function(e,t){var n=null;function a(t){t.forEach((function(t){if(e===t.orgId)return n=t;t.children&&t.children.length>0&&a(t.children)}))}return a(t),n},toOneDimensionArr:function(e){var t=[];Object(s["a"])(e);function n(e){e.forEach((function(e){t.push(e),e.children&&e.children.length>0&&(n(e.children),delete e.children)}))}return n(e),t},getAllParentOrgId:function(e,t){var n=[];function a(e,t){t.forEach((function(o){e===o.orgId&&e===o.orgId&&(n.push(o.orgName),a(o.parentId,t))}))}return a(e,t),n}}},d=u,m=n("2877"),h=Object(m["a"])(d,a,o,!1,null,"c8833b38",null);t["a"]=h.exports},c1af:function(e,t,n){},e55b:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));n("7db0"),n("99af"),n("fb6a"),n("159b");var a=n("ed08"),o=n("4360"),r=o["a"].state.baseData.orgTreeData,i=o["a"].state.baseData.jobTreeDate;function l(e,t){var n=[],a=function t(a,o){for(var r=0;r<a.length;r++){var i=a[r];if(i.value===o){n.push(i.extra1),n.push(o),t(e,i.parentId);break}i.children&&t(i.children,o)}};return a(e,t),n}function s(e){if(e){var t="",n=i.find((function(t){return t.value===e[0]})),a=n.children.find((function(t){return t.value===e[1]}));return t=a.extra2,t}}function c(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=u(e,r),o=d(Object(a["a"])(r));if(n){if(n.parentId){var i=p(n.parentId,o).reverse().concat([n.orgId]);return t?i:i.slice(1,i.length+1)}return[n.orgId]}}function p(e,t){var n=[];function a(e,t){t.forEach((function(o){e===o.orgId&&e===o.orgId&&(n.push(o.orgId),a(o.parentId,t))}))}return a(e,t),n}function u(e,t){var n=null;function a(t){t.forEach((function(t){if(e===t.orgId)return n=t;t.children&&t.children.length>0&&a(t.children)}))}return a(t),n}function d(e){var t=[];Object(a["a"])(e);function n(e){e.forEach((function(e){t.push(e),e.children&&e.children.length>0&&(n(e.children),delete e.children)}))}return n(e),t}},e677:function(e,t,n){"use strict";n("c1af")},f091:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.containerLoading,expression:"containerLoading"}],staticClass:"customer-container"},[n("div",{staticClass:"search-wrap"},[n("zm-Search",{ref:"search",attrs:{inputList:e.inputConfig,btnConfig:e.btnConfig},on:{reset:e.resetTable,search:e.searchconvers,employRemote:e.employRemote,clientRemote:e.clientRemote,employChangeAdd:e.employChangeAdd,exportChangeEmploy:e.exportChangeEmploy}})],1),n("div",{staticClass:"tableContent"},[n("zm-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"tableRef",staticStyle:{width:"100%"},attrs:{"header-cell-style":{"text-align":"center"},tableData:e.tableData,columns:e.columnsList,height:"542px",currentPage:e.pageData.pageIndex,pageSize:e.pageData.pageSize,total:e.pageData.pageCount,sizeList:e.sizeList},on:{viewFn:e.viewFn,handleCurrentChange:e.handleCurrentChange,sortChange:e.sortChange,handleSizeChange:e.handleSizeChange}})],1),e.isShow?n("el-dialog",{attrs:{title:"员工变动新增","close-on-click-modal":!1,visible:e.employChange.employChangeVisible,width:"850px","destroy-on-close":!0},on:{"update:visible":function(t){return e.$set(e.employChange,"employChangeVisible",t)},close:e.closeDialog,opened:e.dialogOpend}},[n("search-form",{ref:"employChangeModule",attrs:{firstLineList:e.secLineList,changeEndInfo:e.changeEndInfo},on:{"update:changeEndInfo":function(t){e.changeEndInfo=t},"update:change-end-info":function(t){e.changeEndInfo=t},setSelEmpIfo:e.setSelEmpIfo}}),n("div",{staticClass:"employChangeInfo"},[n("div"),n("div",[e._v(" 员工变动前信息 ")])]),n("info-form",{ref:"employInfoModule",attrs:{selectEmployInfo:e.selectEmployInfo}}),n("div",{staticClass:"employChangeInfo"},[n("div"),n("div",[e._v(" 变动后员工信息 ")])]),n(e.changeEndInfo,{ref:"employChangeInfoForm",tag:"component",staticStyle:{maxHeight:"300px",overflow:"auto"},attrs:{selEmpInfo:e.selectEmployInfo,levelOptionsList:e.levelOptionsList}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.employChange.employChangeVisible=!1}}},[e._v("关闭")]),n("el-button",{attrs:{type:"primary"},on:{click:e.employChangeSubmit}},[e._v("确定")])],1)],1):e._e(),n("el-dialog",{attrs:{title:"员工变动详情","close-on-click-modal":!1,visible:e.employChange.detailVisible,width:"850px","destroy-on-close":!0,"custom-class":"employChangeClass"},on:{"update:visible":function(t){return e.$set(e.employChange,"detailVisible",t)}}},[n("detailSearch",{attrs:{detailData:e.detailData}}),n("div",{staticClass:"employChangeInfo"},[n("div"),n("div",[e._v(" 员工变动前信息 ")])]),n("detailInfo",{attrs:{detailData:e.detailData}}),n("div",{staticClass:"employChangeInfo"},[n("div"),n("div",[e._v(" 变动后员工信息 ")])]),n(e.changeDetail,{tag:"component",attrs:{detailData:e.detailData}}),n("div",{staticClass:"employChangeInfo"},[n("div"),n("div",[e._v(" 操作人信息 ")])]),n("detailUpdate",{attrs:{detailData:e.detailData}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.employChange.detailVisible=!1}}},[e._v("关闭")])],1)],1)],1)},o=[],r=n("5530"),i=n("1da1"),l=(n("159b"),n("a434"),n("d81d"),n("99af"),n("96cf"),n("8cc7")),s=n("a937"),c=(n("ed08"),n("5f98")),p=function(e){e.$store.state.baseData.baseDataOptionList.IT_EMTY;var t=e.$store.state.baseData.jobTreeDate;return[{type:"cascader-input",bind_key:"orgId",label:"所属部门",optionList:e.$store.state.baseData.orgTreeData[0].children,span:6,checkStrictly:!0,propLabel:"orgName",propValue:"orgId",inputWidth:230},{type:"cascader-input",bind_key:"employJob",label:"公司岗位",span:6,optionList:t,checkStrictly:!0,inputWidth:230,propLabel:"text",propValue:"value"},{type:"text-input",bind_key:"employKeyword",label:"工号/姓名",placeholder:"工号或姓名",span:6,inputWidth:230,labelWidth:90},{type:"date-input",span:6,label:"生效日期",inputWidth:230,bind_key:"updateDt",datePickerType:"daterange",placeholder:"请选择",formatShow:"yyyy-MM-dd"},{type:"select-input",bind_key:"twoType",label:"变动类型",inputWidth:230,span:6,optionList:e.secLineList},{type:"text-input",bind_key:"mdeUpdatedBy",label:"操作人",placeholder:"工号或姓名",span:6,inputWidth:230}]},u=function(e){return{span:24,customList:[{customBtnText:"导出",changeFn:"exportChangeEmploy",role:"formalemploy.change.export",loading:e.exportLoading},{customBtnText:"新增",changeFn:"employChangeAdd",role:"formalemploy.change.add"}],leftBtnHidden:!Object(c["a"])("formalemploy.change.list")}},d=function(e){return[{label:"序号",type:"index",fixed:"center",width:"50px",kind:"render",render:function(t,n){var a=n.$index+1,o=(e.pageData.pageIndex-1)*e.pageData.pageSize;return t("span",a+o)}},{label:"工号",fixed:"left",minWidth:70,prop:"employNo"},{label:"姓名",sortable:"custom",align:"left",fixed:"left",minWidth:100,prop:"employName"},{label:"入职日期",prop:"employEnterDate",minWidth:120},{label:"变动生效日期",minWidth:120,prop:"updDate"},{label:"变动类型",prop:"typeCn",minWidth:120,align:"left"},{label:"原一级部门",minWidth:150,prop:"oldFirstOrg",align:"left"},{label:"原二级部门",minWidth:150,prop:"oldSecondOrg",align:"left"},{label:"原员工类型",prop:"oldEmployType",minWidth:120},{label:"原公司岗位",prop:"oldCompanyJob",minWidth:120},{label:"原岗位职级",minWidth:150,prop:"oldLeave"},{label:"新一级部门",prop:"newFirstOrg",align:"left",minWidth:150},{label:"新二级部门",prop:"newSecondOrg",align:"left",minWidth:150},{label:"新公司岗位",prop:"newCompanyJob",minWidth:120},{label:"新岗位级别",minWidth:150,prop:"newLeave"},{label:"新员工类型",prop:"newEmployType",minWidth:120},{label:"变动原因",prop:"changeReason",minWidth:120},{label:"操作人",prop:"mdeUpdatedBy",minWidth:120},{label:"操作时间",prop:"mdeUpdatedDate",minWidth:120},{label:"操作",fixed:"right",width:"120px",kind:"formatBtn",firstBtn:{text:"详情",role:"formalemploy.change.info",fn:"viewFn"}}]},m=n("dc27"),h=n("a417"),g=n("f6b0"),f=n("61f7"),y=n("2f62"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"searchForm",attrs:{formData:e.employChangeForm,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"},on:{deliverFocus:e.deliverFocus,changeType:e.changeType,companyDeliverRemote:e.companyDeliverRemote,getEmployInfo:e.getEmployInfo}})],1)},w=[],b=n("c91b"),v=function(e){return[{span:12,list:[{type:"select",label:"变更类型",prop:"changeType",placeholder:"请选择",changeFn:"changeType",optionList:e.firstLineList}]},{span:12,list:[{type:"remoteSelectLoading",label:"工号/姓名",prop:"companyDeliver",placeholder:"请选择",loading:e.companyDeliverLoading,remoteMethod:"companyDeliverRemote",selectOptionList:e.companyDeliverOptions,changeFn:"getEmployInfo"}]}]},I={changeType:[{required:!0,message:"请选择变更类型",trigger:"change"}],companyDeliver:[{required:!0,message:"请选择员工",trigger:"change"}]},D=n("470f"),L=n("7ded"),O=n("e55b"),E={name:"employChangeAddForm",inheritAttrs:!1,components:{zmForm:b["a"]},props:{firstLineList:{default:function(){return{}}}},data:function(){return{rules:I,isShowDeliverModal:!1,isShowRecruitModal:!1,companyDeliverLoading:!1,companyDeliverOptions:[],employChangeForm:{changeType:"",companyDeliver:""}}},computed:Object(r["a"])({formConfig:function(){return v(this)},employPidNo:function(){return this.$parent.basicFormData.employPidNo}},Object(y["e"])("baseData",["jobTreeDate","orgTreeData"])),watch:{"employChangeForm.changeType":{handler:function(e){console.log("search-changeType数据监听");var t="";switch(e){case"IT_TWOL_001":t="changePost";break;case"IT_TWOL_002":t="changeDep";break;case"IT_TWOL_003":t="changeType";break;case"IT_TWOL_004":t="changeLevel";break;case"IT_TWOL_006":t="secDep";break;case"IT_TWOL_005":t="secType";break}this.$emit("update:changeEndInfo",t)}}},created:function(){},mounted:function(){},methods:{deliverFocus:function(){this.isShowDeliverModal=!0},changeType:function(e){console.log("变更类型change事件：",e);var t="";switch(e){case"IT_TWOL_001":t="changePost";break;case"IT_TWOL_002":t="changeDep";break;case"IT_TWOL_006":t="changeLevel";break;case"IT_TWOL_003":t="changeType";break;case"IT_TWOL_004":t="changeLevel";break}this.$emit("update:changeEndInfo",t)},companyDeliverRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.companyDeliverLoading=!0,n.prev=2,n.next=5,Object(m["R"])({keyWord:e,employType:"emp_type_002"});case 5:a=n.sent,console.log("查询用户结果",a),t.companyDeliverOptions=Array.isArray(a)&&a.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(r["a"])({text:"[".concat(e.employNo,"] ").concat(e.employName),value:e.employId},t)})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.companyDeliverLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},getEmployInfo:function(e){var t=this;this.companyDeliverOptions.forEach((function(n){if(n.value===e){var a=Object(O["a"])(t.jobTreeDate,n.companyJob);console.log("处理之后的岗位ID:",a),n.allJobId=a;var o=Object(O["c"])(n.orgId);o.length&&o.shift(),n.allOrgId=o,t.$emit("setSelEmpIfo",n),t.$emit("update:jobLevelCode",a)}}))}}},T=E,x=n("2877"),j=Object(x["a"])(T,C,w,!1,null,null,null),k=j.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"maintainForm",attrs:{formData:e.selectEmployInfo,formConfig:e.formConfig,labelWidth:"140px"}})],1)},R=[],J=function(e){return[{span:12,list:[{type:"readOnly",prop:"orgCn",label:"所属部门",placeholder:"请输入"}]},{span:12,list:[{type:"readOnly",prop:"companyJobCn",label:"公司岗位",placeholder:"请输入"}]},{span:12,list:[{type:"readOnly",prop:"companyJobLevelCn",label:"岗位职级",placeholder:"请输入"}]},{span:12,list:[{type:"readOnly",prop:"officeName",label:"职场名称",placeholder:"请输入"}]},{span:24,list:[{type:"readOnly",prop:"officeAddress",label:"职场地址",placeholder:"请输入",render:function(e,t){var n=t;return e("el-tooltip",{props:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:{whiteSpace:"pre-wrap",lineHeight:"25px"}},n),e("el-tooltip",{props:{placement:"top",disabled:!0}},[e("div",{style:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},n)])])}}]}]},A={name:"CompanyInfo",components:{zmForm:b["a"]},props:{selectEmployInfo:{default:function(){return{}}}},data:function(){return{userInfo:{},loading:!1}},computed:{formConfig:function(){return J(this)}},watch:{},mounted:function(){},methods:{}},q=A,_=Object(x["a"])(q,S,R,!1,null,null,null),F=_.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.employChangeEndInfoDataData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"},on:{deliverFocus:e.deliverFocus,recruitFocus:e.recruitFocus,companyDeliverRemote:e.companyDeliverRemote,selectCompany:e.selectCompany,newCompanyJobChange:e.newCompanyJobChange}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowDeliverModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowDeliverModal=t},"update:is-show-cc-modal":function(t){e.isShowDeliverModal=t},handleConfirm:e.handleDeliverConfirm}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowRecruitModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowRecruitModal=t},"update:is-show-cc-modal":function(t){e.isShowRecruitModal=t},handleConfirm:e.handleRecruitConfirm}})],1)},M=[],N=(n("7db0"),n("4de4"),n("ade3")),W=n("4360"),$=W["a"].state.baseData.baseDataOptionList,U=function(e){var t=e.$store.state.baseData.baseDataOptionList;return[{span:12,list:[{type:"addressCascader0518",prop:"newCompanyJob",label:"公司岗位",placeholder:"请输入",optionList:e.$store.state.baseData.jobTreeDate,propLabel:"text",propValue:"value",changeFn:"newCompanyJobChange"}]},{span:12,list:[Object(N["a"])({type:"select",prop:"newCompanyJobLevel",label:"岗位职级",placeholder:"请输入",optionList:e.levelOptionsList},"optionList",$[e.jobLevelCode])]},{span:12,list:[{type:"select",prop:"newEmployType",label:"员工类型",placeholder:"请输入",optionList:e.$store.state.baseData.baseDataOptionList.IT_EMTY.filter((function(e){if("二线员工"!==e.text)return e}))}]},{span:12,list:[{type:"select",prop:"newClientCompanyId",label:"所属客户",placeholder:"请选择",optionList:e.joinClientOptions}]},{span:12,list:[{type:"select",prop:"newClientTwoLevelId",label:"客户分类",placeholder:"请选择",filterable:!0,optionList:e.ClientTwoLevelList,customOption:{customLabel:"clientTwoLevelName",customValue:"clientTwoLevelId"},hidden:e.ClientTwoLevelList.length<1}]},{span:12,list:[{type:"select",prop:"newClientContractId",label:"所属客户合同",placeholder:"请输入",optionList:e.clientConstractList}]},{span:12,list:[{type:"select",prop:"newClientSaleJob",label:"结算岗位",placeholder:"请选择",optionList:e.jobs,hidden:e.noJobAndLevel}]},{span:12,list:[{type:"text",prop:"newClientSaleJob",label:"结算岗位",placeholder:"请输入",optionList:e.jobs,hidden:!e.noJobAndLevel}]},{span:12,list:[{type:"select",prop:"newClientSaleLevel",label:"结算职级",placeholder:"请输入",optionList:e.levels,hidden:e.noJobAndLevel}]},{span:12,list:[{type:"text",prop:"newClientSaleLevel",label:"结算职级",placeholder:"请输入",optionList:e.levels,hidden:!e.noJobAndLevel}]},{span:12,list:[{type:"text",prop:"newClientPosition",label:"客户方岗位",placeholder:"请输入"}]},{span:12,list:[{type:"quotePrice",prop:"newBusinessPrice",offsetBottom:"-17px",width:"63%",unitWidth:"90px",label:"商务报价",afterTxt:"元",placeholder:"请输入",unitOptionList:t.IT_RUIT,unitProp:"newQuotedPriceUnit",tipText:e.rangeTips,blurFn:"bPriceBlur",unitDisabled:!0,isShowBottomTip:e.rangeTips&&e.isShowTextInput}]},{span:12,list:[{type:"select",label:"是否含税",placeholder:"请选择",prop:"newIsHasTax",optionList:[{text:"是",value:"TRUE"},{text:"否",value:"FALSE"}],hidden:!("IT_QTTP_003"===e.contractPriceType||"IT_QTTP_004"===e.contractPriceType),disabled:!e.isShowTextInput}]},{span:12,list:[{type:"number",label:"薪酬倍数",placeholder:"请输入",prop:"newSalaryTimes",precision:2,max:10,hidden:!("IT_QTTP_004"===e.contractPriceType),disabled:!e.isShowTextInput}]},{span:12,list:[{type:"date",prop:"clientEntryTime",label:"入场日期",placeholder:"请输入"}]},{span:12,list:[{type:"select",prop:"newClientEntryName",label:"客户职场名称",placeholder:"请输入",optionList:e.workplaces,disabled:!e.employChangeEndInfoDataData.newClientCompanyId}]},{span:12,list:[{type:"toolTip",prop:"newClientEntryAddress",label:"客户职场地址",placeholder:"请输入",render:function(e,t){var n=t.text;return e("el-tooltip",{props:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:{whiteSpace:"pre-wrap",lineHeight:"25px"}},n),e("el-tooltip",{props:{placement:"top",disabled:!0}},[e("div",{style:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},n)])])}}]},{span:12,list:[{type:"remoteSelectLoading",label:"对应交付",prop:"newJiaoFu",placeholder:"请选择",loading:e.companyDeliverLoading,remoteMethod:"companyDeliverRemote",selectOptionList:e.companyDeliverOptions}]},{span:12,list:[{type:"date",prop:"updateDt",label:"变动生效日期",placeholder:"请输入"}]},{span:12,list:[{type:"text",prop:"changeReason",label:"变动原因",placeholder:"请输入"}]}]},B={newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateDt:[{required:!0,message:"请选择日期",trigger:"change"}],newCompanyJob:[{required:!0,message:"请选择岗位",trigger:"change"}],newOrgId:[{required:!0,message:"请选择部门",trigger:"change"}],newEmployType:[{required:!0,message:"请选择员工类型",trigger:"change"}],newClientCompanyId:[{required:!0,message:"请选择入职客户方",trigger:"change"}],newClientContractId:[{required:!0,message:"请选择客户合同",trigger:"change"}],newClientSaleJob:[{required:!0,message:"请选择结算岗位",trigger:"change"}],newClientSaleLevel:[{required:!0,message:"请选择结算职级",trigger:"change"}],newClientPosition:[{required:!0,message:"请输入客户方岗位",trigger:"blur"}],clientEntryTime:[{required:!0,message:"请选择入场日期",trigger:"change"}],newClientEntryName:[{required:!0,message:"请选择客户职场",trigger:"change"}],newJiaoFu:[{required:!0,message:"请选择交付",trigger:"change"}],changeReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}],newClientTwoLevelId:[{required:!0,message:"请输入客户二级分类",trigger:"change"}],newBusinessPrice:[{required:!0,message:"请输入商务报价",trigger:"blur"},{validator:f["j"],trigger:"blur"}],newIsHasTax:{required:!0,message:"请选择是否含税",trigger:"change"},newSalaryTimes:{required:!0,message:"请输入薪酬倍数",trigger:"blur"}},Q=n("f889"),V=n("35ad"),z={name:"CompanyInfo",components:{zmForm:b["a"],ccPeopleModal:D["a"]},props:{selEmpInfo:{type:Object,require:!0}},data:function(){return{rules:B,isShowDeliverModal:!1,isShowRecruitModal:!1,employChangeEndInfoDataData:{newCompanyJob:[],newCompanyJobLevel:"",newEmployType:"",newClientCompanyId:"",newClientContractId:"",newClientSaleJob:"",newClientSaleLevel:"",newClientPosition:"",clientEntryTime:"",newClientEntryName:"",newClientEntryAddress:"",newJiaoFu:"",updateDt:"",changeReason:"",newBusinessPrice:"",newIsHasTax:"",newSalaryTimes:""},joinClientOptions:[],joinClientLoading:!1,clientConstractList:[],jobs:[],levels:[],workplaces:[],companyDeliverLoading:!1,orgId:"",jobLevelCode:"",ClientTwoLevelList:[],noJobAndLevel:!1,getPriceFlag:!1,isQuoteCity:"",contractPriceType:"",isShowTextInput:!1,rangeTips:"",isNoUvCv:{notGetJobOrUv:""}}},computed:{formConfig:function(){return U(this)},employPidNo:function(){return this.$parent.basicFormData.employPidNo},canGetPrice:function(){return this.clientConstractList.length&&this.employChangeEndInfoDataData.newClientContractId},isCallStationLevelBusinessUv:function(){return console.log("有合同&岗位&职级才查询商务报价",this.employChangeEndInfoDataData.newClientContractId&&this.employChangeEndInfoDataData.newClientSaleJob&&this.employChangeEndInfoDataData.newClientSaleLevel),this.employChangeEndInfoDataData.newClientContractId&&this.getPriceFlag&&this.employChangeEndInfoDataData.newClientSaleJob&&this.employChangeEndInfoDataData.newClientSaleLevel},cityId:function(){return console.log("入职办理城市：",this.selEmpInfo.companyCity),this.selEmpInfo.companyCity},educationId:function(){return this.selEmpInfo.employEdu}},watch:{selEmpInfo:{deep:!0,immediate:!0,handler:function(e){e.employId&&(console.log("调员工类型选择员工切换",e),this.newCompanyJobChange(e.allJobId),this.joinClientRemote(e.allOrgId[e.allOrgId.length-1]),this.employChangeEndInfoDataData={newEmployType:"",newClientCompanyId:"",newClientContractId:"",newClientSaleJob:"",newClientSaleLevel:"",newClientPosition:"",clientEntryTime:"",newClientEntryName:"",newClientEntryAddress:"",newJiaoFu:"",updateDt:"",changeReason:"",newBusinessPrice:"",newCompanyJob:e.allJobId,newCompanyJobLevel:e.companyJobLevel,newIsHasTax:"",newSalaryTimes:""})}},"employChangeEndInfoDataData.companyDeliver":{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,Object(L["c"])(e);case 3:a=n.sent,o=a.userInfo,t.$set(t.employChangeEndInfoDataData,"companyDeliverName","[".concat(o.loginName,"] ").concat(o.userName));case 6:case"end":return n.stop()}}),n)})))()}},"employChangeEndInfoDataData.companyRecruit":{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,Object(L["c"])(e);case 3:a=n.sent,o=a.userInfo,t.$set(t.employChangeEndInfoDataData,"companyRecruitName","[".concat(o.loginName,"] ").concat(o.userName));case 6:case"end":return n.stop()}}),n)})))()}},"employChangeEndInfoDataData.newClientCompanyId":{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("入职客户方改变了：",e),!e){n.next=10;break}return t.clientConstractList=[],t.workplaces=[],t.getClientConstract(),t.getWorkPlaceList(),n.next=8,Object(g["q"])({clientCompanyId:e});case 8:a=n.sent,t.ClientTwoLevelList=a;case 10:t.employChangeEndInfoDataData.newClientContractId&&(t.employChangeEndInfoDataData.newClientContractId=""),t.employChangeEndInfoDataData.newClientEntryName&&(t.employChangeEndInfoDataData.newClientEntryName=""),t.employChangeEndInfoDataData.newClientEntryAddress&&(t.employChangeEndInfoDataData.newClientEntryAddress=""),t.employChangeEndInfoDataData.newClientTwoLevelId&&(t.employChangeEndInfoDataData.newClientTwoLevelId="");case 14:case"end":return n.stop()}}),n)})))()}},"employChangeEndInfoDataData.newClientContractId":{handler:function(e){console.log("选择的合同改变了：",e),this.jobs=[],this.levels=[],e&&this.queryContractPrice(this.employChangeEndInfoDataData.newClientContractId),this.$set(this.employChangeEndInfoDataData,"newClientSaleJob",""),this.$set(this.employChangeEndInfoDataData,"newClientSaleLevel",""),this.$set(this.employChangeEndInfoDataData,"newClientPosition",""),this.employChangeEndInfoDataData.newIsHasTax="",this.employChangeEndInfoDataData.newSalaryTimes=""}},"employChangeEndInfoDataData.newClientEntryName":{handler:function(e){var t=this;console.log("客户职场名称改变：",e),e?this.workplaces.forEach((function(e){e.value===t.employChangeEndInfoDataData.newClientEntryName&&(t.employChangeEndInfoDataData.newClientEntryAddress=e.address)})):this.employChangeEndInfoDataData.newClientEntryAddress=""}},"employChangeEndInfoDataData.newEmployType":{handler:function(e){"IT_EMTY_002"==e&&(this.noJobAndLevel=!0)}},canGetPrice:{handler:function(e){var t=this;if(e){console.log("先调是否按城市报价111111111",this.clientConstractList,this.employChangeEndInfoDataData.newClientContractId);var n=this.clientConstractList.find((function(e){return e.value==t.employChangeEndInfoDataData.newClientContractId})),a=n.contractContentType;if("IT_CTCT_004"===a||"IT_CTCT_005"===a)return void(this.noJobAndLevel=!0);this.getContractPriceResult(this.employChangeEndInfoDataData.newClientContractId),this.queryContractPrice(this.employChangeEndInfoDataData.newClientContractId)}}},isCallStationLevelBusinessUv:{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&(console.log("再查商务报价222222222222"),t.queryBnsPrice());case 1:case"end":return n.stop()}}),n)})))()}}},mounted:function(){},methods:{handleDeliverConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyDeliver=e.value;case 1:case"end":return n.stop()}}),n)})))()},handleRecruitConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyRecruit=e.value;case 1:case"end":return n.stop()}}),n)})))()},deliverFocus:function(){this.isShowDeliverModal=!0},recruitFocus:function(){this.isShowRecruitModal=!0},joinClientRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据："),t.joinClientLoading=!0,n.prev=2,n.next=5,Object(h["p"])({orgId:e});case 5:a=n.sent,console.log("查询所属客户",a),t.joinClientOptions=Array.isArray(a)&&a.map((function(e){return{text:"".concat(e.clientCompanyName),value:e.clientCompanyId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.joinClientLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},getClientConstract:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={companyId:e.employChangeEndInfoDataData.newClientCompanyId,orgId:e.selEmpInfo.allOrgId[e.selEmpInfo.allOrgId.length-1],keyword:""},console.log("请求客户合同数据：",n),t.next=5,Object(h["s"])(n);case 5:a=t.sent,console.log("请求客户合同结果",a),e.clientConstractList=Array.isArray(a)&&a.map((function(e){return{text:"".concat(e.contractName),value:e.contractId}})),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getWorkPlaceList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(g["o"])({clientCompanyId:e.employChangeEndInfoDataData.newClientCompanyId});case 3:n=t.sent,console.log("请求客户职场列表结果：",n),Array.isArray(n)&&(e.workplaces=n.map((function(e){return{text:e.clientCompanyWorkplace.workplaceName,value:e.clientCompanyWorkplace.workplaceId,address:e.clientCompanyWorkplace.address}})),console.log("拿到的职场列表：",e.workplaces)),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},companyDeliverRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.companyDeliverLoading=!0,n.prev=2,n.next=5,Object(m["Z"])({keyword:e,roleType:"交付"});case 5:a=n.sent,console.log("查询用户结果",a),t.companyDeliverOptions=Array.isArray(a)&&a.map((function(e){return{text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName),value:e.userInfo.userId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.companyDeliverLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},selectCompany:function(e){console.log("部门改变了：",e)},newCompanyJobChange:function(e){console.log("选择的岗位手动更改：",e),this.employChangeEndInfoDataData.newCompanyJobLevel&&(console.log("当前是有职级的"),this.employChangeEndInfoDataData.newCompanyJobLevel=""),Array.isArray(e)&&e.length?(this.jobLevelCode=Object(O["b"])(e),console.log("转换之后的code：",this.jobLevelCode)):this.employChangeEndInfoDataData.newCompanyJob=[]},getContractPriceResult:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(V["s"])({contractId:e});case 2:a=n.sent,o=a.isEdu,r=a.isCity,i=a.priceType,l=a.ruleUnit,t.getPriceFlag=!0,t.$set(t.employChangeEndInfoDataData,"newQuotedPriceUnit",l),t.isQuoteByEdu=o,t.isQuoteCity=r,t.contractPriceType=i,null===i?t.$message.warning("请完善合同报价信息"):t.noJobAndLevel="IT_QTTP_003"===i||"IT_QTTP_004"===i;case 13:case"end":return n.stop()}}),n)})))()},queryContractPrice:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(V["r"])({contractId:e});case 2:a=n.sent,a&&a.length?(t.$set(t.employChangeEndInfoDataData,"newQuotedPriceUnit",a[0]&&a[0].ruleUnit),a.forEach((function(e){"IT_DMST_003"===e.value?t.jobs=e.optionList:"IT_DMST_004"===e.value&&(t.levels=e.optionList)}))):t.isShowTextInput=!0;case 4:case"end":return n.stop()}}),n)})))()},queryBnsPrice:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,r,i,l,s,c,p,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("入职办理城市：",e.selEmpInfo.companyCity,e.cityId),n=e.$store.state.baseData.baseDataOptionList.IT_CITY.filter((function(t){return t.value===e.cityId})),a=n[0]&&n[0].text+"市",o=e.$store.state.baseData.baseDataOptionList.IT_EDUX.filter((function(t){return t.value===e.educationId})),r=o[0]&&o[0].text,console.log(r,a,"教育是否都能够匹配"),i={eduCn:e.isQuoteByEdu?r:"",cityCn:e.isQuoteCity?a:"",contractId:e.employChangeEndInfoDataData.newClientContractId,jobCn:e.employChangeEndInfoDataData.newClientSaleJob,jobLevel:e.employChangeEndInfoDataData.newClientSaleLevel},t.next=9,Object(V["g"])(i);case 9:l=t.sent,s=l.priceType,c=l.taxQuotation,p=l.taxQuotationLeft,u=l.taxQuotationRight,"IT_QTTP_001"===s?(e.rangeTips="",c?(e.isNoUvCv.notGetJobOrUv=!1,e.employChangeEndInfoDataData.newBusinessPrice=c,e.getUvCv(),e.isShowTextInput=!1):(e.isShowTextInput=!0,e.isNoUvCv.notGetJobOrUv=!0)):(e.isShowTextInput=!0,e.isNoUvCv.notGetJobOrUv=!0,"IT_QTTP_002"===s?p&&u?(e.taxQuotationLeft=p,e.taxQuotationRight=u,e.rangeTips="区间报价为".concat(p,"--").concat(u,",请填写实际商务报价。")):e.rangeTips="":"IT_QTTP_004"===s&&(e.noJobAndLevel=!0));case 15:case"end":return t.stop()}}),t)})))()},getUvCv:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={cityId:e.cityId,contractId:e.employChangeEndInfoDataData.newClientContractId,customerId:e.employChangeEndInfoDataData.newClientCompanyId,education:!0===e.isQuoteByEdu?e.educationId:void 0,level:e.employChangeEndInfoDataData.newClientSaleLevel,quotedPrice:e.employChangeEndInfoDataData.newBusinessPrice,station:e.employChangeEndInfoDataData.newClientSaleJob},t.next=3,Object(Q["o"])(n);case 3:a=t.sent,o=a.head,r=a.body,"0000"===o.code?(e.isNoUvCv.notGetJobOrUv=!1,e.$set(e.employChangeEndInfoDataData,"uv",r.uvSpeValue),e.$set(e.employChangeEndInfoDataData,"cv",r.cvSpeValue)):(e.isShowTextInput=!0,e.isNoUvCv.notGetJobOrUv=!0);case 7:case"end":return t.stop()}}),t)})))()}}},H=z,G=Object(x["a"])(H,P,M,!1,null,null,null),Y=G.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.employChangeEndInfoDataData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"},on:{deliverFocus:e.deliverFocus,recruitFocus:e.recruitFocus,joinClientRemote:e.joinClientRemote,workAreaChange:e.workAreaChange,workplaceChange:e.workplaceChange,newCompanyJobChange:e.newCompanyJobChange}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowDeliverModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowDeliverModal=t},"update:is-show-cc-modal":function(t){e.isShowDeliverModal=t},handleConfirm:e.handleDeliverConfirm}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowRecruitModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowRecruitModal=t},"update:is-show-cc-modal":function(t){e.isShowRecruitModal=t},handleConfirm:e.handleRecruitConfirm}})],1)},X=[],K=W["a"].state.baseData.baseDataOptionList,ee=function(e){return[{span:12,list:[{type:"addressCascader0518",prop:"newCompanyJob",label:"新岗位",placeholder:"请输入",optionList:e.$store.state.baseData.jobTreeDate,propLabel:"text",propValue:"value",changeFn:"newCompanyJobChange"}]},{span:12,list:[{type:"select",prop:"newCompanyJobLevel",label:"新岗位职级",placeholder:"请选择",optionList:K[e.jobLevelCode]}]},{span:12,list:[{type:"select",prop:"newWorkArea",label:"办公区域",placeholder:"请选择",optionList:K.IT_CITY,changeFn:"workAreaChange"}]},{span:12,list:[{type:"select",prop:"newEmployWorkplaceId",label:"职场名称",placeholder:"请选择",optionList:e.workAreaList,customOption:{customLabel:"officeName",customValue:"employWorkplaceId"},changeFn:"workplaceChange"}]},{span:12,list:[{type:"toolTip",prop:"newCompanyJobDetailAddress",label:"职场地址",placeholder:"请输入",render:function(e,t){var n=t.text;return e("el-tooltip",{props:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:{whiteSpace:"pre-wrap",lineHeight:"25px"}},n),e("el-tooltip",{props:{placement:"top",disabled:!0}},[e("div",{style:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},n)])])}}]},{span:12,list:[{type:"date",prop:"updateDt",label:"变动生效日期",placeholder:"请输入"}]},{span:12,list:[{type:"text",prop:"changeReason",label:"变动原因",placeholder:"请输入"}]}]},te={updateDt:[{required:!0,message:"请选择日期",trigger:"change"}],newCompanyJob:[{required:!0,message:"请选择岗位",trigger:"change"}],newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}],newWorkArea:{required:!0,message:"请选择办公区域",trigger:"change"},newEmployWorkplaceId:{required:!0,message:"请选择办公职场",trigger:"change"},changeReason:{required:!0,message:"请输入变动原因",trigger:"blur"},newCompanyJobDetailAddress:{required:!0,message:"请输入变动原因",trigger:"blur"}},ne=n("f8af"),ae={name:"CompanyInfo",components:{zmForm:b["a"],ccPeopleModal:D["a"]},props:{selEmpInfo:{type:Object,require:!0}},data:function(){return{rules:te,isShowDeliverModal:!1,isShowRecruitModal:!1,employChangeEndInfoDataData:{newCompanyJobLevel:"",newWorkArea:"",newEmployWorkplaceId:"",newCompanyJobDetailAddress:"",updateDt:"",changeReason:"",newCompanyJob:[]},joinClientOptions:[],joinClientLoading:!1,jobLevelCode:"",workAreaList:[]}},computed:{formConfig:function(){return ee(this)},employPidNo:function(){return this.$parent.basicFormData.employPidNo}},watch:{selEmpInfo:{deep:!0,immediate:!0,handler:function(e){console.log("调岗选择员工切换",e),this.employChangeEndInfoDataData={newWorkArea:e.workArea,newEmployWorkplaceId:e.employWorkplaceId,newCompanyJobDetailAddress:e.officeAddress}}},"employChangeEndInfoDataData.newWorkArea":{handler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("调岗选择新的办公区域：",t),!t){e.next=8;break}return e.next=4,Object(ne["f"])({workArea:t});case 4:n=e.sent,this.workAreaList=n,e.next=9;break;case 8:this.clearAddress();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0}},mounted:function(){},methods:{handleDeliverConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyDeliver=e.value;case 1:case"end":return n.stop()}}),n)})))()},handleRecruitConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyRecruit=e.value;case 1:case"end":return n.stop()}}),n)})))()},deliverFocus:function(){this.isShowDeliverModal=!0},recruitFocus:function(){this.isShowRecruitModal=!0},joinClientRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.joinClientLoading=!0,n.prev=2,n.next=5,Object(g["l"])({input:{keyword:e,clientType:"IT_CLTP_001"}});case 5:a=n.sent,console.log("查询所属客户",a),t.joinClientOptions=Array.isArray(a.result)&&a.result.map((function(e){return{text:"".concat(e.clientCompany.clientCompanyName),value:e.clientCompany.clientCompanyId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.joinClientLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},clearAddress:function(){this.employChangeEndInfoDataData.newEmployWorkplaceId="",this.employChangeEndInfoDataData.newCompanyJobDetailAddress=""},workAreaChange:function(){this.clearAddress()},workplaceChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}t.employChangeEndInfoDataData.newCompanyJobDetailAddress="",n.next=8;break;case 4:return n.next=6,Object(ne["i"])({employWorkplaceId:e});case 6:a=n.sent,t.employChangeEndInfoDataData.newCompanyJobDetailAddress=a.officeAddress;case 8:case"end":return n.stop()}}),n)})))()},newCompanyJobChange:function(e){console.log("选择的部门手动更改：",e),this.employChangeEndInfoDataData.newCompanyJobLevel&&(console.log("当前是有职级的"),this.employChangeEndInfoDataData.newCompanyJobLevel=""),Array.isArray(e)&&e.length?(this.jobLevelCode=Object(O["b"])(e),console.log("转换之后的code：",this.jobLevelCode)):this.employChangeEndInfoDataData.newCompanyJob=[]}}},oe=ae,re=Object(x["a"])(oe,Z,X,!1,null,null,null),ie=re.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.employChangeEndInfoDataData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"},on:{deliverFocus:e.deliverFocus,recruitFocus:e.recruitFocus,joinClientRemote:e.joinClientRemote,workAreaChange:e.workAreaChange,workplaceChange:e.workplaceChange,newCompanyJobChange:e.newCompanyJobChange}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowDeliverModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowDeliverModal=t},"update:is-show-cc-modal":function(t){e.isShowDeliverModal=t},handleConfirm:e.handleDeliverConfirm}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowRecruitModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowRecruitModal=t},"update:is-show-cc-modal":function(t){e.isShowRecruitModal=t},handleConfirm:e.handleRecruitConfirm}})],1)},se=[],ce=W["a"].state.baseData.baseDataOptionList,pe=function(e){return[{span:12,list:[{type:"addressCascader0518",prop:"newOrgId",label:"新部门名称",placeholder:"请输入",optionList:e.$store.state.baseData.orgTreeData[0].children,propLabel:"orgName",propValue:"orgId"}]},{span:12,list:[{type:"addressCascader0518",prop:"newCompanyJob",label:"公司岗位",placeholder:"请输入",optionList:e.$store.state.baseData.jobTreeDate,propLabel:"text",propValue:"value",changeFn:"newCompanyJobChange"}]},{span:12,list:[{type:"select",prop:"newCompanyJobLevel",label:"岗位职级",placeholder:"请输入",optionList:ce[e.jobLevelCode]}]},{span:12,list:[{type:"select",prop:"newWorkArea",label:"办公区域",placeholder:"请选择",optionList:ce.IT_CITY,changeFn:"workAreaChange"}]},{span:12,list:[{type:"select",prop:"newEmployWorkplaceId",label:"职场名称",placeholder:"请选择",optionList:e.workAreaList,customOption:{customLabel:"officeName",customValue:"employWorkplaceId"},changeFn:"workplaceChange"}]},{span:12,list:[{type:"toolTip",prop:"newCompanyJobDetailAddress",label:"职场地址",render:function(e,t){var n=t.text;return e("el-tooltip",{props:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:{whiteSpace:"pre-wrap",lineHeight:"25px"}},n),e("el-tooltip",{props:{placement:"top",disabled:!0}},[e("div",{style:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},n)])])}}]},{span:12,list:[{type:"date",prop:"updateDt",label:"变动生效日期",placeholder:"请选择"}]},{span:12,list:[{type:"text",prop:"changeReason",label:"变动原因",placeholder:"请输入"}]}]},ue={newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateDt:[{required:!0,message:"请选择日期",trigger:"change"}],newCompanyJob:[{required:!0,message:"请选择岗位",trigger:"change"}],newOrgId:[{required:!0,message:"请选择部门",trigger:"change"}],newEmployType:[{required:!0,message:"请选择员工类型",trigger:"change"}],clientCompanyId:[{required:!0,message:"请选择入职客户方",trigger:"change"}],clientContractId:[{required:!0,message:"请选择客户合同",trigger:"change"}],clientSaleJob:[{required:!0,message:"请选择结算岗位",trigger:"change"}],clientSaleLevel:[{required:!0,message:"请选择结算职级",trigger:"change"}],clientPosition:[{required:!0,message:"请输入客户方岗位",trigger:"fouce"}],clientEntryTime:[{required:!0,message:"请选择入场日期",trigger:"change"}],clientEntryName:[{required:!0,message:"请选择客户职场",trigger:"change"}],jiaoFu:[{required:!0,message:"请选择交付",trigger:"change"}],changeReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}],newEmployWorkplaceId:{required:!0,message:"请选择客户职场",trigger:"change"},newCompanyJobDetailAddress:{required:!0,message:"请选择客户职场",trigger:"change"},newWorkArea:{required:!0,message:"请选择办公区域",trigger:"change"}},de={name:"CompanyInfo",components:{zmForm:b["a"],ccPeopleModal:D["a"]},props:{selEmpInfo:{type:Object,require:!0}},data:function(){return{rules:ue,isShowDeliverModal:!1,isShowRecruitModal:!1,employChangeEndInfoDataData:{newCompanyJobLevel:"",newWorkArea:"",newEmployWorkplaceId:"",newCompanyJobDetailAddress:"",updateDt:"",changeReason:"",newCompanyJob:[]},joinClientOptions:[],joinClientLoading:!1,jobLevelCode:"",workAreaList:[]}},computed:{formConfig:function(){return pe(this)},employPidNo:function(){return this.$parent.basicFormData.employPidNo}},watch:{selEmpInfo:{deep:!0,immediate:!0,handler:function(e){console.log("调一级部门选择员工切换",e),this.newCompanyJobChange(e.allJobId),this.employChangeEndInfoDataData={newWorkArea:e.workArea,newEmployWorkplaceId:e.employWorkplaceId,newCompanyJobDetailAddress:e.officeAddress,newCompanyJob:e.allJobId,newCompanyJobLevel:e.companyJobLevel}}},"employChangeEndInfoDataData.newWorkArea":{handler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("调岗选择新的办公区域：",t),!t){e.next=8;break}return e.next=4,Object(ne["f"])({workArea:t});case 4:n=e.sent,this.workAreaList=n,e.next=9;break;case 8:this.clearAddress();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0},"employChangeEndInfoDataData.newOrgId":{handler:function(e){console.log("新选择的部门：",e),console.log("员工的原部门",this.selEmpInfo.allOrgId),Array.isArray(e)&&e.length&&this.selEmpInfo.allOrgId.length&&e[0]===this.selEmpInfo.allOrgId[0]&&(this.employChangeEndInfoDataData.newOrgId=[],this.$message.warning("转一级部门需要变动事业部，如果一级部门未变动请选择转二级部门。"))}}},created:function(){},mounted:function(){},methods:{handleDeliverConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyDeliver=e.value;case 1:case"end":return n.stop()}}),n)})))()},handleRecruitConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyRecruit=e.value;case 1:case"end":return n.stop()}}),n)})))()},deliverFocus:function(){this.isShowDeliverModal=!0},recruitFocus:function(){this.isShowRecruitModal=!0},joinClientRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.joinClientLoading=!0,n.prev=2,n.next=5,Object(g["l"])({input:{keyword:e,clientType:"IT_CLTP_001"}});case 5:a=n.sent,console.log("查询所属客户",a),t.joinClientOptions=Array.isArray(a.result)&&a.result.map((function(e){return{text:"".concat(e.clientCompany.clientCompanyName),value:e.clientCompany.clientCompanyId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.joinClientLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},clearAddress:function(){this.employChangeEndInfoDataData.newEmployWorkplaceId="",this.employChangeEndInfoDataData.newCompanyJobDetailAddress=""},workAreaChange:function(){console.log("调一级部门手动更改"),this.clearAddress()},workplaceChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}t.employChangeEndInfoDataData.newCompanyJobDetailAddress="",n.next=8;break;case 4:return n.next=6,Object(ne["i"])({employWorkplaceId:e});case 6:a=n.sent,t.employChangeEndInfoDataData.newCompanyJobDetailAddress=a.officeAddress;case 8:case"end":return n.stop()}}),n)})))()},newCompanyJobChange:function(e){console.log("选择的岗位手动更改：",e),this.employChangeEndInfoDataData.newCompanyJobLevel&&(console.log("当前是有职级的"),this.employChangeEndInfoDataData.newCompanyJobLevel=""),Array.isArray(e)&&e.length?(this.jobLevelCode=Object(O["b"])(e),console.log("转换之后的code：",this.jobLevelCode)):this.employChangeEndInfoDataData.newCompanyJob=[]},newOrgChange:function(e){console.log("新选择的部门：",e),console.log("员工的原部门",this.selEmpInfo.allOrgId)}}},me=de,he=Object(x["a"])(me,le,se,!1,null,null,null),ge=he.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.employChangeEndInfoDataData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"},on:{deliverFocus:e.deliverFocus,recruitFocus:e.recruitFocus,joinClientRemote:e.joinClientRemote}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowDeliverModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowDeliverModal=t},"update:is-show-cc-modal":function(t){e.isShowDeliverModal=t},handleConfirm:e.handleDeliverConfirm}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowRecruitModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowRecruitModal=t},"update:is-show-cc-modal":function(t){e.isShowRecruitModal=t},handleConfirm:e.handleRecruitConfirm}})],1)},ye=[],Ce=W["a"].state.baseData.baseDataOptionList;console.log("岗位职级数据：",Ce);var we=function(e){return[{span:12,list:[{type:"select",prop:"newCompanyJobLevel",label:"新岗位职级",placeholder:"请输入",optionList:e.jobLevelCode&&Ce[e.jobLevelCode]}]},{span:12,list:[{type:"date",prop:"updateDt",label:"变动生效日期",placeholder:"请输入"}]},{span:12,list:[{type:"text",prop:"changeReason",label:"变动原因",placeholder:"请输入"}]}]},be={newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateDt:[{required:!0,message:"请选择部门",trigger:"change"}],changeReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}]},ve={name:"CompanyInfo",components:{zmForm:b["a"],ccPeopleModal:D["a"]},props:{selEmpInfo:{type:Object,require:!0}},data:function(){return{rules:be,isShowDeliverModal:!1,isShowRecruitModal:!1,employChangeEndInfoDataData:{newCompanyJobLevel:"",updateDt:"",changeReason:""},joinClientOptions:[],joinClientLoading:!1,jobLevelCode:""}},computed:{formConfig:function(){return we(this)},employPidNo:function(){return this.$parent.basicFormData.employPidNo}},watch:{selEmpInfo:{deep:!0,immediate:!0,handler:function(e){console.log("调级选择员工切换",e),this.employChangeEndInfoDataData={};var t=e.allJobId;this.jobLevelCode=Object(O["b"])(t)}}},created:function(){},mounted:function(){},methods:{handleDeliverConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyDeliver=e.value;case 1:case"end":return n.stop()}}),n)})))()},handleRecruitConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyRecruit=e.value;case 1:case"end":return n.stop()}}),n)})))()},deliverFocus:function(){this.isShowDeliverModal=!0},recruitFocus:function(){this.isShowRecruitModal=!0},joinClientRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.joinClientLoading=!0,n.prev=2,n.next=5,Object(g["l"])({input:{keyword:e,clientType:"IT_CLTP_001"}});case 5:a=n.sent,console.log("查询所属客户",a),t.joinClientOptions=Array.isArray(a.result)&&a.result.map((function(e){return{text:"".concat(e.clientCompany.clientCompanyName),value:e.clientCompany.clientCompanyId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.joinClientLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()}}},Ie=ve,De=Object(x["a"])(Ie,fe,ye,!1,null,null,null),Le=De.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.employChangeEndInfoDataData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"},on:{deliverFocus:e.deliverFocus,recruitFocus:e.recruitFocus,joinClientRemote:e.joinClientRemote,workAreaChange:e.workAreaChange,workplaceChange:e.workplaceChange,newCompanyJobChange:e.newCompanyJobChange}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowDeliverModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowDeliverModal=t},"update:is-show-cc-modal":function(t){e.isShowDeliverModal=t},handleConfirm:e.handleDeliverConfirm}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowRecruitModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowRecruitModal=t},"update:is-show-cc-modal":function(t){e.isShowRecruitModal=t},handleConfirm:e.handleRecruitConfirm}})],1)},Ee=[],Te=W["a"].state.baseData.baseDataOptionList,xe=function(e){return[{span:12,list:[{type:"addressCascader0518",prop:"newOrgId",label:"新部门名称",placeholder:"请输入",optionList:e.$store.state.baseData.orgTreeData[0].children,propLabel:"orgName",propValue:"orgId"}]},{span:12,list:[{type:"addressCascader0518",prop:"newCompanyJob",label:"公司岗位",placeholder:"请输入",optionList:e.$store.state.baseData.jobTreeDate,propLabel:"text",propValue:"value",changeFn:"newCompanyJobChange"}]},{span:12,list:[{type:"select",prop:"newCompanyJobLevel",label:"岗位职级",placeholder:"请输入",optionList:Te[e.jobLevelCode]}]},{span:12,list:[{type:"select",prop:"newWorkArea",label:"办公区域",placeholder:"请选择",optionList:Te.IT_CITY,changeFn:"workAreaChange"}]},{span:12,list:[{type:"select",prop:"newEmployWorkplaceId",label:"职场名称",placeholder:"请选择",optionList:e.workAreaList,customOption:{customLabel:"officeName",customValue:"employWorkplaceId"},changeFn:"workplaceChange"}]},{span:12,list:[{type:"toolTip",prop:"newCompanyJobDetailAddress",label:"职场地址",render:function(e,t){var n=t.text;return e("el-tooltip",{props:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:{whiteSpace:"pre-wrap",lineHeight:"25px"}},n),e("el-tooltip",{props:{placement:"top",disabled:!0}},[e("div",{style:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},n)])])}}]},{span:12,list:[{type:"date",prop:"updateDt",label:"变动生效日期",placeholder:"请选择"}]},{span:12,list:[{type:"text",prop:"changeReason",label:"变动原因",placeholder:"请输入"}]}]},je={newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateDt:[{required:!0,message:"请选择日期",trigger:"change"}],newCompanyJob:[{required:!0,message:"请选择岗位",trigger:"change"}],newOrgId:[{required:!0,message:"请选择部门",trigger:"change"}],newEmployType:[{required:!0,message:"请选择员工类型",trigger:"change"}],clientCompanyId:[{required:!0,message:"请选择入职客户方",trigger:"change"}],clientContractId:[{required:!0,message:"请选择客户合同",trigger:"change"}],clientSaleJob:[{required:!0,message:"请选择结算岗位",trigger:"change"}],clientSaleLevel:[{required:!0,message:"请选择结算职级",trigger:"change"}],clientPosition:[{required:!0,message:"请输入客户方岗位",trigger:"fouce"}],clientEntryTime:[{required:!0,message:"请选择入场日期",trigger:"change"}],clientEntryName:[{required:!0,message:"请选择客户职场",trigger:"change"}],jiaoFu:[{required:!0,message:"请选择交付",trigger:"change"}],changeReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}],newEmployWorkplaceId:{required:!0,message:"请选择客户职场",trigger:"change"},newCompanyJobDetailAddress:{required:!0,message:"请选择客户职场",trigger:"change"},newWorkArea:{required:!0,message:"请选择办公区域",trigger:"change"}},ke={name:"secDep",components:{zmForm:b["a"],ccPeopleModal:D["a"]},props:{selEmpInfo:{type:Object,require:!0}},data:function(){return{rules:je,isShowDeliverModal:!1,isShowRecruitModal:!1,employChangeEndInfoDataData:{newCompanyJobLevel:"",newWorkArea:"",newEmployWorkplaceId:"",newCompanyJobDetailAddress:"",updateDt:"",changeReason:"",newCompanyJob:[]},joinClientOptions:[],joinClientLoading:!1,jobLevelCode:"",workAreaList:[]}},computed:{formConfig:function(){return xe(this)},employPidNo:function(){return this.$parent.basicFormData.employPidNo}},watch:{selEmpInfo:{deep:!0,immediate:!0,handler:function(e){console.log("调二级部门选择员工切换",e),this.newCompanyJobChange(e.allJobId),this.employChangeEndInfoDataData={newWorkArea:e.workArea,newEmployWorkplaceId:e.employWorkplaceId,newCompanyJobDetailAddress:e.officeAddress,newCompanyJob:e.allJobId,newCompanyJobLevel:e.companyJobLevel}}},"employChangeEndInfoDataData.newWorkArea":{handler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("调岗选择新的办公区域：",t),!t){e.next=8;break}return e.next=4,Object(ne["f"])({workArea:t});case 4:n=e.sent,this.workAreaList=n,e.next=9;break;case 8:this.clearAddress();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0},"employChangeEndInfoDataData.newOrgId":{handler:function(e){console.log("新选择的部门：",e),console.log("员工的原部门",this.selEmpInfo.allOrgId),console.log("判断条件：",e[0]!==this.selEmpInfo.allOrgId[0]||e[e.length-1]===this.selEmpInfo.allOrgId[e.length-1]),Array.isArray(e)&&e.length&&this.selEmpInfo.allOrgId.length&&(e[0]!==this.selEmpInfo.allOrgId[0]||e[e.length-1]===this.selEmpInfo.allOrgId[e.length-1])&&(this.employChangeEndInfoDataData.newOrgId=[],this.$message.warning("如果转一级部门，请选择转一级部门的类型，此类型仅限于转同一事业部下面的二级部门。"))}}},created:function(){},mounted:function(){},methods:{handleDeliverConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyDeliver=e.value;case 1:case"end":return n.stop()}}),n)})))()},handleRecruitConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyRecruit=e.value;case 1:case"end":return n.stop()}}),n)})))()},deliverFocus:function(){this.isShowDeliverModal=!0},recruitFocus:function(){this.isShowRecruitModal=!0},joinClientRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.joinClientLoading=!0,n.prev=2,n.next=5,Object(g["l"])({input:{keyword:e,clientType:"IT_CLTP_001"}});case 5:a=n.sent,console.log("查询所属客户",a),t.joinClientOptions=Array.isArray(a.result)&&a.result.map((function(e){return{text:"".concat(e.clientCompany.clientCompanyName),value:e.clientCompany.clientCompanyId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.joinClientLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},clearAddress:function(){this.employChangeEndInfoDataData.newEmployWorkplaceId="",this.employChangeEndInfoDataData.newCompanyJobDetailAddress=""},workAreaChange:function(){console.log("调一级部门手动更改"),this.clearAddress()},workplaceChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}t.employChangeEndInfoDataData.newCompanyJobDetailAddress="",n.next=8;break;case 4:return n.next=6,Object(ne["i"])({employWorkplaceId:e});case 6:a=n.sent,t.employChangeEndInfoDataData.newCompanyJobDetailAddress=a.officeAddress;case 8:case"end":return n.stop()}}),n)})))()},newCompanyJobChange:function(e){console.log("选择的岗位手动更改：",e),this.employChangeEndInfoDataData.newCompanyJobLevel&&(console.log("当前是有职级的"),this.employChangeEndInfoDataData.newCompanyJobLevel=""),Array.isArray(e)&&e.length?(this.jobLevelCode=Object(O["b"])(e),console.log("转换之后的code：",this.jobLevelCode)):this.employChangeEndInfoDataData.newCompanyJob=[]},newOrgChange:function(e){console.log("新选择的部门：",e),console.log("员工的原部门",this.selEmpInfo.allOrgId)}}},Se=ke,Re=Object(x["a"])(Se,Oe,Ee,!1,null,null,null),Je=Re.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.employChangeEndInfoDataData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"},on:{deliverFocus:e.deliverFocus,recruitFocus:e.recruitFocus,companyDeliverRemote:e.companyDeliverRemote,selectCompany:e.selectCompany,newCompanyJobChange:e.newCompanyJobChange}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowDeliverModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowDeliverModal=t},"update:is-show-cc-modal":function(t){e.isShowDeliverModal=t},handleConfirm:e.handleDeliverConfirm}}),n("cc-people-modal",{attrs:{isShowCcModal:e.isShowRecruitModal,isQueryUser:!0,appendToBody:!0},on:{"update:isShowCcModal":function(t){e.isShowRecruitModal=t},"update:is-show-cc-modal":function(t){e.isShowRecruitModal=t},handleConfirm:e.handleRecruitConfirm}})],1)},qe=[],_e=W["a"].state.baseData.baseDataOptionList,Fe=function(e){var t=e.$store.state.baseData.baseDataOptionList;return[{span:12,list:[{type:"addressCascader0518",prop:"newOrgId",label:"新部门名称",placeholder:"请输入",optionList:e.$store.state.baseData.orgTreeData[0].children,propLabel:"orgName",propValue:"orgId"}]},{span:12,list:[{type:"addressCascader0518",prop:"newCompanyJob",label:"公司岗位",placeholder:"请输入",optionList:e.$store.state.baseData.jobTreeDate,propLabel:"text",propValue:"value",changeFn:"newCompanyJobChange"}]},{span:12,list:[Object(N["a"])({type:"select",prop:"newCompanyJobLevel",label:"岗位职级",placeholder:"请输入",optionList:e.levelOptionsList},"optionList",_e[e.jobLevelCode])]},{span:12,list:[{type:"select",prop:"newEmployType",label:"员工类型",placeholder:"请输入",optionList:e.$store.state.baseData.baseDataOptionList.IT_EMTY.filter((function(e){if("二线员工"!==e.text)return e}))}]},{span:12,list:[{type:"select",prop:"newClientCompanyId",label:"所属客户",placeholder:"请选择",optionList:e.joinClientOptions}]},{span:12,list:[{type:"select",prop:"newClientTwoLevelId",label:"客户分类",placeholder:"请选择",filterable:!0,optionList:e.ClientTwoLevelList,customOption:{customLabel:"clientTwoLevelName",customValue:"clientTwoLevelId"},hidden:e.ClientTwoLevelList.length<1}]},{span:12,list:[{type:"select",prop:"newClientContractId",label:"所属客户合同",placeholder:"请输入",optionList:e.clientConstractList}]},{span:12,list:[{type:"select",prop:"newClientSaleJob",label:"结算岗位",placeholder:"请选择",optionList:e.jobs,hidden:e.noJobAndLevel}]},{span:12,list:[{type:"text",prop:"newClientSaleJob",label:"结算岗位",placeholder:"请输入",optionList:e.jobs,hidden:!e.noJobAndLevel}]},{span:12,list:[{type:"select",prop:"newClientSaleLevel",label:"结算职级",placeholder:"请输入",optionList:e.levels,hidden:e.noJobAndLevel}]},{span:12,list:[{type:"text",prop:"newClientSaleLevel",label:"结算职级",placeholder:"请输入",optionList:e.levels,hidden:!e.noJobAndLevel}]},{span:12,list:[{type:"text",prop:"newClientPosition",label:"客户方岗位",placeholder:"请输入"}]},{span:12,list:[{type:"quotePrice",prop:"newBusinessPrice",offsetBottom:"-17px",width:"63%",unitWidth:"90px",label:"商务报价",afterTxt:"元",placeholder:"请输入",unitOptionList:t.IT_RUIT,unitProp:"newQuotedPriceUnit",unitDisabled:!0,tipText:e.rangeTips,blurFn:"bPriceBlur",isShowBottomTip:e.rangeTips&&e.isShowTextInput}]},{span:12,list:[{type:"select",label:"是否含税",placeholder:"请选择",prop:"newIsHasTax",optionList:[{text:"是",value:"TRUE"},{text:"否",value:"FALSE"}],hidden:!("IT_QTTP_003"===e.contractPriceType||"IT_QTTP_004"===e.contractPriceType),disabled:!e.isShowTextInput}]},{span:12,list:[{type:"number",label:"薪酬倍数",placeholder:"请输入",prop:"newSalaryTimes",precision:2,max:10,hidden:!("IT_QTTP_004"===e.contractPriceType),disabled:!e.isShowTextInput}]},{span:12,list:[{type:"date",prop:"clientEntryTime",label:"入场日期",placeholder:"请输入"}]},{span:12,list:[{type:"select",prop:"newClientEntryName",label:"客户职场名称",placeholder:"请输入",optionList:e.workplaces,disabled:!e.employChangeEndInfoDataData.newClientCompanyId}]},{span:12,list:[{type:"toolTip",prop:"newClientEntryAddress",label:"客户职场地址",placeholder:"请输入",render:function(e,t){var n=t.text;return e("el-tooltip",{props:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:{whiteSpace:"pre-wrap",lineHeight:"25px"}},n),e("el-tooltip",{props:{placement:"top",disabled:!0}},[e("div",{style:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},n)])])}}]},{span:12,list:[{type:"remoteSelectLoading",label:"对应交付",prop:"newJiaoFu",placeholder:"请选择",loading:e.companyDeliverLoading,remoteMethod:"companyDeliverRemote",selectOptionList:e.companyDeliverOptions}]},{span:12,list:[{type:"date",prop:"updateDt",label:"变动生效日期",placeholder:"请输入"}]},{span:12,list:[{type:"text",prop:"changeReason",label:"变动原因",placeholder:"请输入"}]}]},Pe={newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateDt:[{required:!0,message:"请选择日期",trigger:"change"}],newCompanyJob:[{required:!0,message:"请选择岗位",trigger:"change"}],newOrgId:[{required:!0,message:"请选择部门",trigger:"change"}],newEmployType:[{required:!0,message:"请选择员工类型",trigger:"change"}],newClientCompanyId:[{required:!0,message:"请选择入职客户方",trigger:"change"}],newClientContractId:[{required:!0,message:"请选择客户合同",trigger:"change"}],newClientSaleJob:[{required:!0,message:"请选择结算岗位",trigger:"change"}],newClientSaleLevel:[{required:!0,message:"请选择结算职级",trigger:"change"}],newClientPosition:[{required:!0,message:"请输入客户方岗位",trigger:"blur"}],clientEntryTime:[{required:!0,message:"请选择入场日期",trigger:"change"}],newClientEntryName:[{required:!0,message:"请选择客户职场",trigger:"change"}],newJiaoFu:[{required:!0,message:"请选择交付",trigger:"change"}],changeReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}],newClientTwoLevelId:[{required:!0,message:"请输入客户二级分类",trigger:"change"}],newBusinessPrice:[{required:!0,message:"请输入商务报价",trigger:"blur"},{validator:f["j"],trigger:"blur"}],newIsHasTax:{required:!0,message:"请选择是否含税",trigger:"change"},newSalaryTimes:{required:!0,message:"请输入薪酬倍数",trigger:"blur"},ewOrgId:[{required:!0,message:"请选择部门",trigger:"change"}]},Me={name:"CompanyInfo",components:{zmForm:b["a"],ccPeopleModal:D["a"]},props:{selEmpInfo:{type:Object,require:!0}},data:function(){return{rules:Pe,isShowDeliverModal:!1,isShowRecruitModal:!1,employChangeEndInfoDataData:{newCompanyJob:[],newCompanyJobLevel:"",newEmployType:"",newClientCompanyId:"",newClientContractId:"",newClientSaleJob:"",newClientSaleLevel:"",newClientPosition:"",clientEntryTime:"",newClientEntryName:"",newClientEntryAddress:"",newJiaoFu:"",updateDt:"",changeReason:"",newBusinessPrice:"",newIsHasTax:"",newSalaryTimes:"",newClientTwoLevelId:"",newQuotedPriceUnit:"",isQuoteByEdu:"",isQuoteCity:"",newOrgId:[]},joinClientOptions:[],joinClientLoading:!1,clientConstractList:[],jobs:[],levels:[],workplaces:[],companyDeliverLoading:!1,orgId:"",jobLevelCode:"",ClientTwoLevelList:[],noJobAndLevel:!1,getPriceFlag:!1,isQuoteCity:"",contractPriceType:"",isShowTextInput:!1,rangeTips:"",isNoUvCv:{notGetJobOrUv:""}}},computed:{formConfig:function(){return Fe(this)},employPidNo:function(){return this.$parent.basicFormData.employPidNo},canGetPrice:function(){return this.clientConstractList.length&&this.employChangeEndInfoDataData.newClientContractId},isCallStationLevelBusinessUv:function(){return console.log("有合同&岗位&职级才查询商务报价",this.employChangeEndInfoDataData.newClientContractId&&this.employChangeEndInfoDataData.newClientSaleJob&&this.employChangeEndInfoDataData.newClientSaleLevel),this.employChangeEndInfoDataData.newClientContractId&&this.getPriceFlag&&this.employChangeEndInfoDataData.newClientSaleJob&&this.employChangeEndInfoDataData.newClientSaleLevel},cityId:function(){return this.selEmpInfo.companyCity},educationId:function(){return this.selEmpInfo.employEdu}},watch:{selEmpInfo:{deep:!0,immediate:!0,handler:function(e){e.employId&&(console.log("调员工类型选择员工切换",e),this.newCompanyJobChange(e.allJobId),this.employChangeEndInfoDataData={newEmployType:"",newClientCompanyId:"",newClientContractId:"",newClientSaleJob:"",newClientSaleLevel:"",newClientPosition:"",clientEntryTime:"",newClientEntryName:"",newClientEntryAddress:"",newJiaoFu:"",updateDt:"",changeReason:"",newBusinessPrice:"",newCompanyJob:e.allJobId,newCompanyJobLevel:e.companyJobLevel,newIsHasTax:"",newSalaryTimes:"",newClientTwoLevelId:"",isQuoteByEdu:"",isQuoteCity:"",newOrgId:[]})}},"employChangeEndInfoDataData.companyDeliver":{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,Object(L["c"])(e);case 3:a=n.sent,o=a.userInfo,t.$set(t.employChangeEndInfoDataData,"companyDeliverName","[".concat(o.loginName,"] ").concat(o.userName));case 6:case"end":return n.stop()}}),n)})))()}},"employChangeEndInfoDataData.companyRecruit":{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,Object(L["c"])(e);case 3:a=n.sent,o=a.userInfo,t.$set(t.employChangeEndInfoDataData,"companyRecruitName","[".concat(o.loginName,"] ").concat(o.userName));case 6:case"end":return n.stop()}}),n)})))()}},"employChangeEndInfoDataData.newClientCompanyId":{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("入职客户方改变了：",e),!e){n.next=10;break}return t.clientConstractList=[],t.workplaces=[],t.getClientConstract(),t.getWorkPlaceList(),n.next=8,Object(g["q"])({clientCompanyId:e});case 8:a=n.sent,t.ClientTwoLevelList=a;case 10:t.employChangeEndInfoDataData.newClientContractId&&(t.employChangeEndInfoDataData.newClientContractId=""),t.employChangeEndInfoDataData.newClientEntryName&&(t.employChangeEndInfoDataData.newClientEntryName=""),t.employChangeEndInfoDataData.newClientEntryAddress&&(t.employChangeEndInfoDataData.newClientEntryAddress=""),t.employChangeEndInfoDataData.newClientTwoLevelId&&(t.employChangeEndInfoDataData.newClientTwoLevelId=""),console.log("客户合同改变函数结束执行");case 15:case"end":return n.stop()}}),n)})))()}},"employChangeEndInfoDataData.newClientContractId":{handler:function(e){console.log("选择的合同改变了：",e),this.jobs=[],this.levels=[],e&&this.queryContractPrice(this.employChangeEndInfoDataData.newClientContractId),this.employChangeEndInfoDataData.newClientSaleJob="",this.employChangeEndInfoDataData.newClientSaleLevel="",this.employChangeEndInfoDataData.newClientPosition="",this.employChangeEndInfoDataData.newIsHasTax="",this.employChangeEndInfoDataData.newSalaryTimes=""}},"employChangeEndInfoDataData.newClientEntryName":{handler:function(e){var t=this;console.log("客户职场名称改变：",e),e?this.workplaces.forEach((function(e){e.value===t.employChangeEndInfoDataData.newClientEntryName&&(t.employChangeEndInfoDataData.newClientEntryAddress=e.address)})):this.employChangeEndInfoDataData.newClientEntryAddress=""}},"employChangeEndInfoDataData.newEmployType":{handler:function(e){"IT_EMTY_002"==e&&(this.noJobAndLevel=!0)}},canGetPrice:{handler:function(e){var t=this;if(e){console.log("先调是否按城市报价111111111",this.clientConstractList,this.employChangeEndInfoDataData.newClientContractId);var n=this.clientConstractList.find((function(e){return e.value==t.employChangeEndInfoDataData.newClientContractId})),a=n.contractContentType;if("IT_CTCT_004"===a||"IT_CTCT_005"===a)return void(this.noJobAndLevel=!0);this.getContractPriceResult(this.employChangeEndInfoDataData.newClientContractId),this.queryContractPrice(this.employChangeEndInfoDataData.newClientContractId)}}},isCallStationLevelBusinessUv:{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&(console.log("再查商务报价222222222222"),t.queryBnsPrice());case 1:case"end":return n.stop()}}),n)})))()}},"employChangeEndInfoDataData.newOrgId":{handler:function(e){console.log("新选择的部门：",e),console.log("员工的原部门",this.selEmpInfo.allOrgId),console.log("判断条件：",e[0]!==this.selEmpInfo.allOrgId[0]||e[e.length-1]===this.selEmpInfo.allOrgId[e.length-1]),Array.isArray(e)&&e.length&&this.selEmpInfo.allOrgId.length&&(e[0]!==this.selEmpInfo.allOrgId[0]||e[e.length-1]===this.selEmpInfo.allOrgId[e.length-1])?(this.employChangeEndInfoDataData.newOrgId=[],this.$message.warning("如果转一级部门，请选择转一级部门的类型，此类型仅限于转同一事业部下面的二级部门。")):this.joinClientRemote(e[e.length-1]),this.employChangeEndInfoDataData.newClientCompanyId&&(this.employChangeEndInfoDataData.newClientCompanyId="")}}},mounted:function(){},methods:{handleDeliverConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyDeliver=e.value;case 1:case"end":return n.stop()}}),n)})))()},handleRecruitConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.employChangeEndInfoDataData.companyRecruit=e.value;case 1:case"end":return n.stop()}}),n)})))()},deliverFocus:function(){this.isShowDeliverModal=!0},recruitFocus:function(){this.isShowRecruitModal=!0},joinClientRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.joinClientLoading=!0,n.prev=2,n.next=5,Object(h["p"])({orgId:e});case 5:a=n.sent,console.log("查询所属客户",a),t.joinClientOptions=Array.isArray(a)&&a.map((function(e){return{text:"".concat(e.clientCompanyName),value:e.clientCompanyId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.joinClientLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},getClientConstract:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={companyId:e.employChangeEndInfoDataData.newClientCompanyId,orgId:e.employChangeEndInfoDataData.newOrgId[e.employChangeEndInfoDataData.newOrgId.length-1],keyword:""},console.log("请求客户合同数据：",n),t.next=5,Object(h["s"])(n);case 5:a=t.sent,console.log("请求客户合同结果",a),e.clientConstractList=Array.isArray(a)&&a.map((function(e){return{text:"".concat(e.contractName),value:e.contractId}})),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getWorkPlaceList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(g["o"])({clientCompanyId:e.employChangeEndInfoDataData.newClientCompanyId});case 3:n=t.sent,console.log("请求客户职场列表结果：",n),Array.isArray(n)&&(e.workplaces=n.map((function(e){return{text:e.clientCompanyWorkplace.workplaceName,value:e.clientCompanyWorkplace.workplaceId,address:e.clientCompanyWorkplace.address}})),console.log("拿到的职场列表：",e.workplaces)),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},companyDeliverRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.companyDeliverLoading=!0,n.prev=2,n.next=5,Object(m["Z"])({keyword:e,roleType:"交付"});case 5:a=n.sent,console.log("查询用户结果",a),t.companyDeliverOptions=Array.isArray(a)&&a.map((function(e){return{text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName),value:e.userInfo.userId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.companyDeliverLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},selectCompany:function(e){console.log("部门改变了：",e)},newCompanyJobChange:function(e){console.log("选择的岗位手动更改：",e),this.employChangeEndInfoDataData.newCompanyJobLevel&&(console.log("当前是有职级的"),this.employChangeEndInfoDataData.newCompanyJobLevel=""),Array.isArray(e)&&e.length?(this.jobLevelCode=Object(O["b"])(e),console.log("转换之后的code：",this.jobLevelCode)):this.employChangeEndInfoDataData.newCompanyJob=[]},getContractPriceResult:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(V["s"])({contractId:e});case 2:a=n.sent,o=a.isEdu,r=a.isCity,i=a.priceType,l=a.ruleUnit,t.getPriceFlag=!0,t.employChangeEndInfoDataData.newQuotedPriceUnit=l,t.isQuoteByEdu=o,t.isQuoteCity=r,t.contractPriceType=i,null===i?t.$message.warning("请完善合同报价信息"):t.noJobAndLevel="IT_QTTP_003"===i||"IT_QTTP_004"===i;case 13:case"end":return n.stop()}}),n)})))()},queryContractPrice:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(V["r"])({contractId:e});case 2:a=n.sent,a&&a.length?(t.employChangeEndInfoDataData.newQuotedPriceUnit=a[0]&&a[0].ruleUnit,a.forEach((function(e){"IT_DMST_003"===e.value?t.jobs=e.optionList:"IT_DMST_004"===e.value&&(t.levels=e.optionList)}))):t.isShowTextInput=!0;case 4:case"end":return n.stop()}}),n)})))()},queryBnsPrice:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,r,i,l,s,c,p,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$store.state.baseData.baseDataOptionList.IT_CITY.filter((function(t){return t.value===e.cityId})),a=n[0]&&n[0].text+"市",o=e.$store.state.baseData.baseDataOptionList.IT_EDUX.filter((function(t){return t.value===e.educationId})),r=o[0]&&o[0].text,console.log(r,a,"教育是否都能够匹配"),i={eduCn:e.isQuoteByEdu?r:"",cityCn:e.isQuoteCity?a:"",contractId:e.employChangeEndInfoDataData.newClientContractId,jobCn:e.employChangeEndInfoDataData.newClientSaleJob,jobLevel:e.employChangeEndInfoDataData.newClientSaleLevel},t.next=8,Object(V["g"])(i);case 8:l=t.sent,s=l.priceType,c=l.taxQuotation,p=l.taxQuotationLeft,u=l.taxQuotationRight,"IT_QTTP_001"===s?(e.rangeTips="",c?(e.isNoUvCv.notGetJobOrUv=!1,e.employChangeEndInfoDataData.newBusinessPrice=c,e.getUvCv(),e.isShowTextInput=!1):(e.isShowTextInput=!0,e.isNoUvCv.notGetJobOrUv=!0)):(e.isShowTextInput=!0,e.isNoUvCv.notGetJobOrUv=!0,"IT_QTTP_002"===s?p&&u?(e.taxQuotationLeft=p,e.taxQuotationRight=u,e.rangeTips="区间报价为".concat(p,"--").concat(u,",请填写实际商务报价。")):e.rangeTips="":"IT_QTTP_004"===s&&(e.noJobAndLevel=!0));case 14:case"end":return t.stop()}}),t)})))()},getUvCv:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={cityId:e.cityId,contractId:e.employChangeEndInfoDataData.newClientContractId,customerId:e.employChangeEndInfoDataData.newClientCompanyId,education:!0===e.isQuoteByEdu?e.educationId:void 0,level:e.employChangeEndInfoDataData.newClientSaleLevel,quotedPrice:e.employChangeEndInfoDataData.newBusinessPrice,station:e.employChangeEndInfoDataData.newClientSaleJob},t.next=3,Object(Q["o"])(n);case 3:a=t.sent,o=a.head,r=a.body,"0000"===o.code?(e.isNoUvCv.notGetJobOrUv=!1,e.$set(e.employChangeEndInfoDataData,"uv",r.uvSpeValue),e.$set(e.employChangeEndInfoDataData,"cv",r.cvSpeValue)):(e.isShowTextInput=!0,e.isNoUvCv.notGetJobOrUv=!0);case 7:case"end":return t.stop()}}),t)})))()}}},Ne=Me,We=Object(x["a"])(Ne,Ae,qe,!1,null,null,null),$e=We.exports,Ue=n("8285"),Be=n("6967"),Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.detailData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"}})],1)},Ve=[],ze=(W["a"].state.baseData.baseDataOptionList,function(e){return[{span:12,list:[{type:"readOnly",prop:"newCompanyJob",label:"新岗位"}]},{span:12,list:[{type:"readOnly",prop:"newCompanyJobLevel",label:"新岗位职级"}]},{span:12,list:[{type:"readOnly",prop:"newWorkArea",label:"办公区域"}]},{span:12,list:[{type:"readOnly",prop:"newOfficeName",label:"职场名称"}]},{span:12,list:[{type:"toolTip",prop:"newOfficeAddress",label:"职场地址",render:function(e,t){var n=t.text;return e("el-tooltip",{props:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:{whiteSpace:"pre-wrap",lineHeight:"25px"}},n),e("el-tooltip",{props:{placement:"top",disabled:!0}},[e("div",{style:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},n)])])}}]},{span:12,list:[{type:"readOnly",prop:"updateDt",label:"变动生效日期",placeholder:"请输入"}]},{span:12,list:[{type:"readOnly",prop:"changeReason",label:"变动原因",placeholder:"请输入"}]}]}),He={updateDt:[{required:!0,message:"请选择日期",trigger:"change"}],newCompanyJob:[{required:!0,message:"请选择岗位",trigger:"change"}],newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}],newWorkArea:{required:!0,message:"请选择办公区域",trigger:"change"},newOfficeName:{required:!0,message:"请选择办公职场",trigger:"change"},changeReason:{required:!0,message:"请输入变动原因",trigger:"blur"},newOfficeAddress:{required:!0,message:"请输入变动原因",trigger:"blur"}},Ge={name:"CompanyInfo",components:{zmForm:b["a"]},props:{detailData:{type:Object,require:!0}},computed:{formConfig:function(){return ze(this)}},data:function(){return{rules:He}}},Ye=Ge,Ze=Object(x["a"])(Ye,Qe,Ve,!1,null,null,null),Xe=Ze.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.detailData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"}})],1)},et=[],tt=W["a"].state.baseData.baseDataOptionList;console.log("岗位职级数据：",tt);var nt=function(e){return[{span:12,list:[{type:"readOnly",prop:"newCompanyJobLevel",label:"新岗位职级"}]},{span:12,list:[{type:"readOnly",prop:"updateDt",label:"变动生效日期"}]},{span:12,list:[{type:"readOnly",prop:"changeReason",label:"变动原因"}]}]},at={newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateDt:[{required:!0,message:"请选择部门",trigger:"change"}],changeReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}]},ot={name:"CompanyInfo",components:{zmForm:b["a"]},props:{detailData:{type:Object,require:!0}},computed:{formConfig:function(){return nt(this)}},data:function(){return{rules:at}}},rt=ot,it=Object(x["a"])(rt,Ke,et,!1,null,null,null),lt=it.exports,st=n("596c"),ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("zm-form",{ref:"employChangeEndInfoData",attrs:{formData:e.detailData,formConfig:e.formConfig,rules:e.rules,labelWidth:"140px"}})],1)},pt=[],ut=(W["a"].state.baseData.baseDataOptionList,function(e){return[{span:12,list:[{type:"readOnly",prop:"newOrgId",label:"新部门名称"}]},{span:12,list:[{type:"readOnly",prop:"newCompanyJob",label:"新岗位"}]},{span:12,list:[{type:"readOnly",prop:"newCompanyJobLevel",label:"新岗位职级"}]},{span:12,list:[{type:"readOnly",prop:"newWorkArea",label:"办公区域"}]},{span:12,list:[{type:"readOnly",prop:"newOfficeName",label:"职场名称"}]},{span:12,list:[{type:"toolTip",prop:"newOfficeAddress",label:"职场地址",render:function(e,t){var n=t.text;return e("el-tooltip",{props:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:{whiteSpace:"pre-wrap",lineHeight:"25px"}},n),e("el-tooltip",{props:{placement:"top",disabled:!0}},[e("div",{style:{width:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},n)])])}}]},{span:12,list:[{type:"readOnly",prop:"updateDt",label:"变动生效日期"}]},{span:12,list:[{type:"readOnly",prop:"changeReason",label:"变动原因"}]}]}),dt={newCompanyJobLevel:[{required:!0,message:"请选择职级",trigger:"change"}],updateDt:[{required:!0,message:"请选择日期",trigger:"change"}],newCompanyJob:[{required:!0,message:"请选择岗位",trigger:"change"}],newOrgId:[{required:!0,message:"请选择部门",trigger:"change"}],newEmployType:[{required:!0,message:"请选择员工类型",trigger:"change"}],clientCompanyId:[{required:!0,message:"请选择入职客户方",trigger:"change"}],clientContractId:[{required:!0,message:"请选择客户合同",trigger:"change"}],clientSaleJob:[{required:!0,message:"请选择结算岗位",trigger:"change"}],clientSaleLevel:[{required:!0,message:"请选择结算职级",trigger:"change"}],clientPosition:[{required:!0,message:"请输入客户方岗位",trigger:"fouce"}],clientEntryTime:[{required:!0,message:"请选择入场日期",trigger:"change"}],clientEntryName:[{required:!0,message:"请选择客户职场",trigger:"change"}],jiaoFu:[{required:!0,message:"请选择交付",trigger:"change"}],changeReason:[{required:!0,message:"请输入变动原因",trigger:"blur"}],newEmployWorkplaceId:{required:!0,message:"请选择客户职场",trigger:"change"},newCompanyJobDetailAddress:{required:!0,message:"请选择客户职场",trigger:"change"}},mt={name:"CompanyInfo",components:{zmForm:b["a"]},props:{detailData:{type:Object,require:!0}},computed:{formConfig:function(){return ut(this)}},data:function(){return{rules:dt}}},ht=mt,gt=Object(x["a"])(ht,ct,pt,!1,null,null,null),ft=gt.exports,yt=n("f9cd"),Ct=n("2b0e"),wt={name:"employChangeList",components:{zmTable:l["a"],zmSearch:s["a"],searchForm:k,infoForm:F,changeType:Y,changePost:ie,changeDep:ge,changeLevel:Le,detailSearch:Ue["a"],detailInfo:Be["a"],detailPost:Xe,detailLevel:lt,detailUpdate:st["a"],detailDep:ft,secDep:Je,detailType:yt["a"],secType:$e},data:function(){return{tableData:[],optionList:[],pageData:{pageIndex:1,pageSize:15,pageCount:0},sortData:[],searchData:{},sizeList:[15,30,50],employOptions:[],employLoading:!1,clientOptions:[],clientLoading:!1,tableLoading:!1,conversionsList:[],exportLoading:!1,employChange:{employChangeVisible:!1,detailVisible:!1},changeEndInfo:"",firstLineList:[],secLineList:[],levelOptionsList:[],containerLoading:!1,isShow:!0,selectEmployInfo:{},detailData:{},changeDetail:""}},computed:{columnsList:function(){return d(this)},inputConfig:function(){return p(this)},btnConfig:function(){return u(this)}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getEmployAddList();case 2:return t.next=4,e.getLevelData();case 4:e.getFirst(),e.getSec();case 6:case"end":return t.stop()}}),t)})))()},mounted:function(){},activated:function(){var e=this;this.$nextTick((function(){e.$refs.tableRef.doLayoutTable()}))},watch:{},methods:Object(r["a"])(Object(r["a"])({},Object(y["d"])("entryCfmSalary",["CHANGE_EDIT_PROCESS_STATUS","CHANGE_LIST_PAGE_STAUTS"])),{},{getEmployAddList:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e||{},o={input:a},t.tableLoading=!0,r=Object.assign({},t.pageData,o),r.input.displays=t.sortData,n.prev=5,n.next=8,Object(ne["g"])(r);case 8:i=n.sent,t.pageData.pageIndex=i.pageIndex,t.pageData.pageCount=i.rowCount,t.tableData=i.result,n.next=16;break;case 14:n.prev=14,n.t0=n["catch"](5);case 16:return n.prev=16,t.tableLoading=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[5,14,16,19]])})))()},searchconvers:function(e){var t=JSON.parse(JSON.stringify(e));console.log("请求查询的参数对象：",t),t.orgId&&t.orgId.length?t.orgId=t.orgId[t.orgId.length-1]:delete t.orgId,t.employJob&&t.employJob.length?t.employJob=t.employJob[t.employJob.length-1]:delete t.employJob,t.updateDt&&t.updateDt.length?(t.startDt=new Date(t.updateDt[0]),t.endDt=new Date(t.updateDt[1])):(delete t.updateDt,delete t.endDt,delete t.startDt),t.oneType||delete t.oneType,t.twoType||delete t.twoType,this.pageData.pageIndex=1,this.searchData=t,this.getEmployAddList(t)},handleSizeChange:function(e){this.pageData.pageIndex=1,this.pageData.pageSize=e,this.getEmployAddList(this.searchData)},resetTable:function(){this.pageData.pageIndex=1,this.searchData={},this.getEmployAddList(this.searchData)},handleCurrentChange:function(e){this.pageData.pageIndex=e,this.getEmployAddList(this.searchData)},sortChange:function(e){var t=this;this.sortData=[];var n="";n="ascending"===e.order?"asc":"desc";var a={display:n,field:e.prop};0===this.sortData.length?this.sortData.push(a):this.sortData.forEach((function(e,n){if(e.field===a.field){if(e.display===a.display)return void t.sortData.splice(n,1);t.sortData.splice(n,1),t.sortData.push(a)}else t.sortData.push(a)})),this.getEmployAddList(this.searchData)},employRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.employLoading=!0,n.prev=2,n.next=5,Object(h["L"])({keyword:e});case 5:a=n.sent,console.log("查询用户结果",a),t.employOptions=Array.isArray(a)&&a.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(r["a"])({text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName),value:e.userInfo.userId},t)})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.employLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},clientRemote:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("拿到的数据：",e),t.clientLoading=!0,n.prev=2,n.next=5,Object(g["l"])({input:{keyword:e,clientType:"IT_CLTP_001"}});case 5:a=n.sent,console.log("查询所属客户",a),t.clientOptions=Array.isArray(a.result)&&a.result.map((function(e){return{text:"".concat(e.clientCompany.clientCompanyName),value:e.clientCompany.clientCompanyId}})),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](2);case 12:return n.prev=12,t.clientLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,10,12,15]])})))()},viewFn:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("点击查看详情：",e),"true"!==e.flag){n.next=8;break}a={taskInstanceId:e.taskId,flowName:e.flowName,version:e.version,nodeInstanceId:Array.isArray(e.nodeList)?e.nodeList[e.nodeList.length-1]:e.nodeList},console.log("查看详情的taskObj：",a),a=encodeURIComponent(JSON.stringify(a)),t.$router.push({path:"/workbench/infoChangeDetailsSSC/".concat(e.taskId),query:{taskObj:a}}),n.next=37;break;case 8:return n.prev=8,t.containerLoading=!0,n.next=12,Object(m["f"])({id:e.id});case 12:o=n.sent,console.log("请求详情结果：",o),t.detailData=o.data,n.t0=e.type,n.next="IT_TWOL_001"===n.t0?18:"IT_TWOL_004"===n.t0?20:"IT_TWOL_002"===n.t0?22:"IT_TWOL_006"===n.t0?24:"IT_TWOL_003"===n.t0?26:"IT_TWOL_005"===n.t0?28:29;break;case 18:return t.changeDetail="detailPost",n.abrupt("break",29);case 20:return t.changeDetail="detailLevel",n.abrupt("break",29);case 22:return t.changeDetail="detailDep",n.abrupt("break",29);case 24:return t.changeDetail="detailDep",n.abrupt("break",29);case 26:return t.changeDetail="detailType",n.abrupt("break",29);case 28:t.changeDetail="detailType";case 29:t.employChange.detailVisible=!0,n.next=34;break;case 32:n.prev=32,n.t1=n["catch"](8);case 34:return n.prev=34,t.containerLoading=!1,n.finish(34);case 37:case"end":return n.stop()}}),n,null,[[8,32,34,37]])})))()},getLevelData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={dateType:"IT_JSJB"},t.prev=1,t.next=4,Object(h["o"])(n);case 4:a=t.sent,e.levelOptionsList=a,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getFirst:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={dateType:"IT_XXBG"},t.prev=1,t.next=4,Object(h["o"])(n);case 4:a=t.sent,e.firstLineList=a,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getSec:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={dateType:"IT_TWOL"},t.prev=1,t.next=4,Object(h["o"])(n);case 4:a=t.sent,e.secLineList=a,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},exportChangeEmploy:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={displays:e.sortData,input:e.searchData},console.log("查询参数：",n),e.exportLoading=!0,t.prev=3,t.next=6,Object(ne["c"])(n);case 6:o=t.sent,console.log("请求导出转正员工结果：",o),"200"===o.code&&(a=o.msg,r="https://www.tobowork.com//api/tobosoft-toms/commons/exportfile/download?delete=false&fileName="+a,i=document.createElement("a"),i.setAttribute("download",a),i.href=r,document.body.appendChild(i),i.click(),i.remove()),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](3);case 13:return t.prev=13,e.exportLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[3,11,13,16]])})))()},employChangeSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("员工变动确认提交"),console.log("表单：",e.$refs.employChangeInfoForm),n=e.validateAllForm(),e.containerLoading=!0,!n){t.next=64;break}if(o=Object(r["a"])({employId:e.selectEmployInfo.employId},e.$refs.employChangeInfoForm.employChangeEndInfoDataData),console.log("当前提交时的参数：",o),o.newOrgId&&o.newOrgId.length?o.newOrgId=o.newOrgId[o.newOrgId.length-1]:delete o.newOrgId,o.newCompanyJob&&o.newCompanyJob.length&&(o.newCompanyJob=o.newCompanyJob[o.newCompanyJob.length-1]),o.updateDt&&(o.updateDt=new Date(o.updateDt)),t.prev=10,console.log("提交参数：",o),"changePost"!==e.changeEndInfo){t.next=19;break}return console.log("调岗提交"),t.next=16,Object(m["d"])(o);case 16:a=t.sent,t.next=56;break;case 19:if("changeDep"!==e.changeEndInfo){t.next=27;break}return console.log("调一级部门提交"),o.type="IT_TWOL_002",t.next=24,Object(m["b"])(o);case 24:a=t.sent,t.next=56;break;case 27:if("changeType"!==e.changeEndInfo){t.next=35;break}return console.log(3),o.type="IT_TWOL_003",t.next=32,Object(m["e"])(o);case 32:a=t.sent,t.next=56;break;case 35:if("changeLevel"!==e.changeEndInfo){t.next=42;break}return console.log("调级提交",o),t.next=39,Object(m["c"])(o);case 39:a=t.sent,t.next=56;break;case 42:if("secDep"!==e.changeEndInfo){t.next=50;break}return console.log("调二级部门提交"),o.type="IT_TWOL_006",t.next=47,Object(m["b"])(o);case 47:a=t.sent,t.next=56;break;case 50:if("secType"!==e.changeEndInfo){t.next=56;break}return console.log("调二级部门转员工类型提交"),o.type="IT_TWOL_005",t.next=55,Object(m["e"])(o);case 55:a=t.sent;case 56:console.log("新增结果：",a),"200"===a.code?(e.$message.success("添加员工变更成功！"),e.employChange.employChangeVisible=!1,e.getEmployAddList(e.searchData)):e.$message.error("添加员工变更失败：".concat(a.msg)),t.next=62;break;case 60:t.prev=60,t.t0=t["catch"](10);case 62:t.next=66;break;case 64:e.$message.warning("请填写必填项"),e.$nextTick((function(){var e=document.getElementsByClassName("is-error");e&&e[0].scrollIntoView({block:"center",behavior:"smooth"})}));case 66:e.containerLoading=!1;case 67:case"end":return t.stop()}}),t,null,[[10,60]])})))()},employChangeAdd:function(){this.employChange.employChangeVisible=!0,this.changeEndInfo=""},validateAllForm:function(){var e=!1;this.$refs.employChangeModule.$refs.searchForm.validate((function(t){console.log(e,"表单校验基本信息"),e=!!t}));var t=!1;this.$refs.employChangeInfoForm&&this.$refs.employChangeInfoForm.$refs.employChangeEndInfoData.validate((function(e){t=!!e,console.log(e,"表单校验公司信息")}));var n=e&&t;return n},closeDialog:function(){var e=this;console.log("dialog关闭"),this.changeEndInfo="",this.isShow=!1,this.selectEmployInfo={},this.$nextTick((function(){e.isShow=!0}))},dialogOpend:function(){this.$refs.employChangeInfoForm&&this.$refs.employChangeInfoForm.$refs.employChangeEndInfoData.clearValidate(),this.$refs.employChangeModule.$refs.searchForm.clearValidate()},setSelEmpIfo:function(e){var t=Ct["default"].observable(e);this.selectEmployInfo=t,console.log("设置信息成功：",this.selectEmployInfo)}})},bt=wt,vt=(n("e677"),Object(x["a"])(bt,a,o,!1,null,"1cedbdce",null));t["default"]=vt.exports},f889:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"s",(function(){return r})),n.d(t,"t",(function(){return i})),n.d(t,"i",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return p})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"p",(function(){return h})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return f})),n.d(t,"o",(function(){return y})),n.d(t,"j",(function(){return C})),n.d(t,"q",(function(){return w})),n.d(t,"b",(function(){return b})),n.d(t,"u",(function(){return v})),n.d(t,"l",(function(){return I})),n.d(t,"r",(function(){return D})),n.d(t,"d",(function(){return L}));n("99af");var a=n("b775");function o(e){return Object(a["a"])({url:"/salary/salaryLineSet/querySalaryLineList",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/salary/salaryLineSet/saveCommitData",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryForDetail?salaryLineMainId=".concat(e.salaryLineMainId),method:"post"})}function l(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryForVersion?lineMainId=".concat(e.lineMainId),method:"post"})}function s(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryByLineMainIdAndVersion?lineMainId=".concat(e.lineMainId,"&version=").concat(e.version),method:"post"})}function c(e){return Object(a["a"])({url:"/business/client/queryClientCompayByName?clinetName=".concat(e.clinetName),method:"post"})}function p(e){return Object(a["a"])({url:"/business/contract/queryContractByClientCompanyId?clientCompanyId=".concat(e.clientCompanyId),method:"post"})}function u(e){return Object(a["a"])({url:"/salary/salaryLineSet/addOrUpdateSalaryLineInfo",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryForEdit?lineMainId=".concat(e.lineMainId),method:"post"})}function m(e){return Object(a["a"])({url:"/salary/salaryLineSet/deleteById?lineMainId=".concat(e.lineMainId),method:"post"})}function h(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryUvCvByContract",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryByLineMainIdAndVersion?lineMainId=".concat(e.lineMainId,"&version=").concat(e.version),method:"post"})}function f(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryByStation?lineMainId=".concat(e.lineMainId,"&station=").concat(e.station,"&version=").concat(e.version),method:"post"})}function y(e){return Object(a["a"])({url:"/salary/salaryLineSet/queryUvCv",method:"post",data:e})}function C(e){return Object(a["a"])({url:"/salary/queryForObject",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/salary/salaryInfoAdd",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/salary/deleteById?salaryId=".concat(e.salaryId),method:"post"})}function v(e){return Object(a["a"])({url:"/salary/exprotExcel",method:"post",data:e})}function I(e){return Object(a["a"])({url:"/salary/queryDetail?salaryId=".concat(e.salaryId),method:"post"})}function D(e){return Object(a["a"])({url:"/salary/updateSalaryInfo",method:"post",data:e})}function L(e){return Object(a["a"])({headers:{"Content-Type":"multipart/form-data"},url:"/salary/importExcel",method:"post",data:e})}}}]);