(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-161becb2"],{1:function(e,t){},"1c98":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-select",e._b({staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","remote-method":e.remoteMethod},on:{clear:e.clear,change:e.getSelectValue,blur:e.blur},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"el-select",e.$attrs,!1),e._l(e.optionSelectList,(function(t,a){return s("el-option",{key:a,attrs:{label:e.getLabelField(t),value:e.getLabelField(t)}})})),1)},r=[],o=(s("159b"),s("23ba"),{name:"selectVmClientUsers",props:{optionListAsync:{type:Array},labelField:{type:Array},valueField:{type:Array},selectValueAsync:{type:String}},data:function(){return{selectValue:"",optionSelectList:[]}},mounted:function(){this.$emit("getOptionSelectList"),console.log},watch:{optionListAsync:{handler:function(e,t){this.optionSelectList=e}},selectValueAsync:{handler:function(e,t){this.selectValue=e}}},methods:{emptySelectValue:function(){this.$emit("getOptionSelectList")},getSelectValue:function(e){console.log("selectValue",e),this.$emit("getSelectValue",e)},remoteMethod:function(e){this.$emit("getOptionSelectList",e)},clear:function(){this.$emit("getOptionSelectList")},blur:function(){this.$emit("getOptionSelectList")},getLabelField:function(e){return this.labelField.forEach((function(t){e=e[t]})),e},getValueField:function(e){return this.valueField.forEach((function(t){e=e[t]})),e}}}),n=o,l=s("2877"),i=Object(l["a"])(n,a,r,!1,null,null,null);t["a"]=i.exports},2:function(e,t){},"23ba":function(e,t,s){"use strict";s.d(t,"h",(function(){return r})),s.d(t,"l",(function(){return o})),s.d(t,"d",(function(){return n})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return i})),s.d(t,"g",(function(){return u})),s.d(t,"j",(function(){return c})),s.d(t,"e",(function(){return d})),s.d(t,"f",(function(){return f})),s.d(t,"i",(function(){return m})),s.d(t,"k",(function(){return p})),s.d(t,"b",(function(){return g}));var a=s("b775");s("ba0f");function r(e){return Object(a["a"])({url:"/business/client/queryClientGroupList",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/business/client/saveOrUpdateClientGroup",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/business/client/queryClientCompanySelectList",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/business/client/queryClientCompanyRelationListByGroupId",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/business/client/checkReClientGroupName",method:"post",params:e})}function u(e){return Object(a["a"])({url:"/business/client/queryClientGroupInfo",method:"post",params:e})}function c(e){return Object(a["a"])({url:"/business/client/removeClientGroup",method:"post",params:e})}function d(e){return Object(a["a"])({url:"/business/client/queryClientCompanyWorkplaceInfo",method:"post",params:e})}function f(e){return Object(a["a"])({url:"/business/client/queryClientCompanyWorkplaceList",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/business/client/removeClientCompanyWorkplace",method:"post",params:e})}function p(e){return Object(a["a"])({url:"/business/client/saveOrUpdateClientCompanyWorkplace",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/business/client/queryAllClientCompanySelectList",method:"post",data:e})}},3:function(e,t){},4:function(e,t){},"4bb4":function(e,t,s){},5:function(e,t){},"9b97":function(e,t,s){"use strict";s("4bb4")},"9d3e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"le-content"},[s("el-input",{staticClass:"input-style",staticStyle:{width:"200px"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),s("el-tree",{ref:"organTree",staticClass:"filter-tree",attrs:{data:e.orgList,props:e.defaultProps,"default-expand-all":"","filter-node-method":e.filterNode},on:{"node-click":e.treeChange}})],1),s("div",{staticClass:"page-content"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"\n        用户查询",prop:"cityName"}},[s("el-input",{staticStyle:{width:"200px",height:"30px"},attrs:{clearable:"",placeholder:"工号/姓名/手机号",maxlength:50},model:{value:e.queryListPa.keyword,callback:function(t){e.$set(e.queryListPa,"keyword",t)},expression:"queryListPa.keyword"}})],1),s("div",{staticClass:"right-btn"},[s("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.user.add",expression:"'database.user.add'"}],staticClass:"but-91",attrs:{size:"mini"},on:{click:e.handleAdd}},[e._v("新 增")]),s("el-button",{staticClass:"but-91",attrs:{size:"mini"},on:{click:e.handleReset}},[e._v("重 置")]),s("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.user.list",expression:"'database.user.list'"}],staticClass:"but-91",attrs:{size:"mini"},on:{click:e.toNewProvince}},[e._v("查 询")])],1)],1),s("div",{staticClass:"table-min"},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%","background-color":"white","border-radius":"6px"},attrs:{height:"520px",data:e.tableUserListData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:e.indexMethod}}),s("el-table-column",{attrs:{prop:"loginName",label:"工号/账号"}}),s("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),s("el-table-column",{attrs:{prop:"orgName",label:"部门",width:"200px","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"userType",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.getqueryLabelById(e.userTypeList,t.row.userType)))])]}}])}),s("el-table-column",{attrs:{prop:"userPhone",label:"手机号码","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"userStatus",label:"状态",width:"100px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.getqueryLabelById(e.userStatusList,t.row.userStatus)))])]}}])}),s("el-table-column",{attrs:{prop:"roles",label:"角色",width:"100px;","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"updateDate",label:"更新时间",width:"120px;"}}),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"lastLoginTime",label:"最后登录时间",width:"120px;"}}),s("el-table-column",{attrs:{prop:"查看",width:"200",align:"center",label:"操作","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.user.edit",expression:"'database.user.edit'"}],staticStyle:{color:"#078bfd","font-size":"14px"},attrs:{size:"mini",type:"text"},on:{click:function(s){return e.handleUpdate(t.row)}}},[e._v("编辑")]),s("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.user.reSetPassword",expression:"'database.user.reSetPassword'"}],staticStyle:{color:"#078bfd","font-size":"14px"},attrs:{size:"mini",type:"text"},on:{click:function(s){return e.resetPasswordModeShow(t.row)}}},[e._v("重置密码")]),s("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.user.delete",expression:"'database.user.delete'"}],staticStyle:{color:"#078bfd","font-size":"14px"},attrs:{size:"mini",type:"text"},on:{click:function(s){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),s("div",{staticClass:"block pagination"},[s("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":e.pagePa.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagePa.rowCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:pageSize":function(t){return e.$set(e.pagePa,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pagePa,"pageSize",t)}}})],1)],1),s("el-dialog",{attrs:{title:e.form.userId?"编辑用户":"新增用户",width:"",visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.handleClose}},[s("el-form",{ref:"form",staticClass:"form-margin",attrs:{"label-width":"84px",rules:e.rules,model:e.form}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"工号/账号",prop:"loginName"}},[s("el-input",{staticClass:"inpWidth",attrs:{maxlength:6,clearable:"",placeholder:"请输入工号/账号"},model:{value:e.form.loginName,callback:function(t){e.$set(e.form,"loginName",t)},expression:"form.loginName"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"手机号码",prop:"userPhone"}},[s("el-input",{staticClass:"inpWidth",attrs:{placeholder:"请输入手机号码",maxlength:11,clearable:""},model:{value:e.form.userPhone,callback:function(t){e.$set(e.form,"userPhone",t)},expression:"form.userPhone"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"密码",prop:null==e.form.userId?"loginPassword":""}},[s("el-input",{staticClass:"inpWidth",attrs:{"show-password":"",disabled:!!e.form.userId,clearable:"",maxlength:20,placeholder:"请输入密码"},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.form.loginPassword,callback:function(t){e.$set(e.form,"loginPassword",t)},expression:"form.loginPassword"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[s("el-input",{staticClass:"inpWidth",attrs:{placeholder:"请输入姓名",maxlength:50,clearable:""},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"邮箱",prop:"userEmail"}},[s("el-autocomplete",{staticClass:"inpWidth",attrs:{"fetch-suggestions":e.fillEmail,"prefix-icon":"el-icon-message",placeholder:"请输入邮箱",clearable:"",filterable:"",maxlength:50},model:{value:e.form.userEmail,callback:function(t){e.$set(e.form,"userEmail",t)},expression:"form.userEmail"}}),s("div",{staticClass:"hintBox"},e._l(e.emails,(function(t){return s("div",{key:t,staticClass:"hintItem",on:{click:function(s){return e.setInput(t)}}},[e._v(" "+e._s(t)+" ")])})),0)],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"状态",prop:"userStatus"}},[s("el-radio-group",{model:{value:e.form.userStatus,callback:function(t){e.$set(e.form,"userStatus",t)},expression:"form.userStatus"}},e._l(e.userStatusList,(function(t,a){return s("el-radio",{key:a,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[s("el-select",{staticClass:"inpWidth",attrs:{placeholder:"请选择用户",clearable:""},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},e._l(e.userTypeList,(function(e){return s("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"角色",prop:"roleInfos"}},[s("el-select",{staticClass:"inpWidth",attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",multiple:"",placeholder:"请选择角色","remote-method":e.getRoleListAsync},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.roleList,(function(e){return s("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所属部门",prop:"orgId"}},[s("treeselect",{staticClass:"inpWidth",attrs:{options:e.orgList,normalizer:e.normalizer,"show-count":!0,placeholder:"选择部门"},model:{value:e.form.orgId,callback:function(t){e.$set(e.form,"orgId",t)},expression:"form.orgId"}})],1)],1)],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"but-90",on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),s("el-button",{staticClass:"but-90",attrs:{type:"primary"},on:{click:function(t){return e.dialogFormVisibleAddSave("form")}}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"修改密码",width:"30%",visible:e.dialogFormVisiblePass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisiblePass=t},close:e.handleClose1}},[s("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{closable:!1,"show-icon":!0,title:e.resetTitle,type:"warning"}}),s("el-form",{ref:"formPass",attrs:{model:e.formPass,rules:e.formPassRules,"label-width":"84px"}},[s("el-form-item",{attrs:{label:"密码",prop:"passVal"}},[s("el-input",{staticClass:"inpWidth",attrs:{"show-password":""},model:{value:e.formPass.passVal,callback:function(t){e.$set(e.formPass,"passVal",t)},expression:"formPass.passVal"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"againPass"}},[s("el-input",{staticClass:"inpWidth",attrs:{"show-password":""},model:{value:e.formPass.againPass,callback:function(t){e.$set(e.formPass,"againPass",t)},expression:"formPass.againPass"}})],1),s("el-form-item",[s("a",{staticStyle:{color:"#0099ff"},on:{click:e.getPassVal}},[e._v("填入")]),e._v("初始化为系统默认的 tb6666 ")])],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"but-90",on:{click:function(t){e.dialogFormVisiblePass=!1}}},[e._v("取 消")]),s("el-button",{staticClass:"but-90",attrs:{type:"primary"},on:{click:function(t){return e.onChangePassword("formPass")}}},[e._v("确 定")])],1)],1)],1)},r=[],o=s("2909"),n=(s("4de4"),s("159b"),s("d81d"),s("a15b"),s("a434"),s("a417")),l=s("ed08"),i=s("61f7"),u=s("ca17"),c=s.n(u),d=(s("542c"),s("1c98")),f={components:{Treeselect:c.a,zmSelect:d["a"]},data:function(){var e=this,t=function(e,t,s){var a=/(?=.*[0-9])(?=.*[A-Za-z])/,r=/(?=.*[0-9])(?=.*[^A-Za-z0-9])/;return t.length<6?s(new Error("密码不能少于6位！")):t.length>16?s(new Error("密码最长不能超过20位！")):a.test(t)||r.test(t)?void s():s(new Error("密码中必须由数字+字母或数字+特殊字符组成，至少6个字符，最多20个字符。"))},s=function(t,s,a){return s.length<1?a(new Error("重复密码不能为空！")):e.formPass.againPass!=e.formPass.passVal?a(new Error("两次输入密码不一致！")):void a()};return{emails:[],defaultProps:{children:"children",label:"orgName",id:"orgId"},filterText:"",resetTitle:"",queryListPa:{},dialogFormVisible:!1,dialogFormVisiblePass:!1,formLabelWidth:"84px",currentItem:{},deptId:"",form:{},rules:{loginName:[{required:!0,trigger:"change",validator:i["s"]}],userPhone:[{required:!0,trigger:"change",validator:i["r"]}],loginPassword:[{required:!0,trigger:"change",validator:t}],userName:[{required:!0,message:"姓名不能为空",trigger:"blur"}],userEmail:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{required:!0,trigger:"change",validator:i["h"]}],userStatus:[{required:!0,message:"状态不能为空",trigger:"change"}],userType:[{required:!0,message:"用户类型不能为空",trigger:"change"}],roleInfos:[{required:!1,message:"角色不能为空",trigger:"blur"}],orgId:[{required:!0,message:"所属部门不能为空",trigger:"blur"}]},formPass:{passVal:"",againPass:""},formPassRules:{passVal:[{required:!0,message:"密码不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}],againPass:[{required:!0,message:"密码不能为空",trigger:"blur"},{required:!0,validator:s,trigger:"blur"}]},tableUserListData:[],multipleSelection:[],pagePa:{pageIndex:1,pageSize:15,rowCount:0},roleList:[],roleInfos:[],orgList:[],roleListListAsync:[]}},computed:{userTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_EMPL},userStatusList:function(){return this.$store.state.baseData.baseDataOptionList.IT_USST},jobsList:function(){return this.$store.state.baseData.baseDataOptionList.IT_JOBS}},mounted:function(){this.resetForm(),this.initData()},watch:{filterText:function(e){this.$refs.organTree.filter(e)}},methods:{indexMethod:function(e){return this.pagePa.pageSize*this.pagePa.pageIndex+e-this.pagePa.pageSize+1},handleClose1:function(){this.$refs.formPass.resetFields()},fillEmail:function(e,t){void 0!=e&&null!=e||(e="");var s=e||"",a=s.indexOf("@");if(a>=0)t([{value:s}]);else{var r=[],o=["@tobosoft.com.cn","@qq.com","@126.com","@163.com","@0355.net","@263.net","@3721.net","@yahoo.com","@gmail.com","@msn.com","@hotmail.com","@aol.com","@ask.com","@live.com","@yeah.net"];o.forEach((function(t){r.push({value:e+t})})),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t(r)}),1e3*Math.random())}},handleClose:function(){this.$refs["form"].resetFields(),this.form={},this.form.userStatus="IT_USST_001"},getqueryLabelById:function(e,t){return Object(l["k"])(e,t)},treeChange:function(e,t,s){e.orgId?(this.queryListPa.orgId=e.orgId,this.tableList()):this.queryListPa.orgId=""},filterNode:function(e,t){return!e||(t.orgName?-1!==t.orgName.indexOf(e):void 0)},getPassVal:function(){void 0!==this.$refs.formPass&&this.$refs.formPass.resetFields(),this.formPass.passVal="tb6666",this.formPass.againPass="tb6666"},handleUpdate:function(e){var t=this;Object(n["bb"])({userId:e.userInfo.userId}).then((function(e){e.userType=e.userInfo.userType,e.loginName=e.userInfo.loginName,e.loginPassword=e.userInfo.loginPassword,e.mdeUpdatedDate=e.userInfo.mdeUpdatedDate,e.userEmail=e.userInfo.userEmail,e.userId=e.userInfo.userId,e.userName=e.userInfo.userName,e.userPhone=e.userInfo.userPhone,e.userStatus=e.userInfo.userStatus,e.userType=e.userInfo.userType,e.jobId=e.userInfo.jobId,t.form=e,t.dialogFormVisible=!0,console.log(e),console.log("this.form.roleIds",t.form.roleIds)}))},handleDelete:function(e){var t=this;this.$confirm("是否确认删除工号为“".concat(e.loginName,"”的数据项?"),"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["h"])({userId:e.userInfo.userId}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.handleReset()}),(function(e){t.$message({type:"error",message:"删除失败!"})}))}))},handleReset:function(){this.queryListPa.keyword="",this.queryListPa.orgId="",this.tableList()},handleAdd:function(){this.dialogFormVisible=!0,void 0!==this.$refs["form"]&&this.$refs["form"].resetFields(),this.resetForm()},resetForm:function(){this.form={loginName:void 0,userPhone:void 0,loginPassword:"tb6666",userName:void 0,userEmail:void 0,userStatus:"IT_USST_001",userType:void 0,roleIds:void 0,orgId:void 0,jobId:void 0}},toNewProvince:function(){this.pagePa={pageIndex:1,pageSize:15,rowCount:0,orgId:"AA115F3175D0000"},this.tableList()},initData:function(){var e=this;Object(n["F"])({}).then((function(t){e.roleList=t,Object(n["n"])({input:{dateType:"userType"},nextToken:"",pageEnd:0,pageIndex:1,pageSize:15,pageStart:0}).then((function(t){e.userType=t.result})),Object(n["n"])({input:{dateType:"userStatus"},nextToken:"",pageEnd:0,pageIndex:1,pageSize:15,pageStart:0}).then((function(t){e.userStatus=t.result}))})),Object(n["z"])({}).then((function(t){e.treeSelectArr(t),e.orgList=t})),this.tableList()},treeSelectArr:function(e){var t=this;e.forEach((function(e){0==e.children.length?delete e.children:t.treeSelectArr(e.children)}))},normalizer:function(e){return{id:e.orgId,label:e.orgName,children:e.children}},tableList:function(){var e=this;Object(n["K"])({input:this.queryListPa,nextToken:"",pageEnd:0,pageIndex:this.pagePa.pageIndex,pageSize:this.pagePa.pageSize,pageStart:0}).then((function(t){e.pagePa.rowCount=t.rowCount,t.result&&t.result.length>0&&t.result.forEach((function(t,s){if(t.sn=s+1,t.userType=t.userInfo.userType,t.loginName=t.userInfo.loginName,t.loginPassword=t.userInfo.loginPassword,t.userInfo.updateDate&&(t.updateDate=Object(l["d"])(t.userInfo.updateDate)),t.userInfo.lastLoginTime&&(t.lastLoginTime=Object(l["d"])(t.userInfo.lastLoginTime)),t.userEmail=t.userInfo.userEmail,t.userId=t.userInfo.userId,t.userName=t.userInfo.userName,t.userPhone=t.userInfo.userPhone,e.roleInfos=t.roleInfos,t.userStatus=t.userInfo.userStatus,t.userType=t.userInfo.userType,Array.isArray(t.roleInfos)&&t.roleInfos.length>0){var a=t.roleInfos.map((function(e){return e.roleName}));t.roles=a.join(",")}})),e.tableUserListData=t.result}))},onChangeOff:function(e){var t=this;0==e.userInfo.isLogin?setUserInvalid({userId:e.userInfo.userId+""}).then((function(e){t.getData()})):setUserValid({userId:e.userInfo.userId+""}).then((function(e){t.getData()}))},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.pagePa.pageSize=e,this.initData()},handleCurrentChange:function(e){this.pagePa.pageIndex=e,this.initData()},openPopup:function(){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){setDeleteUser({userId:e.currentItem.userId+""}).then((function(e){})),e.tableList(),e.$message({type:"success",message:"删除成功!"})})).catch((function(e){}))},addDialogFormVisible:function(){this.dialogFormVisible=!0},addSaveUser:function(e){var t=this,s={jobId:e.jobId||null,orgId:e.orgId||null,orgName:e.orgName||null,roleIds:e.roleIds||null,roleInfos:e.roleInfos||null,userInfo:{loginName:e.loginName||null,loginPassword:e.loginPassword||null,userEmail:e.userEmail||null,userId:e.userId||null,userName:e.userName||null,userPhone:e.userPhone||null,userStatus:e.userStatus||null,userType:e.userType||null,jobId:e.jobId||null}};e.userId?Object(n["i"])(s).then((function(s){t.$message({message:"编辑成功",type:"success"}),t.tableList(),t.dialogFormVisible=!1,t.judgeUser(e)})):Object(n["Z"])(s).then((function(e){t.$message({message:"添加成功",type:"success"}),t.tableList(),t.dialogFormVisible=!1}))},judgeUser:function(e){var t=this;if(console.log("当前操作的用户：",e),console.log("当前登录的用户：",this.$store.state.user.userInfo),this.$store.state.user.userInfo.userId===e.userId){console.log("操作的是当前用户");var s=Object(o["a"])(this.$store.state.app.roleData.rolesList),a=Object(o["a"])(e.roleIds),r=s.length,n=a.length;console.log("处理之前的两个数组：",s,a);for(var l=r-1;l>-1;--l)for(var i=n-1;i>-1;--i)if(s[l].roleInfo.roleId===a[i]){s.splice(l,1),a.splice(i,1);break}if(console.log("处理之后的两个数组：",s,a),s.length){var u=s.some((function(e){return e.roleInfo.roleId===t.$store.state.app.roleData.defaultRole&&(console.log("当前删除的角色是使用的角色"),!0)}));u?(window.location.hash="/dashboard",window.location.reload()):this.$store.dispatch("app/GET_ROLE")}else a.length&&(console.log("新增角色"),this.$store.dispatch("app/GET_ROLE"))}else console.log("操作的并不是当前用户")},dialogFormVisibleAddSave:function(e){var t=this;this.$refs[e].validate((function(e){e?t.addSaveUser(t.form):t.$message({type:"error",message:"请把信息填写完整!"})}))},resetPasswordModeShow:function(e){this.dialogFormVisiblePass=!0,this.userId=e.userInfo.userId,this.resetTitle="提示信息：您将对 ".concat(e.userInfo.loginName," 的密码进行修改，请谨慎对待！"),this.formPass={passVal:void 0,againPass:void 0}},onChangePassword:function(e){var t=this,s=this;this.$refs[e].validate((function(e){e?s.formPass.passVal!=s.formPass.againPass?(s.$message({type:"error",message:"密码请与上面保持一致!"}),s.formPass.againPass=""):Object(n["S"])({userId:t.userId,password:s.formPass.passVal}).then((function(e){s.$message({type:"success",message:"修改成功!"}),t.dialogFormVisiblePass=!1})):s.$message({type:"error",message:"请把信息填写完整!"})}))},getRoleListAsync:function(e){var t=this,s={};s.roleName=e||"",Object(n["F"])(s).then((function(e){var s=e;t.roleList=s}))},getRoleValue:function(e){console.log(e),this.form.roleIds=e}}},m=f,p=(s("9b97"),s("2877")),g=Object(p["a"])(m,a,r,!1,null,"46915b9a",null);t["default"]=g.exports}}]);