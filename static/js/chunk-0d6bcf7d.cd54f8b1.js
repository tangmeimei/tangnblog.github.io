(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d6bcf7d"],{adeb:function(e,t,a){},e2f0:function(e,t,a){"use strict";a("adeb")},eda7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryCityListData}},[a("el-form-item",{attrs:{label:"市名称",prop:"cityName"}},[a("el-autocomplete",{staticStyle:{width:"200px"},attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入市名称",clearable:""},model:{value:e.queryCityListData.regionName,callback:function(t){e.$set(e.queryCityListData,"regionName",t)},expression:"queryCityListData.regionName"}})],1),a("el-form-item",{attrs:{label:"所属省"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:""},model:{value:e.queryCityListData.parentId,callback:function(t){e.$set(e.queryCityListData,"parentId",t)},expression:"queryCityListData.parentId"}},e._l(e.provinceListData,(function(e){return a("el-option",{key:e.regionId,attrs:{label:e.regionName,value:e.regionId}})})),1)],1),a("div",{staticClass:"right-btn"},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.city.add",expression:"'database.city.add'"}],staticClass:"but-91",on:{click:e.toNewProvince}},[e._v("新增")]),a("el-button",{staticClass:"but-91",on:{click:e.emptyBtn}},[e._v("重置")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.city.list",expression:"'database.city.list'"}],staticClass:"but-91",on:{click:e.queryList}},[e._v("查询")])],1)],1),a("div",{staticClass:"table-min"},[a("el-table",{staticStyle:{width:"100%","border-radius":"6px"},attrs:{height:"542px",data:e.cityListData,size:"medium","header-cell-style":{background:"#fff",color:"#333"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:e.indexMethod}}),a("el-table-column",{attrs:{label:"市名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.regionName))])]}}])}),a("el-table-column",{attrs:{prop:"parentVo.regionName",label:"所属省",align:"center"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"has",rawName:"v-has",value:"database.city.edit",expression:"'database.city.edit'"}],staticClass:"customBtn",staticStyle:{"margin-right":"6px"},on:{click:function(a){return e.toEditPage(t.row)}}},[e._v("编辑")]),a("span",{directives:[{name:"has",rawName:"v-has",value:"database.city.delete",expression:"'database.city.delete'"}],staticClass:"customBtn",on:{click:function(a){return e.delBtn(t.row.regionId)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{staticStyle:{"margin-top":"160px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,width:"30%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"submitCityListData",attrs:{rules:e.rulesDialog,model:e.submitCityListData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"请选择省",prop:"parentId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.submitCityListData.parentId,callback:function(t){e.$set(e.submitCityListData,"parentId",t)},expression:"submitCityListData.parentId"}},e._l(e.provinceListData,(function(e){return a("el-option",{key:e.regionId,attrs:{label:e.regionName,value:e.regionId}})})),1)],1),a("el-form-item",{attrs:{label:"市名称",prop:"regionName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",maxlength:"50",placeholder:"请输入市名称"},model:{value:e.submitCityListData.regionName,callback:function(t){e.$set(e.submitCityListData,"regionName",t)},expression:"submitCityListData.regionName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{directives:[{name:"preventClick",rawName:"v-preventClick"}],attrs:{type:"primary"},on:{click:function(t){return e.preserveBtn("submitCityListData")}}},[e._v("确 定")])],1)],1)],1),a("div",{staticClass:"pagination-min"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[15,30,50],layout:"total,sizes, prev, pager, next, jumper",total:e.paginationData.rowCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)],1)},n=[],r=a("1da1"),s=(a("96cf"),a("d81d"),a("ac1f"),a("5319"),a("b0c0"),a("a417")),o={data:function(){var e=function(e,t,a){""!=t?a():a(new Error("内容不能为空！"))};return{cityMessage:["北京市","天津市","上海市","重庆市"],rulesDialog:{parentId:[{required:!0,message:"请选择省",trigger:"blur"}],regionName:[{required:!0,validator:e,trigger:"blur"}]},cityListData:[],provinceListData:[],dialogFormVisible:!1,formLabelWidth:"120px",formDialog:{parentId:"",name:""},queryCityListData:{parentId:"",regionCode:"",regionId:"",regionLevel:2,regionList:[],regionName:"",regionNameEn:"",regionOrder:"",regionShortnameEn:""},submitCityListData:{parentId:"",regionCode:"",regionId:"",regionLevel:"",regionList:[],regionName:"",regionNameEn:"",regionOrder:"",regionShortnameEn:""},currentCity:"",currentRegionName:"",dialogTitle:"创建市",paginationData:{},currentPage:1,pageSize:15,pageIndex:1}},created:function(){this.baseList(this.pageIndex)},methods:{indexMethod:function(e){return this.pageSize*this.paginationData.pageIndex+e-this.pageSize+1},querySearchAsync:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var n,r,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(""!=e){i.next=4;break}t([]),i.next=11;break;case 4:return a.queryCityListData.regionName=e,n={input:a.queryCityListData,nextToken:"",pageEnd:0,pageIndex:a.pageIndex,pageSize:a.pageSize,pageStart:0},i.next=8,Object(s["C"])(n);case 8:r=i.sent,o=r.result.map((function(e){return{value:e.regionName}})),t(o);case 11:case"end":return i.stop()}}),i)})))()},baseList:function(e){var t=this;Object(s["C"])({input:this.queryCityListData,nextToken:"",pageEnd:0,pageIndex:e,pageSize:this.pageSize,pageStart:0}).then((function(e){t.paginationData=e,t.cityListData=e.result})),Object(s["B"])({regionLevel:1}).then((function(e){t.provinceListData=e}))},emptyBtn:function(){this.queryCityListData.regionName="",this.queryCityListData.parentId="",this.baseList(this.pageIndex)},toNewProvince:function(){this.dialogFormVisible=!0,this.dialogTitle="创建市",this.submitCityListData={parentId:"",regionCode:"",regionId:"",regionLevel:"2",regionList:[],regionName:"",regionNameEn:"",regionOrder:"",regionShortnameEn:""}},toEditPage:function(e){this.dialogFormVisible=!0,delete e.parentVo,this.submitCityListData=e,this.currentRegionName=e.regionName,this.dialogTitle="编辑市",this.currentCity=e.regionName},preserveBtn:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(s["W"])(t.submitCityListData).then((function(e){t.dialogFormVisible=!1,t.baseList(t.pageIndex),"创建市"==t.dialogTitle?t.$message({message:"新增成功！",type:"success"}):t.$message({message:"编辑成功！",type:"success"})}))}))},delBtn:function(e){var t=this;this.$confirm("此操作将永久删除该数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["P"])({regionId:e}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.baseList()}))}))},toDetails:function(e){this.$router.push({path:"groupDetails",query:{clientGroupId:e}})},beforeHandleCommand:function(e,t){return{item:e,command:t}},queryList:function(){for(var e=0;e<this.cityMessage.length;e++)this.queryCityListData.regionName==this.cityMessage[e]?this.queryCityListData.regionLevel=1:this.queryCityListData.regionLevel=2;this.baseList(this.pageIndex)},handleCommand:function(e){var t=this;"a"==e.command?this.$router.push({path:"groupDetails",query:{clientGroupId:e.item.clientGroup.clientGroupId}}):"b"==e.command&&this.$confirm("此操作将永久删除该数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"删除成功!"})})).catch((function(e){}))},handleSizeChange:function(){this.baseList()},handleCurrentChange:function(e){this.baseList(e)},inputChange:function(e){var t=e.target;t.value=t.value.replace(/[^\u4E00-\u9FA5]/g,""),this.name=t.value}}},l=o,c=(a("e2f0"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,"b72894fc",null);t["default"]=u.exports}}]);