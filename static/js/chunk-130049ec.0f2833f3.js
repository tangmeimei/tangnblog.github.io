(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-130049ec"],{"4ab5":function(e,t,n){},"4ddb":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryWorkplaceListData}},[n("el-form-item",{attrs:{label:"客户名称",prop:"keyword"}},[n("el-input",{attrs:{maxlength:"50",clearable:"",placeholder:"客户名称"},model:{value:e.queryWorkplaceListData.keyword,callback:function(t){e.$set(e.queryWorkplaceListData,"keyword",t)},expression:"queryWorkplaceListData.keyword"}})],1),n("el-form-item",{attrs:{label:"所属行业"}},[n("el-cascader",{attrs:{options:e.industryTreeArr,props:{checkStrictly:!0,expandTrigger:"hover"},clearable:""},model:{value:e.searchParams,callback:function(t){e.searchParams=t},expression:"searchParams"}})],1),n("div",{staticClass:"right-btn"},[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"client.proxyCompany.add",expression:"'client.proxyCompany.add'"}],staticClass:"but-91",on:{click:e.newlyAdded}},[e._v("新增")]),n("el-button",{staticClass:"but-91",on:{click:e.emptyBtn}},[e._v("重置")]),n("el-button",{directives:[{name:"has",rawName:"v-has",value:"client.proxyCompany.list",expression:"'client.proxyCompany.list'"}],staticClass:"but-91",on:{click:e.queryList}},[e._v("查询")])],1)],1),n("div",{staticClass:"tableContent"},[n("el-table",{ref:"tableRef",staticClass:"table",attrs:{data:e.listData,size:"medium","header-cell-style":{background:"#fff",color:"#333"}}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:e.indexMethod}}),n("el-table-column",{attrs:{label:"客户编号",prop:"clientCompany.clientCompanyId",align:"center"}}),n("el-table-column",{attrs:{label:"客户名称",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("zm-tooltip",{staticClass:"wid190",attrs:{content:t.row.clientCompany.clientCompanyName,refName:"supplierName"},on:{click:function(n){return e.seeDetails(t.row)}}})]}}])}),n("el-table-column",{attrs:{label:"行业大类",prop:"clientCompany.industryType",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.getqueryLabelById(e.industryTypeList,t.row.clientCompany.industryType)))])]}}])}),n("el-table-column",{attrs:{label:"行业小类",prop:"clientCompany.industrySubType",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.getqueryLabelById(e.industrySubTypeList,t.row.clientCompany.industrySubType)))])]}}])}),n("el-table-column",{attrs:{label:"统一社会信用编码",prop:"clientCompany.creditCode",align:"left"}}),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{directives:[{name:"has",rawName:"v-has",value:"client.proxyCompany.info",expression:"'client.proxyCompany.info'"}],staticClass:"customBtn",attrs:{size:"medium"},on:{click:function(n){return e.seeDetails(t.row)}}},[e._v("详情")]),n("el-dropdown",{directives:[{name:"has",rawName:"v-has",value:"client.proxyCompany.edit,client.proxyCompany.delete",expression:"'client.proxyCompany.edit,client.proxyCompany.delete'"}],on:{command:e.handleCommand}},[n("span",{directives:[{name:"has",rawName:"v-has",value:"client.proxyCompany.edit,client.proxyCompany.delete",expression:"'client.proxyCompany.edit,client.proxyCompany.delete'"}],staticClass:"customBtn",staticStyle:{"margin-left":"10px"},attrs:{size:"medium",type:"primary"}},[e._v(" 更多 "),n("i",{staticClass:"el-icon-caret-bottom"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"client.proxyCompany.edit",expression:"'client.proxyCompany.edit'"}],attrs:{command:e.beforeHandleCommand(t.row,"a")}},[e._v("编辑")]),n("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"client.proxyCompany.delete",expression:"'client.proxyCompany.delete'"}],attrs:{command:e.beforeHandleCommand(t.row,"b")}},[e._v("删除")])],1)],1)]}}])})],1),n("el-dialog",{staticStyle:{"margin-top":"100px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,width:"30%",visible:e.dialogFormVisible},on:{close:e.closeRest,"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"formData",attrs:{rules:e.rulesDialog,model:e.formData,"label-width":"150px"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"客户编号"}},[e.formData.clientCompanyId&&""!=e.formData.clientCompanyId?n("el-input",{attrs:{disabled:""},model:{value:e.formData.clientCompanyId,callback:function(t){e.$set(e.formData,"clientCompanyId",t)},expression:"formData.clientCompanyId"}}):n("el-input",{attrs:{disabled:"",placeholder:"无需填写，系统生成"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"客户名称",prop:"clientCompanyName"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.clientCompanyName,callback:function(t){e.$set(e.formData,"clientCompanyName",t)},expression:"formData.clientCompanyName"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"所属行业",prop:"industryAll"}},[n("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.queryIndustryTreeArr},on:{change:e.clearTxt},model:{value:e.formData.industryAll,callback:function(t){e.$set(e.formData,"industryAll",t)},expression:"formData.industryAll"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"统一社会信用编码",prop:"creditCode"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入",maxlength:"18"},model:{value:e.formData.creditCode,callback:function(t){e.$set(e.formData,"creditCode",t)},expression:"formData.creditCode"}})],1)],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("Debounce",{attrs:{time:5100}},[n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.preserveBtn("formData")}}},[e._v("提 交")])],1)],1)],1),n("el-dialog",{staticStyle:{"margin-top":"100px"},attrs:{title:"查看代理客户","close-on-click-modal":!1,width:"30%",visible:e.dialogDetailsVisible},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[e.currentClientObj.clientCompany?n("div",{staticClass:"dialog-details"},[n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dialog-content"},[e._v(" 客户编号："),n("span",[e._v(e._s(e.currentClientObj.clientCompany.clientCompanyId))])])])],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dialog-content"},[e._v(" 客户名称："),n("span",[e._v(e._s(e.currentClientObj.clientCompany.clientCompanyName))])])])],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dialog-content"},[e._v(" 行业大类: "),n("span",[e._v(e._s(e.getqueryLabelById(e.industryTypeList,e.currentClientObj.clientCompany.industryType)))])])])],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dialog-content"},[e._v(" 行业小类: "),n("span",[e._v(e._s(e.getqueryLabelById(e.industrySubTypeList,e.currentClientObj.clientCompany.industrySubType)))])])])],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dialog-content"},[e._v(" 统一社会信用编码: "),n("span",[e._v(e._s(e.currentClientObj.clientCompany.creditCode)+" ")])])])],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dialog-content"},[e._v(" 更新时间: "),n("span",[e._v(e._s(e.formateDate(e.currentClientObj.mdeUpdatedDate))+" ")])])])],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"dialog-content"},[e._v(" 更新人: "),n("span",[e._v(e._s(e.currentClientObj.mdeUpdatedBy)+" ")])])])],1),n("div",{staticClass:"dialog-footer"},[n("el-button",{staticClass:"but-91",on:{click:function(t){e.dialogDetailsVisible=!1}}},[e._v("关 闭")])],1)],1):e._e()])],1),n("div",{staticClass:"pagination-min"},[n("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[15,30,50],"page-size":e.pageSize,layout:"total,sizes, prev, pager, next, jumper",total:e.paginationData.rowCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)],1)},i=[],r=n("b85c"),o=(n("fb6a"),n("a434"),n("f6b0")),s=n("ed08"),l=n("a417"),c=n("5f98"),u=n("8952"),d={name:"AgentCustomer",components:{zmTooltip:u["a"]},data:function(){var e=this,t=function(t,n,a){""===n?a(new Error("请输入客户名称")):e.currentRegionName!=e.formData.clientCompanyName?Object(o["b"])({clientCompanyName:e.formData.clientCompanyName,clientSimpleName:"",creditCode:""}).then((function(e){e?a():a(new Error("此客户名称已存在！"))})):a()},n=function(t,n,a){console.log(n,e.editFormData.creditCode);var i=/^([1,5,9][1,2,3,9]|[2,3,4,6,7,8,A,B,C,D,E,G,Y]1)\d{6}[0-9A-HJ-NPQRTUWXY]{10}$/;""!==n?i.test(n)?n!=e.editFormData.creditCode?Object(o["b"])({clientCompanyName:"",clientSimpleName:"",creditCode:e.formData.creditCode}).then((function(e){e?a():a(new Error("此信用编码已存在！"))})):a():a(new Error("请输入正确的统一社会信用代码")):a(new Error("请输入信用编码"))};return{rulesDialog:{clientCompanyName:[{required:!0,validator:t,trigger:"change"}],industryAll:[{type:"array",required:!0,message:"请输入行业大类",trigger:"change"}],creditCode:[{required:!0,validator:n,trigger:"change"}]},dialogTitle:"新增代理客户",searchParams:[],listData:[],queryWorkplaceListData:{keyword:"",clientType:"IT_CLTP_002",industrySubType:"",industryType:"",displays:[]},finalWorkplaceArea:"",dialogFormVisible:!1,dialogDetailsVisible:!1,currentRegionName:"",currentRegionCode:"",formData:{clientCompanyName:"",industrySubType:"",industryType:"",creditCode:"",clientType:"IT_CLTP_002",industryAll:""},currentClientObj:{},customerNameList:[],paginationData:{},currentPage:1,pageSize:15,pageIndex:1,disabled:!1,industryTreeArr:[],queryIndustryTreeArr:[],editFormData:{}}},computed:{industryTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_IDST},industrySubTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_IDSB}},activated:function(){var e=this;this.$nextTick((function(){e.$refs.tableRef.doLayout()}))},created:function(){var e=this;Object(l["u"])().then((function(t){e.industryTreeArr=t,e.queryIndustryTreeArr=t})),this.baseList(this.pageIndex)},filters:{relationClass:function(e,t){var n,a=Object(r["a"])(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.value==e)return i.text}}catch(o){a.e(o)}finally{a.f()}},ellipsis:function(e){return e?e.length>8?e.slice(0,8)+"...":e:""}},methods:{indexMethod:function(e){return this.pageSize*this.paginationData.pageIndex+e-this.pageSize+1},clearTxt:function(){!this.formData.industryAll.length>0&&(this.formData.industryAll=[],this.formData.industrySubType="",this.formData.industryType=""),console.log(this.formData.industryAll)},getqueryLabelById:function(e,t){return Object(s["k"])(e,t)},baseList:function(e){var t=this;this.searchParams.length>0&&(this.queryWorkplaceListData={industryType:this.searchParams[0],industrySubType:this.searchParams[1],clientType:"IT_CLTP_002"}),Object(o["l"])({input:this.queryWorkplaceListData,nextToken:"",pageEnd:0,pageIndex:e,pageSize:this.pageSize,pageStart:0}).then((function(e){t.paginationData=e,t.listData=e.result}))},emptyBtn:function(){this.pageIndex=1,this.queryWorkplaceListData={keyword:"",clientType:"IT_CLTP_002",industrySubType:"",industryType:"",displays:[]},this.searchParams=[],this.baseList(this.pageIndex)},queryList:function(){this.baseList(this.pageIndex)},preserveBtn:function(e){var t=this;this.disabled=!0,console.log(this.formData.industryAll),this.$refs[e].validate((function(e){if(!e)return!1;t.formData.industrySubType=t.formData.industryAll[1],t.formData.industryType=t.formData.industryAll[0],Object(o["a"])({clientCompany:t.formData}).then((function(e){console.log(e),t.dialogFormVisible=!1,t.baseList(t.pageIndex),t.formData.clientCompanyId&&""!=t.formData.clientCompanyId?t.$message({message:"编辑成功!",type:"success"}):t.$message({message:"新增成功!",type:"success"})}))}))},newlyAdded:function(){this.dialogTitle="新增代理客户",this.dialogFormVisible=!0,this.formData={clientCompanyName:"",industrySubType:"",industryType:"",creditCode:"",clientType:"IT_CLTP_002"},void 0!=this.$refs["formData"]&&this.$refs["formData"].resetFields()},closeRest:function(){void 0!=this.$refs["formData"]&&this.$refs["formData"].resetFields(),this.editFormData={}},handleCommand:function(e){var t=this;if("a"==e.command){this.dialogTitle="编辑代理客户",this.dialogFormVisible=!0,this.formData=JSON.parse(JSON.stringify(e.item.clientCompany));var n=[this.formData.industryType,this.formData.industrySubType];this.formData.industryAll=n,this.currentRegionName=e.item.clientCompany.clientCompanyName||"",this.currentRegionCode=e.item.clientCompany.creditCode||"",this.editFormData.creditCode=this.formData.creditCode}else"b"==e.command&&this.$confirm("此操作将永久删除该数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["g"])({clientCompanyId:e.item.clientCompany.clientCompanyId}).then((function(e){t.baseList(t.pageIndex),t.$message({type:"success",message:"删除成功!"})}))}))},beforeHandleCommand:function(e,t){return{item:e,command:t}},seeDetails:function(e){Object(c["a"])("client.proxyCompany.info")&&(this.dialogDetailsVisible=!0,this.currentClientObj=e)},addClientResponsibl:function(){this.responsiblObj.push({workplaceAdminId:"",workplaceAdminType:"0",workplaceId:"",workplaceUserId:"",workplaceUserName:"",workplaceUserPhone:""})},addClientContact:function(){this.contactObj.push({workplaceAdminId:"",workplaceAdminType:"1",workplaceId:"",workplaceUserId:"",workplaceUserName:"",workplaceUserPhone:""})},formateDate:function(e){function t(e){return e<10?"0"+e:e}var n=new Date(e),a=n.getFullYear()+"-"+t(n.getMonth()+1)+"-"+t(n.getDate());return a},delClientResponsibl:function(e){this.responsiblObj.splice(e,1)},delClientContact:function(e){this.contactObj.splice(e,1)},handleSizeChange:function(){this.baseList()},handleCurrentChange:function(e){this.baseList(e)}}},p=d,m=(n("cc95"),n("2877")),y=Object(m["a"])(p,a,i,!1,null,"7506592c",null);t["default"]=y.exports},cc95:function(e,t,n){"use strict";n("4ab5")},f6b0:function(e,t,n){"use strict";n.d(t,"l",(function(){return i})),n.d(t,"k",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"m",(function(){return l})),n.d(t,"n",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"p",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"w",(function(){return y})),n.d(t,"e",(function(){return f})),n.d(t,"t",(function(){return b})),n.d(t,"c",(function(){return C})),n.d(t,"h",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"s",(function(){return v})),n.d(t,"r",(function(){return D})),n.d(t,"v",(function(){return w})),n.d(t,"x",(function(){return T})),n.d(t,"j",(function(){return x})),n.d(t,"u",(function(){return O})),n.d(t,"q",(function(){return k}));var a=n("b775");function i(e){return Object(a["a"])({url:"/business/client/queryClientCompanyList",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/business/client/queryClientCompanyInfo",method:"post",params:e})}function o(e){return Object(a["a"])({url:"/business/client/saveOrUpdateClientCompany",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/business/client/removeClientCompany",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/business/contract/queryContractListByClientId",method:"post",params:e})}function c(e){return Object(a["a"])({url:"/business/contract/queryContractCompanyListByClientId",method:"post",params:e})}function u(e){return Object(a["a"])({url:"/business/client/checkReClientCompanyInfo",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/business/client/queryClientCompanyWorkplaceListByClientCompanyId",method:"post",params:e})}function p(e){return Object(a["a"])({url:"/business/scope/queryClientOrgList",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/business/scope/createClientOrg",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/business/scope/updateClientOrg",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/business/scope/createContractOrg",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/business/scope/queryContractOrgListById",method:"post",params:e})}function C(e){return Object(a["a"])({url:"/business/scope/closeClientOrg",method:"post",params:e})}function h(e){return Object(a["a"])({url:"/business/scope/deleteContractOrg",method:"post",params:e})}function g(e){return Object(a["a"])({url:"/business/scope/deleteClientOrg",method:"post",params:e})}function v(e){return Object(a["a"])({url:"/business/scope/queryContractOrgList",method:"post",data:e})}function D(e){return Object(a["a"])({url:"/business/clientlevel/queryClientTwoLevelList",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/business/clientlevel/save",method:"post",data:e})}function T(e){return Object(a["a"])({url:"/business/clientlevel/update",method:"post",data:e})}function x(e){return Object(a["a"])({url:"/business/clientlevel/detail",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/business/clientlevel/remove",method:"post",data:e})}function k(e){return Object(a["a"])({url:"/business/clientlevel/queryClientTwoLevelBySelect",method:"post",data:e})}}}]);