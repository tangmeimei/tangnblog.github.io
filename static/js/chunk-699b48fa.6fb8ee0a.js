(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-699b48fa"],{2538:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.queryListData,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"准客户名称",prop:"keyword"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:""},model:{value:t.queryListData.clientCompanyName,callback:function(e){t.$set(t.queryListData,"clientCompanyName",e)},expression:"queryListData.clientCompanyName"}},t._l(t.customerNameList,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业类型"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryListData.companyNature,callback:function(e){t.$set(t.queryListData,"companyNature",e)},expression:"queryListData.companyNature"}},t._l(t.companyNatureTypeList,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所属行业"}},[a("el-cascader",{attrs:{options:t.industryTreeArr,props:{checkStrictly:!0,expandTrigger:"hover"},clearable:""},on:{change:t.clearTxt},model:{value:t.searchParams,callback:function(e){t.searchParams=e},expression:"searchParams"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"风险属性"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryListData.isRisk,callback:function(e){t.$set(t.queryListData,"isRisk",e)},expression:"queryListData.isRisk"}},t._l(t.isRiskTypeList,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,value:t.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业所在地"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"",options:t.regionOptions,props:{expandTrigger:"hover"}},model:{value:t.queryListData.registerAddress,callback:function(e){t.$set(t.queryListData,"registerAddress",e)},expression:"queryListData.registerAddress"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"建档审核状态"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryListData.clientAuditStatus,callback:function(e){t.$set(t.queryListData,"clientAuditStatus",e)},expression:"queryListData.clientAuditStatus"}},t._l(t.vmClientStatus,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商机审核状态"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryListData.newsAuditStatus,callback:function(e){t.$set(t.queryListData,"newsAuditStatus",e)},expression:"queryListData.newsAuditStatus"}},t._l(t.vmClientStatus,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请人",prop:"applicantNames"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:""},model:{value:t.queryListData.applicantNames,callback:function(e){t.$set(t.queryListData,"applicantNames",e)},expression:"queryListData.applicantNames"}},t._l(t.applicantList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1)],1)],1)],1),a("div",{staticClass:"right-btn"},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.add",expression:"'vmClient.company.add'"}],staticClass:"but-91",on:{click:t.newlyAdded}},[t._v("新增")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.export",expression:"'vmClient.company.export'"}],staticClass:"but-91",on:{click:t.exportData}},[t._v("导出")]),a("el-button",{staticClass:"but-91",on:{click:t.emptyBtn}},[t._v("重置")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.list",expression:"'vmClient.company.list'"}],staticClass:"but-91",on:{click:t.queryList}},[t._v("查询")])],1)],1),a("div",[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.listData,size:"medium",height:"535px","header-cell-style":{background:"#fff",color:"#333"}},on:{"sort-change":t.onSortChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:t.indexMethod}}),a("el-table-column",{attrs:{label:"准客户名称",width:"200",prop:"clientCompanyName",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.clientCompanyName,placement:"top"}},[a("span",[t._v(t._s(t._f("ellipsis")(e.row.clientCompanyName)))])])]}}])}),a("el-table-column",{attrs:{label:"企业类型",prop:"companyNature",align:"center",width:"120",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.companyNatureTypeList,e.row.companyNature)))])]}}])}),a("el-table-column",{attrs:{label:"所属行业",prop:"industryType",align:"center",width:"120",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.industryTypeList,e.row.industryType))+"-"+t._s(t.getqueryLabelById(t.industrySubTypeList,e.row.industrySubType)))])]}}])}),a("el-table-column",{attrs:{label:"风险属性",prop:"isRisk",align:"center",width:"160",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.isRiskTypeList,e.row.isRisk)))])]}}])}),a("el-table-column",{attrs:{label:"建档时间",prop:"clientCreateTime",align:"center",sortable:"custom",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.clientCreateTime))])]}}])}),a("el-table-column",{attrs:{label:"申请人",prop:"applicantUserName",align:"center"}}),a("el-table-column",{attrs:{label:"建档状态",prop:"clientAuditStatus",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.vmClientStatus,e.row.clientAuditStatus)))])]}}])}),a("el-table-column",{attrs:{label:"商机状态",prop:"newsAuditStatus",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.vmClientStatus,e.row.newsAuditStatus)))])]}}])}),a("el-table-column",{attrs:{label:"最后更新时间",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.clientUpdateTime))])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["IT_VCAS_002"!=e.row.clientAuditStatus?a("span",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.doc.audit",expression:"'vmClient.company.doc.audit'"}],staticClass:"customBtn",attrs:{size:"small"},on:{click:function(a){return t.seeDetails(e.row,"doc.audit")}}},[t._v(" 建档审核 ")]):a("span",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.status.audit",expression:"'vmClient.company.status.audit'"}],staticClass:"customBtn",attrs:{size:"small"},on:{click:function(a){return t.seeDetails(e.row,"status.audit")}}},[t._v(" 商机审核 ")]),e.row.applicantUserId==t.currentUser.userId||t.dataRanges["vmClient.company.resources"]&&!t.dataRanges["vmClient.company.resources"].me?a("el-dropdown",{on:{command:t.handleCommand}},[a("span",{staticClass:"customBtn",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"}},[t._v(" 更多 "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["IT_VCAS_003"!=e.row.newsAuditStatus?a("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.edit",expression:"'vmClient.company.edit'"}],attrs:{command:t.beforeHandleCommand(e.row,"a")}},[t._v("编辑")]):t._e(),a("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.info",expression:"'vmClient.company.info'"}],attrs:{command:t.beforeHandleCommand(e.row,"b")}},[t._v("详情")]),a("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.delete",expression:"'vmClient.company.delete'"}],attrs:{command:t.beforeHandleCommand(e.row,"c")}},[t._v("删除")])],1)],1):t._e()]}}])})],1)],1),a("div",{staticClass:"pagination-min"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":t.sizeList,layout:"total, sizes, prev, pager, next, jumper",total:t.paginationData.rowCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}})],1)],1)},s=[],i=a("b85c"),r=(a("fb6a"),a("ac1f"),a("1276"),a("159b"),a("d3b7"),a("a434"),a("25f0"),a("2b6d")),o=a("a417"),l=a("ed08"),u=a("c24f"),c=a("a826"),d={data:function(){return{currentUser:{},dataRanges:[],regionOptions:[],auditStatusTypeList:[],newsAuditStatusTypeList:[],listData:[],applicantList:[],customerNameList:[],industryTreeArr:[],searchParams:[],queryListData:{clientCompanyName:"",companyNature:"",industrySubType:"",industryType:"",isRisk:"",notEqualNewsAuditStatus:"IT_VCAS_002",registerAddress:"",clientAuditStatus:"",newsAuditStatus:"",applicantNames:"",displays:[{display:"desc",field:"clientUpdateTime"},{display:"desc",field:"clientAuditStatus"},{display:"desc",field:"newsAuditStatus"}]},sortData:[],paginationData:{},sizeList:[15,30,50],currentPage:1,pageSize:15,pageIndex:1}},components:{zmSelectVcusers:c["a"]},computed:{companyNatureTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_CPNT},industryTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_IDST},industrySubTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_IDSB},isRiskTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_FXKH},vmClientStatus:function(){return this.$store.state.baseData.baseDataOptionList.IT_VCAS}},created:function(){var t=this;this.regionOptions=Object(l["i"])("cityTree"),Object(o["u"])().then((function(e){t.industryTreeArr=e})),Object(r["n"])({notEqualNewsAuditStatus:"2"}).then((function(e){var a=e[0]||"";t.customerNameList=a.clients;var n=a.applicantUsers,s=[];for(var i in n)s.push({id:i,value:n[i]});t.applicantList=s})),this.currentUser=this.$store.state.user.userInfo,Object(u["a"])().then((function(e){t.dataRanges=e.dataRanges})),this.baseList(this.pageIndex,2),window.addEventListener("resize",this.handleResize)},filters:{relationClass:function(t,e){var a,n=Object(i["a"])(e);try{for(n.s();!(a=n.n()).done;){var s=a.value;if(s.value==t)return s.text}}catch(r){n.e(r)}finally{n.f()}},ellipsis:function(t){return t?t.length>12?t.slice(0,12)+"...":t:""}},methods:{indexMethod:function(t){return this.pageSize*this.paginationData.pageIndex+t-this.pageSize+1},handleResize:function(){var t=this;this.$refs.table&&this.$nextTick((function(){t.$refs.table.doLayout()}))},remoteMethod:function(t){},exportData:function(){this.baseList(this.pageIndex,1)},getqueryLabelById:function(t,e){return Object(l["k"])(t,e)},baseList:function(t,e){var a=this;this.searchParams.length>0&&(this.queryListData.industryType=this.searchParams[0],this.queryListData.industrySubType=this.searchParams[1]);var n=JSON.parse(JSON.stringify(this.queryListData));n.applicantNames=""==n.applicantNames?[]:this.queryListData.applicantNames.split(",");var s=Object(l["i"])("cityTree"),i=[];n.registerAddress.length>0&&n.registerAddress.forEach((function(t){i.push(Object(l["b"])(s,t))})),n.registerAddress=i.toString(),2==e?Object(r["l"])({input:n,nextToken:"",pageEnd:0,pageIndex:t,pageSize:this.pageSize,pageStart:0}).then((function(t){a.paginationData=t,a.listData=t.result})):(n.queryTag1=1,Object(r["c"])({input:n,nextToken:"",pageEnd:0,pageIndex:this.currentPage,pageSize:this.pageSize,pageStart:0}).then((function(t){if(200==t.code){var e=t.msg,a="https://www.tobowork.com//api/tobosoft-toms/commons/exportfile/download?delete=true&fileName="+e,n=document.createElement("a");n.setAttribute("download",e),n.href=a,document.body.appendChild(n),n.click(),n.remove()}})))},emptyBtn:function(){this.searchParams=[],this.queryListData={clientCompanyName:"",companyNature:"",industrySubType:"",industryType:"",isRisk:"",notEqualNewsAuditStatus:"IT_VCAS_002",registerAddress:"",clientAuditStatus:"",newsAuditStatus:"",applicantNames:"",displays:[{display:"desc",field:"clientUpdateTime"},{display:"desc",field:"clientAuditStatus"},{display:"desc",field:"newsAuditStatus"}]},this.$refs.selectVcusers.emptySelectValue(),this.baseList(this.pageIndex,2)},queryList:function(){this.baseList(this.pageIndex,2)},preserveBtn:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;addOrEditCustomer({clientCompany:e.formData}).then((function(t){e.dialogFormVisible=!1,e.baseList(e.pageIndex,2)}))}))},newlyAdded:function(t){this.$router.push({path:"/business/newlyAdded",query:{from:"profile"}})},handleCommand:function(t){var e=this;if("a"==t.command)this.$router.push({path:"/business/editlyAdded",query:{id:t.item.clientCompanyId,from:"profile"}});else if("b"==t.command){JSON.stringify(t.item);this.$router.push({path:"/business/info",query:{id:t.item.clientCompanyId,type:0,from:"profile"}})}else"c"==t.command&&this.$confirm("此操作将永久删除该数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["o"])({clientCompanyId:t.item.clientCompanyId}).then((function(t){e.baseList(e.pageIndex,2),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(t){}))},clearTxt:function(){this.queryListData.industryType="",this.queryListData.industrySubType=""},beforeHandleCommand:function(t,e){return{item:t,command:e}},seeDetails:function(t,e){this.$router.push({path:"/business/audit",query:{id:t.clientCompanyId,from:"audit",tag:e}})},onSortChange:function(t){var e=this;this.sortData=[];var a="";a="ascending"===t.order?"asc":"desc";var n={display:a,field:t.prop};0===this.sortData.length?this.sortData.push(n):this.sortData.forEach((function(t,a){if(t.field===n.field){if(t.display===n.display)return void e.sortData.splice(a,1);e.sortData.splice(a,1),e.sortData.push(n)}else e.sortData.push(n)})),this.queryListData.displays=this.sortData,this.sortQueryVmClientList()},sortQueryVmClientList:function(){var t=this;this.queryListData.applicantNames=""==this.queryListData.applicantNames?[]:this.queryListData.applicantNames.split(","),Object(r["l"])({input:this.queryListData,nextToken:"",pageEnd:0,pageIndex:this.pageIndex,pageSize:this.pageSize,pageStart:0}).then((function(e){t.paginationData=e,t.listData=e.result,t.queryListData.applicantNames=t.queryListData.applicantNames.toString()}))},handleSizeChange:function(){this.baseList(this.pageIndex,2)},handleCurrentChange:function(t){this.baseList(t,2),this.currentPage=t},getSelectValueVcusers:function(t){this.queryListData.clientCompanyName=t}},watch:{$route:function(){this.baseList(this.pageIndex,2)}}},p=d,m=(a("8a8c"),a("2877")),f=Object(m["a"])(p,n,s,!1,null,"3412760f",null);e["default"]=f.exports},"2b6d":function(t,e,a){"use strict";a.d(e,"l",(function(){return s})),a.d(e,"k",(function(){return i})),a.d(e,"o",(function(){return r})),a.d(e,"p",(function(){return o})),a.d(e,"q",(function(){return l})),a.d(e,"r",(function(){return u})),a.d(e,"m",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"t",(function(){return p})),a.d(e,"i",(function(){return m})),a.d(e,"c",(function(){return f})),a.d(e,"b",(function(){return y})),a.d(e,"n",(function(){return h})),a.d(e,"d",(function(){return b})),a.d(e,"e",(function(){return v})),a.d(e,"f",(function(){return g})),a.d(e,"s",(function(){return S})),a.d(e,"j",(function(){return C})),a.d(e,"g",(function(){return L})),a.d(e,"h",(function(){return w}));a("99af");var n=a("b775");function s(t){return Object(n["a"])({url:"/business/vmclient/queryVmClientList",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/business/vmclient/queryVmClientInfo",method:"post",params:t})}function r(t){return Object(n["a"])({url:"/business/vmclient/removeVmClientCompany",method:"post",params:t})}function o(t){return Object(n["a"])({url:"/business/vmclient/removeVmClientTail",method:"post",params:t})}function l(t){return Object(n["a"])({url:"/business/vmclient/saveOrUpdateVmClient",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/business/vmclient/saveOrUpdateVmClientTail",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/business/vmclient/queryVmClientTailList",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/business/vmclient/clientFlow",method:"post",params:t})}function p(t){return Object(n["a"])({url:"/business/vmclient/updateNewsStatus",method:"post",params:t})}function m(t){return Object(n["a"])({url:"/business/vmclient/newsFlow",method:"post",params:t})}function f(t){return Object(n["a"])({url:"/business/vmclient/exportVmClientList",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/commons/exportfile/download",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/business/vmclient/queryVmClientUsers",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/commons/tianyancha/getBaseInfoV2",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/commons/tianyancha/getCompanyLawSuit",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/commons/tianyancha/getCompanyProfile",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/commons/tianyancha/searchCompany",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/business/client/queryClientCompanySelectListByOrgId",method:"post",data:t})}function L(t){return Object(n["a"])({url:"/business/contract/getContractPrice?cityCn=".concat(t.cityCn,"&contractId=").concat(t.contractId,"&jobCn=").concat(t.jobCn,"&jobLevel=").concat(t.jobLevel),method:"post"})}function w(t){return Object(n["a"])({url:"/business/contract/queryContractPriceDimension?contractId=".concat(t.contractId),method:"post"})}},"8a8c":function(t,e,a){"use strict";a("c3ef")},a826:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",t._b({staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","remote-method":t.remoteMethod},on:{clear:t.clear,change:t.getSelectValue},model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}},"el-select",t.$attrs,!1),t._l(t.optionSelectList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.clientCompanyName,value:t.clientCompanyName}})})),1)},s=[],i=a("2b6d"),r={props:{type:{type:String}},data:function(){return{selectValue:"",optionSelectList:[]}},mounted:function(){this.getOptionSelectList(),console.log("type",this.type)},methods:{emptySelectValue:function(){this.selectValue=""},getSelectValue:function(t){console.log("selectValue",t),this.$emit("getSelectValue",t)},getOptionSelectList:function(t){var e,a=this;"customerProfile"==this.type&&(e={notEqualNewsAuditStatus:"2"}),"cutomerResources"==this.type&&(e={clientAuditStatus:"2",newsAuditStatus:"2"}),void 0!=e&&(e.clientCompanyName=t||"",Object(i["n"])(e).then((function(t){var e=t;a.optionSelectList=e})))},remoteMethod:function(t){this.getOptionSelectList(t)},clear:function(){this.getOptionSelectList()},focus:function(){this.getOptionSelectList()}}},o=r,l=a("2877"),u=Object(l["a"])(o,n,s,!1,null,null,null);e["a"]=u.exports},c24f:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("b775");function s(){return Object(n["a"])({url:"/system/user/me",method:"post"})}},c3ef:function(t,e,a){}}]);