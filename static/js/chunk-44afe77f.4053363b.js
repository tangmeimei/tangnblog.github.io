(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44afe77f"],{1:function(e,t){},"155c":function(e,t,a){},2:function(e,t){},3:function(e,t){},"389c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"部门名称",prop:"cityName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入部门名称"},model:{value:e.queryListPa.orgName,callback:function(t){e.$set(e.queryListPa,"orgName",t)},expression:"queryListPa.orgName"}})],1),a("el-form-item",{attrs:{label:"部门状态"}},[a("el-select",{model:{value:e.queryListPa.orgStatus,callback:function(t){e.$set(e.queryListPa,"orgStatus",t)},expression:"queryListPa.orgStatus"}},e._l(e.orgStatusData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),a("div",{staticClass:"right-btn"},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.org.add",expression:"'database.org.add'"}],staticClass:"but-91",attrs:{size:"mini"},on:{click:e.handleAdd}},[e._v("新 增")]),a("el-button",{staticClass:"but-91",attrs:{size:"mini"},on:{click:e.queryList}},[e._v("重置")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.org.list",expression:"'database.org.list'"}],staticClass:"but-91",attrs:{size:"mini"},on:{click:e.toNewProvince}},[e._v("查 询")])],1)],1),a("div",{staticClass:"table-min"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"border-radius":"6px"},attrs:{data:e.orgList,"row-key":"orgId","default-expand-all":!0,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"orgName",label:"部门名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"leaderName",label:"负责人","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"userSum",label:"部门人数","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"orgStatus",label:"状态","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getqueryLabelById(e.orgStatusData,t.row.orgStatus)))])]}}])}),a("el-table-column",{attrs:{prop:"orgType",label:"部门类型","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getqueryLabelById(e.orgTypeData,t.row.orgType)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"更新时间",align:"center",prop:"mdeUpdatedDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.formatDateTime(t.row.mdeUpdatedDate)))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.org.edit",expression:"'database.org.edit'"}],staticStyle:{color:"#078bfd","font-size":"14px"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.org.add",expression:"'database.org.add'"}],staticStyle:{color:"#078bfd","font-size":"14px"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleAdd(t.row)}}},[e._v("新增")]),null!=t.row.parentId&&""!=t.row.parentId?a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.org.delete",expression:"'database.org.delete'"}],staticStyle:{color:"#078bfd","font-size":"14px"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e(),e._e()]}}])})],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"722px","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t},close:e.handleClose}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[null!=e.formData.parentId&&""!=e.formData.parentId||this.isAdd?a("el-form-item",{attrs:{label:"上级部门",prop:"parentId"}},[a("treeselect",{staticStyle:{width:"200px"},attrs:{options:e.orgList,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级部门"},model:{value:e.formData.parentId,callback:function(t){e.$set(e.formData,"parentId",t)},expression:"formData.parentId"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"部门名称",prop:"orgName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入部门名称",maxlength:"50",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formData.orgName,callback:function(t){e.$set(e.formData,"orgName",t)},expression:"formData.orgName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"排列顺序",prop:"displayOrder"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入顺序",maxlength:"50",clearable:"",oninput:"value=value.replace(/[^\\d]/g,'')"},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formData.displayOrder,callback:function(t){e.$set(e.formData,"displayOrder",t)},expression:"formData.displayOrder"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人",prop:"leaderId",loading:e.leaderSelectLoading}},[a("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"","loading-text":"加载中......",placeholder:"请输入关键词","remote-method":e.remoteMethod},on:{change:e.handleChange},model:{value:e.formData.leaderId,callback:function(t){e.$set(e.formData,"leaderId",t)},expression:"formData.leaderId"}},e._l(e.userList,(function(e){return a("el-option",{key:e.userInfo.userId,attrs:{label:e.text,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话",prop:"leaderPhone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入联系电话",maxlength:"16"},model:{value:e.formData.leaderPhone,callback:function(t){e.$set(e.formData,"leaderPhone",t)},expression:"formData.leaderPhone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"leaderEmail"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入邮箱",maxlength:"50",onkeyup:"this.value=this.value.replace(/[\\u4e00-\\u9fa5]/g,'')"},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formData.leaderEmail,callback:function(t){e.$set(e.formData,"leaderEmail",t)},expression:"formData.leaderEmail"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"部门类型",prop:"orgType"}},[a("el-select",{staticClass:"inpWidth",attrs:{placeholder:"请输入部门类型",filterable:"",maxlength:"50",clearable:""},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formData.orgType,callback:function(t){e.$set(e.formData,"orgType",t)},expression:"formData.orgType"}},e._l(e.orgTypeData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"部门状态",prop:"orgStatus"}},[a("el-radio-group",{model:{value:e.formData.orgStatus,callback:function(t){e.$set(e.formData,"orgStatus",t)},expression:"formData.orgStatus"}},e._l(e.orgStatusData,(function(t,r){return a("el-radio",{key:r,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"but-90",on:{click:e.cancel}},[e._v("取 消")]),a("el-button",{staticClass:"but-90",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"授权",visible:e.authorizationModeShow,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.authorizationModeShow=t}}},[a("el-form",{ref:"formAuthorizationData",attrs:{model:e.formAuthorizationData,rules:e.authorizationRules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"选择角色",prop:"asdasdadasasdd"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.formAuthorizationData.asdasdadasasdd,callback:function(t){e.$set(e.formAuthorizationData,"asdasdadasasdd",t)},expression:"formAuthorizationData.asdasdadasasdd"}},e._l([{value:"1",label:"xx"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"but-90",attrs:{type:"primary"},on:{click:e.submitAuthorizationForm}},[e._v("确 定")]),a("el-button",{staticClass:"but-90",on:{click:function(t){e.authorizationModeShow=!1}}},[e._v("取 消")])],1)],1)],1)],1)},o=[],l=a("b85c"),s=a("5530"),i=a("1da1"),n=(a("96cf"),a("d81d"),a("99af"),a("159b"),a("ac1f"),a("5319"),a("b0c0"),a("a417")),d=a("ca17"),u=a.n(d),c=(a("542c"),a("ed08")),f=a("61f7"),m=(a("ba0f"),{components:{Treeselect:u.a},data:function(){return{inputValue:"",loading:!1,authorizationModeShow:!1,formAuthorizationData:{asdasdadasasdd:[]},authorizationRules:{asdasdadasasdd:[{type:"array",required:!0,message:"请选择角色",trigger:"change"}]},rules:{parentId:[{required:!0,message:"请选择上级部门",trigger:"blur"}],orgName:[{required:!0,message:"请选择部门名称",trigger:"blur",validator:!0}],displayOrder:[{required:!0,message:"请选择顺序",trigger:"blur"}],leaderPhone:[{required:!1,trigger:"change",validator:f["w"]}],leaderEmail:[{required:!1,trigger:"change",validator:f["h"]}]},open:!1,formData:{},orgList:[],queryListPa:{},title:"",roleList:[],userList:[],orgTypeArr:[],orgStatusArr:[],isAdd:!1,leaderName:"",leaderSelectLoading:!1}},computed:{orgTypeData:function(){return this.$store.state.baseData.baseDataOptionList.IT_OGTP},orgStatusData:function(){return this.$store.state.baseData.baseDataOptionList.IT_OGST}},created:function(){},mounted:function(){this.queryOrgData(),this.remoteMethod("")},methods:{formatDateTime:c["d"],remoteMethod:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.leaderSelectLoading=!0,a.next=3,Object(n["L"])({keyword:e});case 3:r=a.sent,t.leaderSelectLoading=!1,t.userList=Array.isArray(r)&&r.map((function(e){var t={};return t=Object.assign(t,e,e.userInfo),Object(s["a"])({text:"[".concat(e.userInfo.loginName,"] ").concat(e.userInfo.userName),value:e.userInfo.userId},t)}));case 6:case"end":return a.stop()}}),a)})))()},clickHandler:function(e){var t=e.target;"SPAN"==t.nodeName&&(t=e.target.parentNode),t.blur()},handleClose:function(){void 0!==this.$refs.formData&&this.$refs.formData.resetFields(),this.isAdd=!1},getqueryLabelById:function(e,t){return Object(c["k"])(e,t)},queryOrgData:function(){var e=this;Object(n["z"])(this.queryListPa).then((function(t){e.treeDate(t),e.orgList=t}))},treeDate:function(e){var t=this;e.forEach((function(e){0!=e.children.length?t.treeDate(e.children):delete e.children}))},queryOrgDataById:function(){var e=this;Object(n["z"])(this.queryListPa).then((function(t){e.orgList=t}))},visibleFormat:function(e,t){return"1"==e.status?"显示":"隐藏"},normalizer:function(e){return{id:e.orgId,label:e.orgName,children:e.children}},cancel:function(){this.open=!1,this.resetForm()},selected:function(e){this.form.icon=e},addSaveOrg:function(e){var t=this,a={parentId:e.parentId,orgName:e.orgName,displayOrder:e.displayOrder,leaderId:e.leaderId,leaderName:this.leaderName,leaderPhone:e.leaderPhone,leaderEmail:e.leaderEmail,orgType:e.orgType,orgStatus:e.orgStatus,orgId:e.orgId,children:[]};Object(n["V"])(a).then((function(a){t.$message({message:"".concat(e.orgId?"编辑成功":"新增成功"),type:"success"}),t.open=!1,t.leaderName="",t.queryOrgData()}))},handleChange:function(e){var t=this;e?this.userList.forEach((function(a){a.userInfo.userId==e&&(t.leaderName=a.userInfo.userName)})):this.leaderName=""},submitAuthorizationForm:function(){this.$refs["formAuthorizationData"].validate((function(e){}))},submitForm:function(){var e=this;this.$refs["formData"].validate((function(t){t&&(e.roleList.forEach((function(t,a){t.orgId==e.formData.leaderId&&(e.formData.leaderName=t.userInfo.userName)})),e.addSaveOrg(e.formData))}))},gotoAuthorization:function(){this.authorizationModeShow=!0,void 0!==this.$refs["formAuthorizationData"]&&this.$refs["formAuthorizationData"].resetFields(),this.formAuthorizationData={asdasdadasasdd:void 0}},handleAdd:function(e){this.isAdd=!0,this.open=!0,this.title="新增组织",this.resetForm(),e.orgId?this.formData.parentId=e.orgId||"":this.formData.parentId=null},resetForm:function(){this.formData={parentId:void 0,orgName:void 0,displayOrder:void 0,leaderId:void 0,leaderPhone:void 0,leaderEmail:void 0,orgType:void 0,orgStatus:"1"},void 0!==this.$refs["formData"]&&this.$refs["formData"].resetFields()},jsonOrStr:function(e,t){return e&&t?"j"==t?JSON.stringify(e):JSON.parse(e):null},handleUpdate:function(e){var t=this;this.title="编辑组织",this.resetForm(),Object(n["y"])({orgId:e.orgId}).then((function(a){t.formData=a;var r,o=!1,s=Object(l["a"])(t.userList);try{for(s.s();!(r=s.n()).done;){var i=r.value;if(i.userInfo.userId==e.leaderId){o=!1;break}o=!0}}catch(n){s.e(n)}finally{s.f()}o&&t.userList.push({userInfo:{value:t.formData.leaderId,text:t.formData.leaderName},text:t.formData.leaderName,value:t.formData.leaderId}),t.inputValue=t.formData.orgName,t.open=!0}))},handleDelete:function(e){var t=this;t.$confirm("确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["f"])({orgId:e.orgId}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.queryOrgData()}))}))},toNewProvince:function(){this.queryOrgDataById()},queryList:function(){this.queryListPa={},this.queryOrgData()},inputChange:function(e){var t=e.target;t.value=t.value.replace(/[^\u4E00-\u9FA5]/g,""),this.name=t.value}}}),p=m,h=(a("ba3e"),a("2877")),g=Object(h["a"])(p,r,o,!1,null,"f0c4f78a",null);t["default"]=g.exports},4:function(e,t){},5:function(e,t){},ba3e:function(e,t,a){"use strict";a("155c")}}]);