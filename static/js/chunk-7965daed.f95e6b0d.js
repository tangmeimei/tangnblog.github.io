(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7965daed"],{"09d1":function(t,e,n){"use strict";n("2d01")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"2d01":function(t,e,n){},"841c":function(t,e,n){"use strict";var a=n("d784"),r=n("825a"),i=n("1d80"),s=n("129f"),o=n("14c3");a("search",1,(function(t,e,n){return[function(e){var n=i(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,n):new RegExp(e)[t](String(n))},function(t){var a=n(e,t,this);if(a.done)return a.value;var i=r(t),u=String(this),c=i.lastIndex;s(c,0)||(i.lastIndex=0);var p=o(i,u);return s(i.lastIndex,c)||(i.lastIndex=c),null===p?-1:p.index}]}))},"84fb":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toms-container"},[n("div",{staticClass:"toms-list-searchWrap"},[n("zm-Search",{ref:"search",attrs:{inputList:t.inputList,btnConfig:t.btnConfig},on:{addCustomer:t.addCustomer,cityRemoteMethod:t.cityRemoteMethod,groupRemoteMethod:t.groupRemoteMethod,groupBlurFn:t.groupBlurFn,search:t.search,reset:t.resetTable}})],1),n("div",{staticClass:"toms-list-tableWrap"},[n("zm-table",{ref:"tableRef",staticStyle:{width:"100%"},attrs:{tableData:t.tableData,columns:t.columns,height:"550px",currentPage:t.pageData.pageIndex,pageSize:t.pageData.pageSize,total:t.pageData.pageCount,sizeList:t.sizeList},on:{editFn:t.editFn,viewFn:t.viewFn,deleteFn:t.deleteFn,handleCurrentChange:t.handleCurrentChange,sortChange:t.sortChange,handleSizeChange:t.handleSizeChange}})],1)])},r=[],i=n("1da1"),s=n("5530"),o=(n("96cf"),n("d81d"),n("ac1f"),n("841c"),n("159b"),n("a434"),n("8cc7")),u=n("a937"),c=(n("1276"),n("a15b"),n("ed08")),p=n("5f98"),l=n("4360"),d=(l["a"].state.baseData.baseDataOptionList.IT_CPSC,l["a"].state.baseData.baseDataOptionList.IT_RISK),h=l["a"].state.baseData.baseDataOptionList.IT_CLST,m=l["a"].state.baseData.baseDataOptionList.IT_FNLV,f=l["a"].state.baseData.baseDataOptionList.IT_COPT,b=l["a"].state.baseData.baseDataOptionList.IT_SCLV,y=l["a"].state.baseData.baseDataOptionList.IT_CPNT,g=l["a"].state.baseData.baseDataOptionList.IT_IDST,C=l["a"].state.baseData.baseDataOptionList.IT_IDSB,v=function(t){return[{type:"text-input",bind_key:"keyword",label:"客户名称",placeholder:"客户名称/简称",span:6},{type:"select-input",bind_key:"scaleType",label:"规模等级",optionList:b,span:6},{type:"select-input",bind_key:"customerStatus",label:"客户状态",span:6,optionList:h},{type:"select-input",bind_key:"financeType",label:"财务等级",span:6,optionList:m},{type:"remote-input",bind_key:"operatingArea",label:"运营城市",remoteMethod:"cityRemoteMethod",blurChangeFn:"blurChangeFn",span:6,optionList:t.cityOptionList},{type:"select-input",bind_key:"cooperationMode",label:"合作方式",span:6,optionList:f},{type:"remote-input",bind_key:"clientGroupId",remoteMethod:"groupRemoteMethod",blurChangeFn:"groupBlurFn",label:"所属集团",span:6,optionList:t.groupList},{type:"cascader-input",bind_key:"industry",label:"所属行业",span:6,optionList:t.industryTreeData,checkStrictly:!0}]},O={span:24,customList:[{role:"client.company.add",customBtnText:"新增",changeFn:"addCustomer"}]},D=function(t){return[{label:"序号",kind:"render",fixed:"left",width:"50px",render:function(e,n){return e("span",t.indexMethod(n.$index))}},{label:"客户简称",prop:"clientSimpleName",kind:"render",width:"190px",render:function(e,n){return e("span",{class:{clickHover:!0},style:{color:"#078BFD",cursor:"pointer"},on:{click:function(){var e=Object(p["a"])("client.company.info");e&&t.$router.push({path:"/customer/detailCustomer",query:{id:n.row.clientCompanyId}})}}},n.row.clientSimpleName)}},{label:"所属集团",prop:"clientGroupName",sortable:"custom",minWidth:"140px",align:"left"},{label:"运营城市",prop:"operatingArea",kind:"render",render:function(t,e){var n=e.row.operatingArea.split(",")||[],a=n[1];return t("span",a)}},{label:"行业大类",prop:"industryType",kind:"render",align:"left",render:function(t,e){var n=Object(c["k"])(g,e.row.industryType);return t("span",{},n)}},{label:"行业小类",prop:"industrySubType",align:"left",kind:"render",render:function(t,e){var n=Object(c["k"])(C,e.row.industrySubType);return t("span",{},n)}},{label:"合作方式",prop:"cooperationMode",align:"left",kind:"render",render:function(t,e){var n=Object(c["k"])(f,e.row.cooperationMode);return t("span",{},n)}},{label:"企业性质",prop:"companyNature",align:"left",kind:"render",render:function(t,e){var n=Object(c["k"])(y,e.row.companyNature);return t("span",{},n)}},{label:"客户状态",prop:"customerStatus",align:"left",kind:"render",minWidth:"94px",render:function(t,e){var n=Object(c["k"])(h,e.row.customerStatus);return t("span",{},n)}},{label:"规模等级",kind:"tipHeader",minWidth:"120px",prop:"companyScale",align:"center",sortable:"custom",renderHeader:function(t,e){var n=e.column,a="S(目标500人以上或年销售额1亿以上) \n A(目标200人以上或年销售额4000万以上) \n B(目标50人以上或年销售额1000万以上) \n C(目标10人以上或年销售额200万以上)  \n D(目标10人以上或年销售额200万以下)";return t("div",{style:{display:"inline-block"}},[t("span",n.label),t("el-tooltip",{props:{placement:"top"}},[t("div",{slot:"content",style:{width:"250px",whiteSpace:"pre-wrap","margin-bottom":"10px"}},a),t("i",{class:"el-icon-question",style:"color: #cccccc; margin-left: 5px;"})])])},render:function(t,e){var n=Object(c["k"])(b,e.row.scaleType);return t("span",{},n)}},{label:"风险等级",prop:"riskType",minWidth:"120px",renderHeader:function(t,e){var n=e.column,a="高风险：企业财务状况出现明显问题，正常营业收入不足以保证付款\n中风险：企业财务状况正常，现金流较充足，基本不存在付款问题\n低风险：企业财务状况良好，现金流极充足，不存在任何影响付款问题\n无风险：企业财务状况良好，现金流极充足，不存在任何影响付款问题";return t("div",{style:{display:"inline-block"}},[t("span",n.label),t("el-tooltip",{props:{placement:"top"}},[t("div",{slot:"content",style:{width:"250px",whiteSpace:"pre-wrap","margin-bottom":"10px"}},a),t("i",{class:"el-icon-question",style:"color: #cccccc; margin-left: 5px;"})])])},kind:"render",render:function(t,e){var n=Object(c["k"])(d,e.row.riskType);return t("span",{},n)},sortable:"custom"},{label:"财务等级",prop:"financeType",minWidth:"120px",sortable:"custom",kind:"render",align:"left",render:function(t,e){var n=Object(c["k"])(m,e.row.financeType);return t("span",{},n)}},{label:"执行中合同",prop:"contractRunCount",sortable:"custom",minWidth:"120px",kind:"render",render:function(t,e){var n=e.row.contractRunNameTips&&e.row.contractRunNameTips.split(",")||[],a=n.length>0&&n.join("\n"),r=a||"--";return e.row.contractRunCount?t("el-tooltip",{props:{placement:"top"},class:"tipComment"},[t("div",{slot:"content",style:{whiteSpace:"pre-wrap"}},r),t("span",{style:{borderBottom:"1px dashed #333",padding:"3px"}},e.row.contractRunCount)]):t("span",{style:{borderBottom:"1px dashed #333",padding:"3px"}},e.row.contractRunCount)}},{label:"累计合同",prop:"contractTotalCount",sortable:"custom",minWidth:"100px",kind:"render",render:function(t,e){var n=e.row.contractTotalNameTips&&e.row.contractTotalNameTips.split(",")||[],a=n.length>0&&n.join("\n"),r=a||"--";return e.row.contractTotalCount?t("el-tooltip",{props:{placement:"top"},class:"tipComment"},[t("div",{slot:"content",style:{whiteSpace:"pre-wrap"}},r),t("span",{style:{borderBottom:"1px dashed #333",padding:"3px"}},e.row.contractTotalCount)]):t("span",{style:{borderBottom:"1px dashed #333",padding:"3px"}},e.row.contractTotalCount)}},{label:"操作",fixed:"right",kind:"formatBtn",width:"120px",moreBtnRoles:"client.company.edit,client.company.delete,client.company.info",firstBtn:{text:"详情",role:"client.company.info",fn:"viewFn"},btnList:[{text:"编辑",fn:"editFn",role:"client.company.edit"},{text:"删除",fn:"deleteFn",role:"client.company.delete"}]}]},w=n("f6b0"),x=n("a417"),S=n("2f62"),T={name:"Customer",components:{zmTable:o["a"],zmSearch:u["a"]},data:function(){var t=v(this),e=D(this);return{inputList:t,btnConfig:O,tableData:[],columns:e,pageData:{pageIndex:1,pageSize:15,pageCount:0},sortData:[],sizeList:[15,30,50],cityOptionList:[],groupList:[],industryTreeData:[],searchParams:{}}},computed:Object(s["a"])({},Object(S["e"])("listCacheFlag",["isReloadCSM"])),beforeRouteEnter:function(t,e,n){n((function(t){console.log(t.isReloadCSM,"是否是新增或是编辑页面"),t.isReloadCSM&&(t.pageData.pageIndex=1,t.getCustomeData(),t.CHANGE_CSM_STATUS(!1))}))},activated:function(){var t=this;this.$nextTick((function(){t.$refs.tableRef.doLayoutTable()}))},mounted:function(){this.getCustomeData(),this.getIndustryData(),this.getSelectData()},destroy:function(){},methods:Object(s["a"])(Object(s["a"])({},Object(S["d"])("listCacheFlag",["CHANGE_CSM_STATUS"])),{},{indexMethod:function(t){return this.pageData.pageSize*this.pageData.pageIndex+t-this.pageData.pageSize+1},groupBlurFn:function(){this.getSelectData()},cityRemoteMethod:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a="",a="重庆"===t||"上海"===t||"北京"===t||"天津"===t?"1":"2",n.next=4,Object(x["N"])({regionName:t,regionLevel:a});case 4:r=n.sent,e.cityOptionList=Array.isArray(r)&&r.map((function(t){return{text:t.regionName,value:t.regionName}})),e.inputList=v(e);case 7:case"end":return n.stop()}}),n)})))()},getIndustryData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(x["u"])();case 2:n=e.sent,t.industryTreeData=n,t.inputList=v(t);case 5:case"end":return e.stop()}}),e)})))()},getSelectData:function(){var t=this,e={keyword:""};Object(x["t"])(e).then((function(e){var n=e&&e.map((function(t){return{text:t.clientGroupName,value:t.clientGroupId}}));t.groupList=n,t.inputList=v(t)})),this.cityRemoteMethod("")},groupRemoteMethod:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={keyword:t},Object(x["t"])(a).then((function(t){var n=t&&t.map((function(t){return{text:t.clientGroupName,value:t.clientGroupId}}));e.groupList=n,e.inputList=v(e)}));case 2:case"end":return n.stop()}}),n)})))()},getCustomeData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t||{},r={input:a},i=Object.assign({},e.pageData,r),i.input.displays=e.sortData,i.input.clientType="IT_CLTP_001",n.next=7,Object(w["l"])(i);case 7:o=n.sent,e.pageData.pageIndex=o.pageIndex,e.pageData.pageCount=o.rowCount,e.tableData=o.result&&o.result.map((function(t){return Object(s["a"])(Object(s["a"])({},t.clientCompany),t)}));case 11:case"end":return n.stop()}}),n)})))()},addCustomer:function(t){this.$router.push("/customer/newCustomer")},exportData:function(){var t=this.$refs["search"].getSearchData(),e=JSON.parse(JSON.stringify(t));e.industry&&(1===e.industry.length?e.industryType=e.industry[0]:(e.industryType=e.industry[0],e.industrySubType=e.industry[1]),delete e.industry),Object(w["exportVmClientList"])(e)},search:function(t){this.searchParams=JSON.parse(JSON.stringify(t)),this.handleSearchDate(),this.getCustomeData(this.searchParams)},handleSearchDate:function(){this.searchParams.industry&&(1===this.searchParams.industry.length?this.searchParams.industryType=this.searchParams.industry[0]:(this.searchParams.industryType=this.searchParams.industry[0],this.searchParams.industrySubType=this.searchParams.industry[1]),delete this.searchParams.industry)},handleSizeChange:function(t){this.handleSearchDate(),this.pageData.pageSize=t,this.getCustomeData(this.searchParams)},editFn:function(t){this.$router.push({path:"/customer/editCustomer",query:{id:t.clientCompanyId}})},viewFn:function(t){this.$router.push({path:"/customer/detailCustomer",query:{id:t.clientCompanyId}})},resetTable:function(){this.searchData={},this.searchParams={},this.pageData.pageIndex=1,this.getCustomeData()},deleteFn:function(t){var e=this,n={clientCompanyId:t.clientCompanyId};this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["g"])(n);case 2:t.sent,e.$message.success("删除成功"),e.getCustomeData();case 5:case"end":return t.stop()}}),t)}))))},handleCurrentChange:function(t){var e=this.$refs["search"].getSearchData(),n=JSON.parse(JSON.stringify(e));this.handleSearchDate(),this.pageData.pageIndex=t,this.getCustomeData(n)},sortChange:function(t){var e=this;console.log("sortChange"),this.sortData=[];var n="";n="ascending"===t.order?"asc":"desc";var a={display:n,field:t.prop};0===this.sortData.length?this.sortData.push(a):this.sortData.forEach((function(t,n){if(t.field===a.field){if(t.display===a.display)return void e.sortData.splice(n,1);e.sortData.splice(n,1),e.sortData.push(a)}else e.sortData.push(a)})),this.getCustomeData(this.searchParams)}})},j=T,k=(n("09d1"),n("2877")),L=Object(k["a"])(j,a,r,!1,null,null,null);e["default"]=L.exports},f6b0:function(t,e,n){"use strict";n.d(e,"l",(function(){return r})),n.d(e,"k",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"g",(function(){return o})),n.d(e,"m",(function(){return u})),n.d(e,"n",(function(){return c})),n.d(e,"b",(function(){return p})),n.d(e,"o",(function(){return l})),n.d(e,"p",(function(){return d})),n.d(e,"d",(function(){return h})),n.d(e,"w",(function(){return m})),n.d(e,"e",(function(){return f})),n.d(e,"t",(function(){return b})),n.d(e,"c",(function(){return y})),n.d(e,"h",(function(){return g})),n.d(e,"f",(function(){return C})),n.d(e,"s",(function(){return v})),n.d(e,"r",(function(){return O})),n.d(e,"v",(function(){return D})),n.d(e,"x",(function(){return w})),n.d(e,"j",(function(){return x})),n.d(e,"u",(function(){return S})),n.d(e,"q",(function(){return T}));var a=n("b775");function r(t){return Object(a["a"])({url:"/business/client/queryClientCompanyList",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/business/client/queryClientCompanyInfo",method:"post",params:t})}function s(t){return Object(a["a"])({url:"/business/client/saveOrUpdateClientCompany",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/business/client/removeClientCompany",method:"post",params:t})}function u(t){return Object(a["a"])({url:"/business/contract/queryContractListByClientId",method:"post",params:t})}function c(t){return Object(a["a"])({url:"/business/contract/queryContractCompanyListByClientId",method:"post",params:t})}function p(t){return Object(a["a"])({url:"/business/client/checkReClientCompanyInfo",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/business/client/queryClientCompanyWorkplaceListByClientCompanyId",method:"post",params:t})}function d(t){return Object(a["a"])({url:"/business/scope/queryClientOrgList",method:"post",data:t})}function h(t){return Object(a["a"])({url:"/business/scope/createClientOrg",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/business/scope/updateClientOrg",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/business/scope/createContractOrg",method:"post",data:t})}function b(t){return Object(a["a"])({url:"/business/scope/queryContractOrgListById",method:"post",params:t})}function y(t){return Object(a["a"])({url:"/business/scope/closeClientOrg",method:"post",params:t})}function g(t){return Object(a["a"])({url:"/business/scope/deleteContractOrg",method:"post",params:t})}function C(t){return Object(a["a"])({url:"/business/scope/deleteClientOrg",method:"post",params:t})}function v(t){return Object(a["a"])({url:"/business/scope/queryContractOrgList",method:"post",data:t})}function O(t){return Object(a["a"])({url:"/business/clientlevel/queryClientTwoLevelList",method:"post",data:t})}function D(t){return Object(a["a"])({url:"/business/clientlevel/save",method:"post",data:t})}function w(t){return Object(a["a"])({url:"/business/clientlevel/update",method:"post",data:t})}function x(t){return Object(a["a"])({url:"/business/clientlevel/detail",method:"post",data:t})}function S(t){return Object(a["a"])({url:"/business/clientlevel/remove",method:"post",data:t})}function T(t){return Object(a["a"])({url:"/business/clientlevel/queryClientTwoLevelBySelect",method:"post",data:t})}}}]);