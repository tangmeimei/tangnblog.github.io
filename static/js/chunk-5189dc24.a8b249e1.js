(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5189dc24"],{4777:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"customer-container"},[r("div",{staticClass:"search-wrap"},[r("zm-Search",{ref:"search",attrs:{inputList:t.inputConfig,btnConfig:t.btnConfig},on:{search:t.search,reset:t.resetTable,batchFormal:t.batchFormal,formalDelay:t.formalDelay}})],1),r("div",{staticClass:"tableContent"},[r("zm-table",{ref:"tableRef",staticStyle:{width:"100%"},attrs:{"header-cell-style":{"text-align":"center"},tableData:t.tableData,columns:t.columnsList,height:"542px",isCheckboxGroup:!0,currentPage:t.pageData.pageIndex,pageSize:t.pageData.pageSize,total:t.pageData.pageCount,sizeList:t.sizeList},on:{handleCurrentChange:t.handleCurrentChange,sortChange:t.sortChange,handleSizeChange:t.handleSizeChange,selectionChange:t.selectionChange}})],1),r("el-dialog",{attrs:{title:"允许转正",visible:t.batchFormalVisible,width:"500px"},on:{"update:visible":function(e){t.batchFormalVisible=e}}},[r("div",[t._v(t._s(this.batchNameList))]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.batchFormalVisible=!1}}},[t._v("关闭")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleBatchFormal()}}},[t._v("确定")])],1)]),r("el-dialog",{attrs:{title:"延迟转正",visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{key:t.delayFlag,ref:"formalDelayData",attrs:{model:t.formalDelayData,rules:t.rules,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"姓名"}},[r("span",[t._v(t._s(t.formalDelayData.employName))])]),r("el-form-item",{attrs:{label:"入职日期"}},[r("span",[t._v(t._s(t._f("timeFormat")(t.formalDelayData.contractStartTime,"yyyy-mm-dd")))])]),r("el-form-item",{attrs:{label:"试用期到期日期"}},[r("span",[t._v(t._s(t._f("timeFormat")(t.formalDelayData.contractTrialOverTime,"yyyy-mm-dd")))])]),r("el-form-item",{attrs:{label:"延迟天数",prop:"employDelayDay"}},[r("el-input",{model:{value:t.formalDelayData.employDelayDay,callback:function(e){t.$set(t.formalDelayData,"employDelayDay",e)},expression:"formalDelayData.employDelayDay"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("关闭")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleDelay("formalDelayData")}}},[t._v("确定")])],1)],1),r("el-dialog",{attrs:{title:"交付异常",visible:t.deliverError,width:"500px"},on:{"update:visible":function(e){t.deliverError=e}}},[r("div",[t._v(t._s(this.deliverErrorList.join("，"))+"的所属交付异常，请先维护对应所属交付！")]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.deliverError=!1}}},[t._v("关闭")])],1)])],1)},o=[],n=r("3835"),i=r("1da1"),l=(r("a15b"),r("d81d"),r("d3b7"),r("159b"),r("a434"),r("96cf"),r("8cc7")),u=r("a937"),c=r("ed08"),s=r("5f98"),p=function(t){var e=t.$store.state.baseData.baseDataOptionList.IT_ZZZT;return[{type:"text-input",bind_key:"keyWord",label:"工号/姓名",placeholder:"工号/姓名",span:6},{type:"cascader-input",bind_key:"orgId",label:"所属部门",optionList:t.$store.state.baseData.orgTreeData[0].children,span:6,checkStrictly:!0,propLabel:"orgName",propValue:"orgId"},{type:"select-input",bind_key:"employFormalStatus",label:"转正状态",span:6,optionList:e},{type:"date-input",span:6,label:"入职时间段",inputWidth:240,labelWidth:80,bind_key:"entryTimes",datePickerType:"daterange"},{type:"radio-input",bind_key:"isChecked",inputLabel:"最近两周待转正",span:15,inputWidth:"auto",labelWidth:"0"}]},m=function(t){return{span:24,customList:[{customBtnText:"允许转正",changeFn:"batchFormal",role:"employ.formal.agree"},{customBtnText:"延迟转正",changeFn:"formalDelay",role:"employ.formal.delay"}],leftBtnHidden:!Object(s["a"])("employ.formal.list")}},d=function(t){return[{type:"selection",fixed:"left",width:"50px",selectable:function(t,e){return"允许转正"!==t.employFormalStatus}},{label:"序号",type:"index",fixed:"left",width:"50px",kind:"render",render:function(e,r){var a=r.$index+1,o=(t.pageData.pageIndex-1)*t.pageData.pageSize;return e("span",a+o)}},{label:"工号",prop:"employNo",width:"100px",align:"left",fixed:!0},{label:"姓名",prop:"employName",sortable:"custom",align:"left",fixed:!0},{label:"所属部门",prop:"orgCn",minWidth:"150px",align:"left"},{label:"客户简称",prop:"clientCompanyId",sortable:"custom",minWidth:120,align:"left"},{label:"客户分类",prop:"clientTwoLevelId",sortable:"custom",minWidth:120,align:"left"},{label:"结算岗位",prop:"companyJob",align:"left"},{label:"入职日期",prop:"contractStartTime",kind:"render",render:function(t,e){var r=Object(c["d"])(e.row.contractStartTime,"date");return t("span",r)}},{label:"试用到期日期",prop:"contractTrialOverTime",minWidth:110,kind:"render",render:function(t,e){var r=Object(c["d"])(e.row.contractTrialOverTime,"date");return t("span",r)}},{label:"转正剩余天数",minWidth:130,prop:"formalDay",sortable:"custom",kind:"render",render:function(t,e){var r="";return"CONST_BHR_2074"===e.row.formalBgStatus&&(r="red"),"CONST_BHR_2075"===e.row.formalBgStatus&&(r="yellow"),t("div",{style:{backgroundColor:r}},e.row.formalDay)}},{label:"转正状态",sortable:"custom",prop:"employFormalStatus",minWidth:100,align:"left"},{label:"所属交付",prop:"companyDeliver",sortable:"custom",minWidth:120,align:"left"}]},y=(r("a417"),r("dc27")),f=r("61f7"),h={name:"StayPositive",components:{zmTable:l["a"],zmSearch:u["a"]},data:function(){return{tableData:[],pageData:{pageIndex:1,pageSize:15,pageCount:0},sortData:[],sizeList:[15,30,50],searchData:{},optionList:[],btnStatus:!0,selectEmploy:[],dialogFormVisible:!1,batchFormalVisible:!1,batchNameList:"",formalDelayData:{employName:"",contractStartTime:"",contractTrialOverTime:"",employDelayDay:""},rules:{employDelayDay:[{required:!0,message:"请正确输入延迟天数",trigger:"change",validator:f["t"]},{required:!0,message:"最多一次可延长 92 天",trigger:"change",validator:function(t,e,r){var a=e<=92;return a?r():r(new Error("最多一次可延长 92 天"))}}]},delayFlag:100,deliverError:!1,deliverErrorList:[]}},computed:{columnsList:function(){return d(this)},inputConfig:function(){return p(this)},btnConfig:function(){return m(this)}},activated:function(){var t=this;this.$nextTick((function(){t.$refs.tableRef.doLayoutTable()}))},mounted:function(){this.getFormalData()},methods:{deleteChildren:c["c"],getFormalData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,o,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t||{},o={input:a},n=Object.assign({},e.pageData,o),n.input.displays=e.sortData,r.next=6,Object(y["F"])(n);case 6:i=r.sent,e.pageData.pageIndex=i.pageIndex,e.pageData.pageCount=i.rowCount,e.tableData=i.result;case 10:case"end":return r.stop()}}),r)})))()},batchFormal:function(){this.selectEmploy.length?(this.batchNameList=this.selectEmploy.map((function(t){return t.employName})).join("； "),this.batchFormalVisible=!0):this.$alert("请选择允许转正的员工，多选可以批量转正。","提示",{confirmButtonText:"我知道了"})},handleBatchFormal:function(){var t=this,e=this.selectEmploy.map((function(t){return t.employId}));Object(y["fb"])(e).then((function(e){console.log(e),"200"!==e.code?t.$message.error(e.msg||""):(t.$message.success(e.msg),t.getFormalData()),e.data&&e.data.length&&(t.deliverErrorList=e.data,t.deliverError=!0)})).finally((function(){t.batchFormalVisible=!1}))},formalDelay:function(){this.selectEmploy.length?this.selectEmploy.length>1?this.$alert("延迟转正请逐个设置，不要多选","提示",{confirmButtonText:"我知道了"}):(this.delayFlag+=1,this.selectEmploy[0].employDelayDay="",this.formalDelayData=this.selectEmploy[0],this.dialogFormVisible=!0,this.delayKey+=1):this.$alert("请先选择延迟转正的员工，再点击延迟转正。","提示",{confirmButtonText:"我知道了"})},handleDelay:function(t){var e=this,r={employFormalStatus:this.formalDelayData.employFormalStatus,employId:this.formalDelayData.employId,employDelayDay:this.formalDelayData.employDelayDay};this.$refs[t].validate((function(t){if(!t)return!1;Object(y["jb"])(r).then((function(t){"200"!==t.code?e.$message.error(t.msg||""):(e.$message.success(t.msg),e.getFormalData(),e.dialogFormVisible=!1),t.data&&t.data.length&&(e.deliverErrorList=t.data,e.deliverError=!0)})).finally((function(){}))}))},selectionChange:function(t){this.selectEmploy=t},search:function(t){var e=JSON.parse(JSON.stringify(t));if(e.orgId&&e.orgId.length?e.orgId=e.orgId[e.orgId.length-1]:delete e.orgId,e.entryTimes&&e.entryTimes.length){var r=Object(n["a"])(e.entryTimes,2),a=r[0],o=void 0===a?"":a,i=r[1],l=void 0===i?"":i;e.startTime=o,e.endTime=l,delete e.entryTimes}e.isChecked&&(e.isChecked=String(e.isChecked).toUpperCase()),this.searchData=e,this.getFormalData(e)},handleSizeChange:function(t){this.pageData.pageIndex=1,this.pageData.pageSize=t,this.getFormalData(this.searchData)},resetTable:function(){this.pageData.pageIndex=1,this.searchData={},this.getFormalData(this.searchData)},handleCurrentChange:function(t){this.pageData.pageIndex=t,this.getFormalData(this.searchData)},sortChange:function(t){var e=this;this.sortData=[];var r="";r="ascending"===t.order?"asc":"desc","formalDay"===t.prop&&(t.prop="formalAbsDay");var a={display:r,field:t.prop};0===this.sortData.length?this.sortData.push(a):this.sortData.forEach((function(t,r){if(t.field===a.field){if(t.display===a.display)return void e.sortData.splice(r,1);e.sortData.splice(r,1),e.sortData.push(a)}else e.sortData.push(a)})),this.getFormalData()}}},b=h,g=(r("9ac4"),r("2877")),v=Object(g["a"])(b,a,o,!1,null,"1f151d23",null);e["default"]=v.exports},"4e45":function(t,e,r){},"9ac4":function(t,e,r){"use strict";r("4e45")},dc27:function(t,e,r){"use strict";r.d(e,"t",(function(){return o})),r.d(e,"R",(function(){return n})),r.d(e,"db",(function(){return i})),r.d(e,"E",(function(){return l})),r.d(e,"a",(function(){return u})),r.d(e,"x",(function(){return c})),r.d(e,"J",(function(){return s})),r.d(e,"K",(function(){return p})),r.d(e,"G",(function(){return m})),r.d(e,"cb",(function(){return d})),r.d(e,"P",(function(){return y})),r.d(e,"bb",(function(){return f})),r.d(e,"N",(function(){return h})),r.d(e,"eb",(function(){return b})),r.d(e,"hb",(function(){return g})),r.d(e,"ab",(function(){return v})),r.d(e,"gb",(function(){return D})),r.d(e,"H",(function(){return O})),r.d(e,"I",(function(){return j})),r.d(e,"F",(function(){return E})),r.d(e,"L",(function(){return C})),r.d(e,"O",(function(){return F})),r.d(e,"fb",(function(){return x})),r.d(e,"jb",(function(){return L})),r.d(e,"w",(function(){return T})),r.d(e,"C",(function(){return w})),r.d(e,"s",(function(){return k})),r.d(e,"U",(function(){return I})),r.d(e,"V",(function(){return S})),r.d(e,"M",(function(){return q})),r.d(e,"v",(function(){return _})),r.d(e,"ib",(function(){return B})),r.d(e,"p",(function(){return N})),r.d(e,"h",(function(){return z})),r.d(e,"W",(function(){return W})),r.d(e,"g",(function(){return $})),r.d(e,"n",(function(){return R})),r.d(e,"X",(function(){return V})),r.d(e,"B",(function(){return A})),r.d(e,"Q",(function(){return P})),r.d(e,"D",(function(){return H})),r.d(e,"l",(function(){return U})),r.d(e,"i",(function(){return J})),r.d(e,"m",(function(){return Z})),r.d(e,"y",(function(){return G})),r.d(e,"A",(function(){return K})),r.d(e,"z",(function(){return M})),r.d(e,"S",(function(){return Q})),r.d(e,"c",(function(){return X})),r.d(e,"e",(function(){return Y})),r.d(e,"b",(function(){return tt})),r.d(e,"d",(function(){return et})),r.d(e,"j",(function(){return rt})),r.d(e,"f",(function(){return at})),r.d(e,"Z",(function(){return ot})),r.d(e,"T",(function(){return nt})),r.d(e,"q",(function(){return it})),r.d(e,"Y",(function(){return lt})),r.d(e,"r",(function(){return ut})),r.d(e,"o",(function(){return ct})),r.d(e,"u",(function(){return st})),r.d(e,"k",(function(){return pt}));var a=r("b775");function o(t){return Object(a["a"])({url:"/employ/attr/queryEmployAttrList",method:"post",data:t})}function n(t){return Object(a["a"])({url:"/employ/archives/queryEmployList",method:"post",params:t})}function i(t){return Object(a["a"])({url:"/employ/attr/saveOrUpdateEmployAttr",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/employ/attr/queryEmployAttr",method:"post",params:t})}function u(t){return Object(a["a"])({url:"/employ/attr/addOrCancelAttr",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/employ/attr/queryEmployAttrHistory",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/employ/free/queryEmployFreeList",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/employ/free/queryEmployFreePoolList",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/employ/free/queryEmployFree",method:"post",params:t})}function d(t){return Object(a["a"])({url:"/employ/archives/saveOrUpdateEmploy",method:"post",data:t})}function y(t){return Object(a["a"])({url:"/employ/archives/queryEmployInfoList",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/employ/archives/removeEmployInfo",method:"post",params:t})}function h(t){return Object(a["a"])({url:"/employ/archives/queryEmployInfoDetail",method:"post",params:t})}function b(t){return Object(a["a"])({url:"/employ/free/saveOrUpdateEmployFree",method:"post",data:t})}function g(t){return Object(a["a"])({url:"/employ/free/updateEmployFreeEntry",method:"post",data:t})}function v(t){return Object(a["a"])({url:"/employ/free/removeEmployFree",method:"post",params:t})}function D(t){return Object(a["a"])({url:"/employ/free/updateCancelEmployFree",method:"post",data:t})}function O(t){return Object(a["a"])({url:"/employ/free/queryEmployFreeDetail",method:"post",params:t})}function j(t){return Object(a["a"])({url:"/employ/free/queryEmployFreeHistory",method:"post",data:t})}function E(t){return Object(a["a"])({url:"/employ/archives/queryEmployFormalList",method:"post",data:t})}function C(t){return Object(a["a"])({url:"/employ/archives/queryEmployHistoryList",method:"post",params:t})}function F(t){return Object(a["a"])({url:"/employ/archives/queryEmployInfo",method:"post",params:t})}function x(t){return Object(a["a"])({url:"/employ/archives/updateBatchFormal",method:"post",data:t})}function L(t){return Object(a["a"])({url:"/employ/archives/updateFormalDelay",method:"post",data:t})}function T(){return Object(a["a"])({url:"/employ/archives/queryAppointCount",method:"post"})}function w(t){return Object(a["a"])({url:"/employ/archives/queryEmployBaseDetail?employId=".concat(t.employId),method:"post"})}function k(t){return Object(a["a"])({url:"/employ/archives/getEmployBaseDetail",method:"post",params:t})}function I(t){return Object(a["a"])({url:"/employ/archives/queryEmployWorkCount",method:"post",params:t})}function S(t){return Object(a["a"])({url:"/employ/archives/queryLastEmployChangeRecord",method:"post",params:t})}function q(t){return Object(a["a"])({url:"/employ/archives/queryEmployInfoContractPage",method:"post",data:t})}function _(t){return Object(a["a"])({url:"/employ/archives/operateEmployInfoContract",method:"post",data:t})}function B(t){return Object(a["a"])({url:"/employ/archives/updateEmployInfoContract",method:"post",data:t})}function N(t){return Object(a["a"])({url:"/employ/archives/exportEmployInfoContract",method:"post",data:t})}function z(t){return Object(a["a"])({url:"/employ/archives/checkSpecialDate",method:"post",data:t})}function W(t){return Object(a["a"])({url:"/employ/free/queryNewEmployFreeDetail",method:"post",params:t})}function $(t){return Object(a["a"])({url:"/employ/archives/checkFlow",method:"post",params:t})}function R(t){return Object(a["a"])({url:"/employ/archives/exportEmploy",method:"post",data:t})}function V(t){return Object(a["a"])({url:"/system/org/queryOrgMoney?employType=".concat(t.employType),method:"post"})}function A(t){return Object(a["a"])({url:"/employ/activity/getNewEmployList",method:"post",data:t})}function P(t){return Object(a["a"])({url:"/employ/activity/getReductionEmployList",method:"post",data:t})}function H(t){return Object(a["a"])({url:"/employ/activity/getPositiveEmployList",method:"post",data:t})}function U(t){return Object(a["a"])({url:"/employ/activity/exportPositiveEmployExcel",method:"post",data:t})}function J(t){return Object(a["a"])({url:"/employ/activity/exportNewEmployExcel",method:"post",data:t})}function Z(t){return Object(a["a"])({url:"/employ/activity/exportReductionEmployExcel",method:"post",data:t})}function G(t){return Object(a["a"])({url:"/business/client/queryClientCompanySelectListByLike",method:"post",params:t})}function K(t){return Object(a["a"])({url:"/business/contract/queryContractSelectByOrgIdANDClientCompanyIdOnEmploy",method:"post",params:t})}function M(t){return Object(a["a"])({url:"/business/client/queryClientCompanyWorkplaceListByLike",method:"post",params:t})}function Q(t){return Object(a["a"])({url:"/employ/activity/getaddOrLeaveEmployList",method:"post",data:t})}function X(t){return Object(a["a"])({url:"/employ/two/updChangeLeave",method:"post",data:t})}function Y(t){return Object(a["a"])({url:"/employ/two/updChangeEmployType",method:"post",data:t})}function tt(t){return Object(a["a"])({url:"/employ/two/updChangeZhuanOrg",method:"post",data:t})}function et(t){return Object(a["a"])({url:"/employ/two/updChangeTiaoGang",method:"post",data:t})}function rt(t){return Object(a["a"])({url:"/employ/two/exportUnFormalEmployChangeFinanceList",method:"post",data:t})}function at(t){return Object(a["a"])({url:"/employ/two/getTwoDetail",method:"get",params:t})}function ot(t){return Object(a["a"])({url:"/system/user/queryUserSelectListByCondition",method:"post",params:t})}function nt(t){return Object(a["a"])({url:"/employ/archives/queryEmployRosterList",method:"post",data:t})}function it(t){return Object(a["a"])({url:"/employ/archives/exportEmployRoster",method:"post",data:t})}function lt(t){return Object(a["a"])({url:"/employ/archives/queryRosterList",method:"post",data:t})}function ut(t){return Object(a["a"])({url:"/employ/archives/exportRoster",method:"post",data:t})}function ct(t){return Object(a["a"])({url:"/employ/free/exportEmployFree",method:"post",data:t})}function st(t){return Object(a["a"])({url:"/employ/rosterrealtime/getLastContrastInfo",method:"get",data:t})}function pt(t){return Object(a["a"])({url:"/employ/rosterrealtime/exportContrastExcel",method:"get",data:t})}}}]);