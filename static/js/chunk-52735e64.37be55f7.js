(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52735e64"],{1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"438c":function(e,t,a){},5:function(e,t){},"5d9a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"cityName"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入菜单名称",oninput:"value=value.replace(/\\s+/g,'')",maxlength:"50"},model:{value:e.queryListPa.menuName,callback:function(t){e.$set(e.queryListPa,"menuName",t)},expression:"queryListPa.menuName"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{clearable:""},model:{value:e.queryListPa.menuStatus,callback:function(t){e.$set(e.queryListPa,"menuStatus",t)},expression:"queryListPa.menuStatus"}},e._l(e.isDisplayData,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),a("div",{staticClass:"right-btn"},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.resource.add",expression:"'database.resource.add'"}],staticClass:"but-91",attrs:{size:"mini"},on:{click:e.handleAdd}},[e._v("新 增")]),a("el-button",{staticClass:"but-91",attrs:{size:"mini"},on:{click:e.queryList}},[e._v("清空")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.resource.list",expression:"'database.resource.list'"}],staticClass:"but-91",attrs:{size:"mini"},on:{click:e.toNewProvince}},[e._v("查 询")])],1)],1),a("div",{staticClass:"table-min"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"border-radius":"6px"},attrs:{data:e.menuList,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"name",label:"菜单名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"图标",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{class:e.menuIcons(t.row.authResource)})]}}])}),a("el-table-column",{attrs:{prop:"code",label:"菜单代码","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"httpUrl",label:"路由地址","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"status",label:"可见",formatter:e.visibleFormat,align:"center",width:"60"}}),a("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"mdeUpdatedDate",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.authResource.mdeUpdatedDate||"").split("T")[0]))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.resource.edit",expression:"'database.resource.edit'"}],staticStyle:{"font-size":"14px",color:"#078bfd"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.resource.add",expression:"'database.resource.add'"}],staticStyle:{"font-size":"14px",color:"#078bfd"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleAdd(t.row)}}},[e._v("新增")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.resource.delete",expression:"'database.resource.delete'"}],staticStyle:{"font-size":"14px",color:"#078bfd"},attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t},close:e.handleClose}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上级菜单"}},[a("treeselect",{staticStyle:{width:"200px"},attrs:{options:e.menuList,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级菜单"},model:{value:e.formData.parentId,callback:function(t){e.$set(e.formData,"parentId",t)},expression:"formData.parentId"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[a("el-radio-group",{model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.menuTypeData,(function(t,n){return a("el-radio",{key:n,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"菜单图标"}},[a("el-popover",{attrs:{placement:"bottom-start",width:"460",trigger:"click"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[a("el-input",{attrs:{slot:"reference",placeholder:"点击选择图标",clearable:""},slot:"reference",model:{value:e.formData.menuIcon,callback:function(t){e.$set(e.formData,"menuIcon",t)},expression:"formData.menuIcon"}}),a("div",{staticClass:"popover-box",staticStyle:{height:"160px",overflow:"auto"}},[a("el-row",e._l(e.iconArrData,(function(t,n){return a("el-col",{key:n,attrs:{span:8}},[a("div",{on:{click:function(a){return e.popoverClick(t)}}},[a("i",{class:t.type}),a("span",[e._v(e._s(t.text))])])])})),1)],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"50",placeholder:"请输入"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单代码",prop:"code"}},[a("el-input",{attrs:{maxlength:"50",placeholder:"请输入"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否外链"}},[a("el-radio-group",{model:{value:e.formData.isOutSide,callback:function(t){e.$set(e.formData,"isOutSide",t)},expression:"formData.isOutSide"}},e._l(e.yesOrNoDataList,(function(t,n){return a("el-radio",{key:n,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"路由地址",prop:"httpUrl"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.httpUrl,callback:function(t){e.$set(e.formData,"httpUrl",t)},expression:"formData.httpUrl"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"显示排序",prop:"displayOrder"}},[a("el-input",{attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"请输入"},model:{value:e.formData.displayOrder,callback:function(t){e.$set(e.formData,"displayOrder",t)},expression:"formData.displayOrder"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"菜单状态"}},[a("el-radio-group",{model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},e._l(e.isDisplayData,(function(t,n){return a("el-radio",{key:n,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"but-90",on:{click:e.cancel}},[e._v("取 消")]),a("el-button",{staticClass:"but-90",attrs:{type:"primary"},on:{click:e.checkMenu}},[e._v("确 定")])],1)],1)],1)],1)},s=[],o=(a("159b"),a("b0c0"),a("a417")),r=a("ca17"),l=a.n(r),i=(a("542c"),a("ed08"),a("ba0f"),{components:{Treeselect:l.a},data:function(){return{loading:!1,rules:{type:[{required:!0,message:"菜单类型不能为空",trigger:"change"}],code:[{required:!0,message:"菜代码不能为空",trigger:"blur"}],name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],displayOrder:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}]},open:!1,formData:{parentId:null,type:"",menuIcon:"",name:"",isOutSide:"",httpUrl:"",displayOrder:"",status:"",code:""},menuList:[],queryListPa:{},title:"",popoverVisible:!1,iconArrData:[{type:"el-icon-platform-eleme",text:"platform"},{type:"el-icon-picture",text:"picture"},{type:"el-icon-picture-outline-round",text:"outline"},{type:"el-icon-s-cooperation",text:"cooperation"},{type:"el-icon-s-platform",text:"platform"},{type:"el-icon-s-promotion",text:"promotion"},{type:"el-icon-s-release",text:"release"},{type:"el-icon-s-shop",text:"shop"},{type:"el-icon-s-finance",text:"finance"},{type:"el-icon-s-custom",text:"custom"},{type:"el-icon-s-data",text:"data"},{type:"el-icon-s-check",text:"check"},{type:"el-icon-s-tools",text:"tools"},{type:"el-icon-s-goods",text:"goods"},{type:"el-icon-star-on",text:"star"}]}},computed:{isDisplayData:function(){return console.log(this.$store.state.baseData.baseDataOptionList),this.$store.state.baseData.baseDataOptionList.IT_HIDE},menuTypeData:function(){return this.$store.state.baseData.baseDataOptionList.IT_MENU},yesOrNoDataList:function(){return this.$store.state.baseData.baseDataOptionList.IS_YSNO}},created:function(){},mounted:function(){this.queryMenuTreeData()},methods:{menuIcons:function(e){if(null!=e.content){var t=JSON.parse(e.content);return t.menuIcon}return""},popoverClick:function(e){console.log(e),this.formData.menuIcon=e.type,this.popoverVisible=!1},queryMenuTreeData:function(){var e=this;Object(o["x"])(this.queryListPa).then((function(t){t&&t.length>0?e.initializTreeData(t):e.menuList=[]}),(function(t){e.menuList=[]}))},initializTreeData:function(e){var t=this;e.forEach((function(e,a){t.$set(e,"name",e.authResource.name),t.$set(e,"code",e.authResource.code),t.$set(e,"status",e.authResource.status),t.$set(e,"id",e.authResource.resourceId),t.$set(e,"httpUrl",e.content&&e.content.httpUrl||""),t.$set(e,"menuIcon",e.content&&e.content.code||""),t.$set(e,"children",e.menuResourceVoList||[]),e.children&&t.initializTreeData(e.children)})),this.menuList=e},visibleFormat:function(e,t){return"1"==e.status?"显示":"隐藏"},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.authResource.resourceId,label:e.authResource.name,children:e.children}},cancel:function(){this.open=!1,this.resetForm()},selected:function(e){this.form.icon=e},addSaveMenu:function(e){var t=this,a={authResource:{code:e.code||null,displayOrder:e.displayOrder||null,name:e.name||null,parentId:e.parentId||null,resourceId:e.resourceId||null,status:e.status||null,type:e.type||null},content:{httpUrl:e.httpUrl||null,isOutSide:e.isOutSide||null,menuIcon:e.menuIcon||null},menuResourceVoList:[]};e.resourceId?Object(o["ab"])(a).then((function(e){t.$message({message:"编辑成功",type:"success"}),t.open=!1,t.queryMenuTreeData()})):Object(o["T"])(a).then((function(e){t.$message({message:"添加成功",type:"success"}),t.open=!1,t.queryMenuTreeData()}))},checkMenu:function(){this.submitForm()},submitForm:function(){var e=this;this.$refs["formData"].validate((function(t){t&&e.addSaveMenu(e.formData)}))},handleAdd:function(e){this.open=!0,this.title="添加菜单",this.resetForm(),e.id?this.formData.parentId=e.id||"":this.formData.parentId=null,void 0!=this.$refs["formData"]&&this.$refs["formData"].resetFields()},resetForm:function(){this.formData={parentId:null,type:void 0,menuIcon:void 0,name:void 0,isOutSide:"1",httpUrl:void 0,displayOrder:void 0,status:void 0}},jsonOrStr:function(e,t){return e&&t?"j"==t?JSON.stringify(e):JSON.parse(e):null},handleUpdate:function(e){var t=this;this.open=!0,this.title="修改菜单",this.resetForm(),Object(o["w"])({menuId:e.id}).then((function(e){e.content=t.jsonOrStr(e.content,"p"),t.formData=e,t.formData.menuIcon=t.formData.content.menuIcon}))},handleDelete:function(e){var t=this;t.$confirm("确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["e"])({menuId:e.id}).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.queryMenuTreeData()}),(function(e){t.$message({type:"error",message:"删除失败!"})}))}))},toNewProvince:function(){this.queryMenuTreeData()},queryList:function(){this.queryListPa={},this.queryMenuTreeData()},handleClose:function(){void 0!=this.$refs.formData&&this.$refs.formData.resetFields(),void 0!=this.$refs.tree&&this.$refs.tree.setCheckedKeys([])}}}),c=i,u=(a("8ca2"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"c15cb9f4",null);t["default"]=d.exports},"8ca2":function(e,t,a){"use strict";a("438c")}}]);