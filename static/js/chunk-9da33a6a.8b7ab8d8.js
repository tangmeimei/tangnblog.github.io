(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9da33a6a"],{"1b60":function(e,t,a){"use strict";a("9a3e")},"24f1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"container-left"},[a("h5",[e._v("数据类型")]),a("div",{staticClass:"inner"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"类型代码",prop:"keyword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入类型代码",maxlength:"50"},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formInline.value,callback:function(t){e.$set(e.formInline,"value",t)},expression:"formInline.value"}})],1),a("el-form-item",{attrs:{label:"类型名称",prop:"keyword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入类型名称",maxlength:"50"},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formInline.text,callback:function(t){e.$set(e.formInline,"text",t)},expression:"formInline.text"}})],1)],1),a("div",{staticClass:"right-btn"},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.base.list",expression:"'database.base.list'"}],staticClass:"but-91",on:{click:e.queryList}},[e._v("查询")]),a("el-button",{staticClass:"but-91",on:{click:e.emptyBtn}},[e._v("重置")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.base.add",expression:"'database.base.add'"}],staticClass:"but-91",on:{click:e.toNewProvince}},[e._v("新增")])],1),a("div",{staticClass:"table-min"},[a("el-table",{ref:"interfaceTable",staticStyle:{width:"100%"},attrs:{height:"542px",data:e.listData,size:"medium"},on:{"current-change":e.currentChangeActive}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"",width:"60",align:"center",index:e.indexMethod1}}),a("el-table-column",{attrs:{prop:"value",label:"类型代码",align:"center"}}),a("el-table-column",{attrs:{prop:"text",label:"类型名称",align:"center"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"has",rawName:"v-has",value:"database.base.edit",expression:"'database.base.edit'"}],staticClass:"customBtn",staticStyle:{"margin-right":"6px"},on:{click:function(a){return e.toEditPage(t.row)}}},[e._v("编辑")]),a("span",{directives:[{name:"has",rawName:"v-has",value:"database.base.delete",expression:"'database.base.delete'"}],staticClass:"customBtn",on:{click:function(a){return e.delBtn(t.row.dataId)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination-min"},[a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-size":e.pageSize,"page-sizes":[15,30,50],layout:"total,sizes, prev, pager, next, jumper",total:e.paginationData.rowCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)],1)]),a("div",{staticClass:"container-right"},[a("h5",[e._v("数据项")]),a("div",{staticClass:"inner"},[a("div",{staticClass:"right-btn"},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"database.base.add",expression:"'database.base.add'"}],staticClass:"but-91",on:{click:e.toNewChildProvince}},[e._v("新增")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.childListData,height:"604px",size:"medium"}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"",width:"60",align:"center",index:e.indexMethod2}}),a("el-table-column",{attrs:{prop:"value",label:"数据项代码",align:"center"}}),a("el-table-column",{attrs:{prop:"text",label:"数据项名称",align:"center"}}),a("el-table-column",{attrs:{prop:"displayOrder",label:"排序",width:"80",align:"center"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"has",rawName:"v-has",value:"database.base.edit",expression:"'database.base.edit'"}],staticClass:"customBtn",staticStyle:{"margin-right":"6px"},on:{click:function(a){return e.toChildEditPage(t.row)}}},[e._v("编辑")]),a("span",{directives:[{name:"has",rawName:"v-has",value:"database.base.delete",expression:"'database.base.delete'"}],staticClass:"customBtn",on:{click:function(a){return e.delChildBtn(t.row.dataId)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination-min"},[a("el-pagination",{attrs:{"current-page":e.childPageIndex,"page-size":e.childPageSize,"page-sizes":[15,30,50],layout:"total,sizes, prev, pager, next, jumper",total:e.childPaginationData.rowCount},on:{"size-change":e.childHandleSizeChange,"current-change":e.childHandleCurrentChange,"update:currentPage":function(t){e.childPageIndex=t},"update:current-page":function(t){e.childPageIndex=t},"update:pageSize":function(t){e.childPageSize=t},"update:page-size":function(t){e.childPageSize=t}}})],1)],1)]),a("el-dialog",{staticStyle:{"margin-top":"160px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,width:"30%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"formDialog",attrs:{rules:e.rulesDialog,model:e.formDialog,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"类型代码",prop:"value"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入类型代码",maxlength:"50"},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formDialog.value,callback:function(t){e.$set(e.formDialog,"value",t)},expression:"formDialog.value"}})],1),a("el-form-item",{attrs:{label:"类型名称",prop:"text"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入类型名称",maxlength:"50"},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formDialog.text,callback:function(t){e.$set(e.formDialog,"text",t)},expression:"formDialog.text"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formDialog.status,callback:function(t){e.$set(e.formDialog,"status",t)},expression:"formDialog.status"}},[e._v("正常")]),a("el-radio",{attrs:{label:"2"},model:{value:e.formDialog.status,callback:function(t){e.$set(e.formDialog,"status",t)},expression:"formDialog.status"}},[e._v("停用")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.preserveBtn("formDialog")}}},[e._v("确 定")])],1)],1),a("el-dialog",{staticStyle:{"margin-top":"160px"},attrs:{title:e.childTitle,"close-on-click-modal":!1,width:"30%",visible:e.dialogChildFormVisible},on:{"update:visible":function(t){e.dialogChildFormVisible=t}}},[a("el-form",{ref:"formChildDialog",attrs:{rules:e.rulesChildDialog,model:e.formChildDialog,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"类型代码",prop:"typeCode"}},[a("el-input",{staticClass:"inpWidth",attrs:{disabled:!0},model:{value:e.formChildDialog.typeCode,callback:function(t){e.$set(e.formChildDialog,"typeCode",t)},expression:"formChildDialog.typeCode"}})],1),a("el-form-item",{attrs:{label:"类型名称",prop:"typeName"}},[a("el-input",{staticClass:"inpWidth",attrs:{disabled:!0},model:{value:e.formChildDialog.typeName,callback:function(t){e.$set(e.formChildDialog,"typeName",t)},expression:"formChildDialog.typeName"}})],1),a("el-form-item",{attrs:{label:"数据项代码",prop:"value"}},[a("el-input",{staticClass:"inpWidth",attrs:{maxlength:"50",clearable:""},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formChildDialog.value,callback:function(t){e.$set(e.formChildDialog,"value",t)},expression:"formChildDialog.value"}})],1),a("el-form-item",{attrs:{label:"数据项名称",prop:"text"}},[a("el-input",{staticClass:"inpWidth",attrs:{maxlength:"50",clearable:""},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formChildDialog.text,callback:function(t){e.$set(e.formChildDialog,"text",t)},expression:"formChildDialog.text"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"displayOrder"}},[a("el-input",{staticClass:"inpWidth",attrs:{maxlength:"50",clearable:""},nativeOn:{keyup:function(e){e.target.value=e.target.value.replace(/^\s+|\s+$/gm,"")}},model:{value:e.formChildDialog.displayOrder,callback:function(t){e.$set(e.formChildDialog,"displayOrder",t)},expression:"formChildDialog.displayOrder"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formChildDialog.status,callback:function(t){e.$set(e.formChildDialog,"status",t)},expression:"formChildDialog.status"}},[e._v("正常")]),a("el-radio",{attrs:{label:"2"},model:{value:e.formChildDialog.status,callback:function(t){e.$set(e.formChildDialog,"status",t)},expression:"formChildDialog.status"}},[e._v("停用")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogChildFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.preserveChildBtn("formChildDialog")}}},[e._v("确 定")])],1)],1)],1)},l=[],n=a("a417"),r={data:function(){var e=this,t=function(t,a,i){""!=a?a!=e.fatherTypeCode?Object(n["a"])({code:e.formDialog.value,dataType:""}).then((function(e){i()})).catch((function(e){i(new Error("数据类型代码重复，请重新修改"))})):i():i(new Error("内容不能为空！"))},a=function(t,a,i){""!=a?a==e.fatherTypeName?i():Object(n["b"])({name:e.formDialog.text,dataType:""}).then((function(e){i()})).catch((function(e){i(new Error("数据类型名称重复，请重新修改"))})):i(new Error("内容不能为空！"))},i=function(t,a,i){""!=a?a==e.childTypeCode?i():Object(n["a"])({code:e.formChildDialog.value,dataType:e.formChildDialog.dateType}).then((function(e){i()})).catch((function(e){i(new Error("数据项代码重复，请重新修改"))})):i(new Error("内容不能为空！"))},l=function(t,a,i){""!=a?a!=e.childTypeName?Object(n["b"])({name:e.formChildDialog.text,dataType:e.formChildDialog.dateType}).then((function(e){i()})).catch((function(e){i(new Error("数据项名称重复，请重新修改"))})):i():i(new Error("内容不能为空！"))};return{dialogTitle:"创建数据类型",childTitle:"创建数据项",formInline:{dataId:"",dateType:"",displayOrder:"",extra1:"",extra2:"",extra3:"",text:"",value:""},rulesDialog:{value:[{required:!0,validator:t,trigger:"blur"}],text:[{required:!0,validator:a,trigger:"blur"}]},rulesChildDialog:{typeCode:[{required:!0,trigger:"blur"}],typeName:[{required:!0,trigger:"blur"}],value:[{required:!0,validator:i,trigger:"blur"}],text:[{required:!0,validator:l,trigger:"blur"}],displayOrder:[{required:!0,message:"请输入，如1",trigger:"blur"}]},listData:[],childListData:[],currentPage1:5,currentPage2:5,currentPage3:5,currentPage4:4,dialogFormVisible:!1,dialogChildFormVisible:!1,threeDialogTableVisible:!1,formLabelWidth:"120px",formDialog:{dataId:"",dateType:"",displayOrder:"",extra1:"",extra2:"",extra3:"",text:"",value:"",status:"1"},updateRegionForm:{string:"",regionCode:"",regionId:"",regionLevel:"",regionName:"",regionNameEn:"",regionOrder:"",regionShortnameEn:""},formChildDialog:{typeCode:"",typeName:"",dataId:"",dateType:"",displayOrder:"",extra1:"",extra2:"",extra3:"",text:"",value:"",status:"1"},fatherTypeCode:"",fatherTypeName:"",childTypeCode:"",childTypeName:"",currentData:{},childPaginationData:{},childPageSize:15,childcurrentPage:1,childPageIndex:1,paginationData:{},pageSize:15,currentPage:1,pageIndex:1}},watch:{listData:function(){this.$nextTick((function(){this.$refs.interfaceTable.setCurrentRow(this.listData[0])}))}},created:function(){this.baseList(this.pageIndex)},methods:{indexMethod1:function(e){return this.pageSize*this.paginationData.pageIndex+e-this.pageSize+1},indexMethod2:function(e){return this.childPageSize*this.childPaginationData.pageIndex+e-this.childPageSize+1},baseList:function(e){var t=this;this.listData=[],Object(n["n"])({input:this.formInline,nextToken:"",pageEnd:0,pageIndex:e,pageSize:this.pageSize,pageStart:0}).then((function(e){t.paginationData=e;for(var a=e.result,i=0;i<a.length;i++)null!=a[i].dateType&&""!=a[i].dateType||t.listData.push(a[i]);if(t.listData.length>0){var l=t.listData[0];t.initBaseDataList(l.value,t.childPageIndex)}}))},currentChangeActive:function(e){this.currentData=e,console.log(),this.initBaseDataList(this.currentData.value,this.childPageIndex)},initBaseDataList:function(e,t){var a=this;Object(n["n"])({input:{dateType:e},nextToken:"",pageEnd:0,pageIndex:t,pageSize:this.childPageSize,pageStart:0}).then((function(e){a.childPaginationData=e,a.childListData=e.result}))},emptyBtn:function(){this.formInline.text="",this.formInline.value="",this.baseList(this.pageIndex)},toNewProvince:function(){var e=this;this.dialogTitle="创建数据类型",this.dialogFormVisible=!0,this.formDialog.text="",this.formDialog.value="",this.formDialog.dataId="",this.$nextTick((function(){e.$refs.formDialog.clearValidate()}))},toEditPage:function(e){var t=this;this.dialogTitle="编辑数据类型",this.dialogFormVisible=!0,this.formDialog.text=e.text,this.formDialog.value=e.value,this.formDialog.dataId=e.dataId,this.fatherTypeCode=e.value,this.fatherTypeName=e.text,this.$nextTick((function(){t.$refs.formDialog.clearValidate()}))},preserveBtn:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(n["U"])(t.formDialog).then((function(e){t.dialogFormVisible=!1,t.baseList(t.pageIndex),t.formInline.value="","创建数据类型"==t.dialogTitle?t.$message({message:"新增成功！",type:"success"}):t.$message({message:"编辑成功！",type:"success"})}))}))},delBtn:function(e){var t=this;this.$confirm("此操作将永久删除该数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["O"])({dataId:e}).then((function(e){t.formInline.value="",t.formInline.text="",t.baseList(t.pageIndex),t.$message({message:"删除成功！",type:"success"})}))}))},toDetails:function(e){this.$router.push({path:"groupDetails",query:{clientGroupId:e}})},queryList:function(){this.baseList(this.pageIndex)},toNewChildProvince:function(){var e=this;this.childTitle="创建数据项",this.dialogChildFormVisible=!0,this.formChildDialog.typeCode=this.currentData.value,this.formChildDialog.typeName=this.currentData.text,this.formChildDialog.dateType=this.currentData.value,this.formChildDialog.dataId="",this.formChildDialog.text="",this.formChildDialog.value="",this.formChildDialog.displayOrder="",this.$nextTick((function(){e.$refs.formChildDialog.clearValidate()}))},toChildEditPage:function(e){var t=this;this.childTitle="编辑数据项",this.dialogChildFormVisible=!0,this.formChildDialog.typeCode=this.currentData.value,this.formChildDialog.typeName=this.currentData.text,this.formChildDialog.dateType=e.dateType,this.formChildDialog.displayOrder=e.displayOrder,this.formChildDialog.dataId=e.dataId,this.formChildDialog.text=e.text,this.formChildDialog.value=e.value,this.childTypeCode=e.value,this.childTypeName=e.text,this.$nextTick((function(){t.$refs.formChildDialog.clearValidate()}))},preserveChildBtn:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;delete t.formChildDialog.typeCode,delete t.formChildDialog.typeName,Object(n["U"])(t.formChildDialog).then((function(e){t.dialogChildFormVisible=!1,t.initBaseDataList(t.currentData.value,t.childPageIndex),"创建数据项"==t.childTitle?t.$message({message:"新增成功！",type:"success"}):t.$message({message:"编辑成功！",type:"success"})}))}))},delChildBtn:function(e){var t=this;this.$confirm("此操作将永久删除该数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["O"])({dataId:e}).then((function(e){t.initBaseDataList(t.currentData.value,t.childPageIndex),t.$message({message:"删除成功！",type:"success"})}))}))},handleSizeChange:function(){this.baseList(this.pageIndex)},handleCurrentChange:function(e){this.baseList(e)},childHandleSizeChange:function(){this.initBaseDataList(this.currentData.value,this.childPageIndex)},childHandleCurrentChange:function(e){this.initBaseDataList(this.currentData.value,e)}}},s=r,o=(a("1b60"),a("2877")),d=Object(o["a"])(s,i,l,!1,null,"2d35e004",null);t["default"]=d.exports},"9a3e":function(e,t,a){}}]);