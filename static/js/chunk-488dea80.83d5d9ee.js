(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-488dea80"],{"21f7":function(t,e,a){},"2b6d":function(t,e,a){"use strict";a.d(e,"l",(function(){return s})),a.d(e,"k",(function(){return n})),a.d(e,"o",(function(){return r})),a.d(e,"p",(function(){return l})),a.d(e,"q",(function(){return o})),a.d(e,"r",(function(){return u})),a.d(e,"m",(function(){return c})),a.d(e,"a",(function(){return p})),a.d(e,"t",(function(){return m})),a.d(e,"i",(function(){return d})),a.d(e,"c",(function(){return f})),a.d(e,"b",(function(){return y})),a.d(e,"n",(function(){return b})),a.d(e,"d",(function(){return h})),a.d(e,"e",(function(){return g})),a.d(e,"f",(function(){return v})),a.d(e,"s",(function(){return C})),a.d(e,"j",(function(){return S})),a.d(e,"g",(function(){return T})),a.d(e,"h",(function(){return w}));a("99af");var i=a("b775");function s(t){return Object(i["a"])({url:"/business/vmclient/queryVmClientList",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/business/vmclient/queryVmClientInfo",method:"post",params:t})}function r(t){return Object(i["a"])({url:"/business/vmclient/removeVmClientCompany",method:"post",params:t})}function l(t){return Object(i["a"])({url:"/business/vmclient/removeVmClientTail",method:"post",params:t})}function o(t){return Object(i["a"])({url:"/business/vmclient/saveOrUpdateVmClient",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/business/vmclient/saveOrUpdateVmClientTail",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/business/vmclient/queryVmClientTailList",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/business/vmclient/clientFlow",method:"post",params:t})}function m(t){return Object(i["a"])({url:"/business/vmclient/updateNewsStatus",method:"post",params:t})}function d(t){return Object(i["a"])({url:"/business/vmclient/newsFlow",method:"post",params:t})}function f(t){return Object(i["a"])({url:"/business/vmclient/exportVmClientList",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/commons/exportfile/download",method:"get",params:t})}function b(t){return Object(i["a"])({url:"/business/vmclient/queryVmClientUsers",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/commons/tianyancha/getBaseInfoV2",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/commons/tianyancha/getCompanyLawSuit",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/commons/tianyancha/getCompanyProfile",method:"post",data:t})}function C(t){return Object(i["a"])({url:"/commons/tianyancha/searchCompany",method:"post",data:t})}function S(t){return Object(i["a"])({url:"/business/client/queryClientCompanySelectListByOrgId",method:"post",data:t})}function T(t){return Object(i["a"])({url:"/business/contract/getContractPrice?cityCn=".concat(t.cityCn,"&contractId=").concat(t.contractId,"&jobCn=").concat(t.jobCn,"&jobLevel=").concat(t.jobLevel),method:"post"})}function w(t){return Object(i["a"])({url:"/business/contract/queryContractPriceDimension?contractId=".concat(t.contractId),method:"post"})}},"8c34":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.queryListData,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"准客户名称",prop:"keyword"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:""},model:{value:t.queryListData.clientCompanyName,callback:function(e){t.$set(t.queryListData,"clientCompanyName",e)},expression:"queryListData.clientCompanyName"}},t._l(t.customerNameList,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业类型"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryListData.companyNature,callback:function(e){t.$set(t.queryListData,"companyNature",e)},expression:"queryListData.companyNature"}},t._l(t.companyNatureTypeList,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所属行业"}},[a("el-cascader",{attrs:{options:t.industryTreeArr,props:{checkStrictly:!0,expandTrigger:"hover"},clearable:""},on:{change:t.clearTxt},model:{value:t.searchParams,callback:function(e){t.searchParams=e},expression:"searchParams"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"风险属性"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryListData.isRisk,callback:function(e){t.$set(t.queryListData,"isRisk",e)},expression:"queryListData.isRisk"}},t._l(t.isRiskTypeList,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,value:t.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业所在地"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"",options:t.regionOptions,props:{expandTrigger:"hover"}},model:{value:t.queryListData.registerAddress,callback:function(e){t.$set(t.queryListData,"registerAddress",e)},expression:"queryListData.registerAddress"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"跟进状态"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryListData.tailStatus,callback:function(e){t.$set(t.queryListData,"tailStatus",e)},expression:"queryListData.tailStatus"}},t._l(t.newsStatusTypeList,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,value:t.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"跟进人",prop:"tailUserId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:""},model:{value:t.queryListData.applicantNames,callback:function(e){t.$set(t.queryListData,"applicantNames",e)},expression:"queryListData.applicantNames"}},t._l(t.applicantList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1)],1)],1)],1),a("div",{staticClass:"right-btn"},[a("el-button",{staticClass:"but-91",on:{click:t.exportData}},[t._v("导出")]),a("el-button",{staticClass:"but-91",on:{click:t.emptyBtn}},[t._v("重置")]),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.resources.list",expression:"'vmClient.company.resources.list'"}],staticClass:"but-91",on:{click:t.queryList}},[t._v("查询")])],1)],1),a("div",{staticClass:"table-min"},[a("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.listData,height:"535px",size:"medium","header-cell-style":{background:"#fff",color:"#333"}},on:{"sort-change":t.onSortChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:t.indexMethod}}),a("el-table-column",{attrs:{label:"准客户名称",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.clientCompanyName,placement:"top"}},[a("span",[t._v(t._s(t._f("ellipsis")(e.row.clientCompanyName)))])])]}}])}),a("el-table-column",{attrs:{label:"企业类型",align:"center",width:"140",prop:"companyNature",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.companyNatureTypeList,e.row.companyNature)))])]}}])}),a("el-table-column",{attrs:{label:"所属行业",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.industryTypeList,e.row.industryType))+"-"+t._s(t.getqueryLabelById(t.industrySubTypeList,e.row.industrySubType)))])]}}])}),a("el-table-column",{attrs:{label:"风险属性",width:"200",align:"center",prop:"isRisk",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.isRiskTypeList,e.row.isRisk)))])]}}])}),a("el-table-column",{attrs:{label:"激活时间",align:"center",prop:"newsFlowDate",sortable:"custom",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.newsFlowDate))])]}}])}),a("el-table-column",{attrs:{label:"跟进人",prop:"tailUserName",align:"center",sortable:"custom"}}),a("el-table-column",{attrs:{label:"商机状态",prop:"newsStatus",align:"center",width:"120",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.newsStatusTypeList,e.row.newsStatus)))])]}}])}),a("el-table-column",{attrs:{label:"最后更新时间",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.clientUpdateTime))])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.resources.tail",expression:"'vmClient.company.resources.tail'"}],staticClass:"customBtn",attrs:{size:"small"},on:{click:function(a){return t.seeTail(e.row)}}},[t._v("跟进表")]),a("el-dropdown",{on:{command:t.handleCommand}},[a("span",{staticClass:"customBtn",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"}},[t._v(" 更多 "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["IT_VCSS_003"!=e.row.newsStatus?a("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.resources.edit",expression:"'vmClient.company.resources.edit'"}],attrs:{command:t.beforeHandleCommand(e.row,"a")}},[t._v("编辑")]):t._e(),a("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.resources.info",expression:"'vmClient.company.resources.info'"}],attrs:{command:t.beforeHandleCommand(e.row,"b")}},[t._v("详情")]),"IT_VCSS_003"!=e.row.newsStatus?a("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.resources.status",expression:"'vmClient.company.resources.status'"}],attrs:{command:t.beforeHandleCommand(e.row,"c")}},[t._v("商机状态")]):t._e(),a("el-dropdown-item",{directives:[{name:"has",rawName:"v-has",value:"vmClient.company.resources.delete",expression:"'vmClient.company.resources.delete'"}],attrs:{command:t.beforeHandleCommand(e.row,"d")}},[t._v("删除")])],1)],1)]}}])})],1)],1),a("div",{staticClass:"pagination-min"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[15,30,50],"page-size":t.pageSize,layout:"total,sizes, prev, pager, next, jumper",total:t.paginationData.rowCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e}}})],1),a("el-dialog",{attrs:{title:"商机跟进表",visible:t.outerVisible,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(e){t.outerVisible=e}}},[a("el-dialog",{attrs:{width:"60%",title:"新增商机跟进表",visible:t.innerVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("div",{staticClass:"tail-dialog-title"},[a("b",{staticStyle:{width:"140px"}},[t._v("客户名称")]),t._v(t._s(t.currentTailName)+" ")]),a("el-form",{ref:"vmClientCompanyTail",staticClass:"demo-ruleForm",attrs:{model:t.vmClientCompanyTail,rules:t.tailDataList,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户跟进日期",prop:"tailTime"}},[a("el-date-picker",{style:t.maxWidth,attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择客户跟进日期"},model:{value:t.vmClientCompanyTail.tailTime,callback:function(e){t.$set(t.vmClientCompanyTail,"tailTime",e)},expression:"vmClientCompanyTail.tailTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户联系人姓名",prop:"clientContactName"}},[a("el-input",{attrs:{maxlength:"50",clearable:"",placeholder:"请输入"},model:{value:t.vmClientCompanyTail.clientContactName,callback:function(e){t.$set(t.vmClientCompanyTail,"clientContactName",e)},expression:"vmClientCompanyTail.clientContactName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发生地点",prop:"happenAddress"}},[a("el-input",{attrs:{maxlength:"50",clearable:"",placeholder:"请输入"},model:{value:t.vmClientCompanyTail.happenAddress,callback:function(e){t.$set(t.vmClientCompanyTail,"happenAddress",e)},expression:"vmClientCompanyTail.happenAddress"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"跟进类型",prop:"tailType"}},[a("el-select",{style:t.maxWidth,attrs:{clearable:""},model:{value:t.vmClientCompanyTail.tailType,callback:function(e){t.$set(t.vmClientCompanyTail,"tailType",e)},expression:"vmClientCompanyTail.tailType"}},t._l(t.tailTypeList,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,value:t.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"跟进主体/内容",prop:"tailContent"}},[a("el-input",{attrs:{maxlength:"50",clearable:"",placeholder:"请输入"},model:{value:t.vmClientCompanyTail.tailContent,callback:function(e){t.$set(t.vmClientCompanyTail,"tailContent",e)},expression:"vmClientCompanyTail.tailContent"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"跟进收获",prop:"tailResult"}},[a("el-input",{attrs:{maxlength:"50",clearable:"",placeholder:"请输入"},model:{value:t.vmClientCompanyTail.tailResult,callback:function(e){t.$set(t.vmClientCompanyTail,"tailResult",e)},expression:"vmClientCompanyTail.tailResult"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注说明",prop:"remark"}},[a("el-input",{attrs:{maxlength:"50",clearable:"",placeholder:"请输入"},model:{value:t.vmClientCompanyTail.remark,callback:function(e){t.$set(t.vmClientCompanyTail,"remark",e)},expression:"vmClientCompanyTail.remark"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.innerVisible=!1}}},[t._v("关 闭")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("vmClientCompanyTail")}}},[t._v("提交")])],1)],1),a("div",{staticClass:"tail-dialog-title"},[a("b",[t._v("客户名称：")]),t._v(t._s(t.currentTailName)+" ")]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.queryListData,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"跟进起止日期："}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.queryTailListData.tailTimeAee,callback:function(e){t.$set(t.queryTailListData,"tailTimeAee",e)},expression:"queryTailListData.tailTimeAee"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getTailListData(1)}}},[t._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addTail}},[t._v("新增")])],1)],1)],1),a("div",{staticClass:"table-min"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tailListData,border:"",size:"medium","header-cell-style":{background:"#fff",color:"#333"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"客户跟进日期",width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.tailTime.slice(0,e.row.tailTime.indexOf("T"))))])]}}])}),a("el-table-column",{attrs:{label:"客户联系人姓名",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.clientContactName))])]}}])}),a("el-table-column",{attrs:{label:"发生地点",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.happenAddress))])]}}])}),a("el-table-column",{attrs:{label:"跟进类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getqueryLabelById(t.tailTypeList,e.row.tailType)))])]}}])}),a("el-table-column",{attrs:{label:"跟进主体/内容",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.tailContent))])]}}])}),a("el-table-column",{attrs:{label:"跟进收获",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.tailResult))])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",type:"index",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"customBtn",attrs:{size:"small"},on:{click:function(a){return t.tailEdit(e.row)}}},[t._v("编辑")]),a("span",{staticClass:"customBtn",attrs:{size:"small"},on:{click:function(a){return t.tailDelete(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination-min"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSizes,"page-sizes":[5,10,15],layout:"total,sizes, prev, pager, next, jumper",total:t.childrenPaginationData.rowCount},on:{"size-change":t.childrenHandleSizeChange,"current-change":t.childrenHandleCurrentChange,"update:pageSize":function(e){t.pageSizes=e},"update:page-size":function(e){t.pageSizes=e}}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.outerVisible=!1}}},[t._v("关 闭")])],1)],1),a("el-dialog",{attrs:{title:"商机状态",visible:t.tailDialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.tailDialogVisible=e}}},[a("div",{staticClass:"tail-dialog-title"},[a("b",{staticStyle:{width:"140px"}},[t._v("客户名称：")]),t._v(t._s(t.currentTailName)+" ")]),a("el-form",{ref:"updateNewsStatusDataref",staticClass:"demo-form-inline",attrs:{rules:t.tailRules,model:t.updateNewsStatusData,"label-width":"140px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"商机状态："}},[a("el-radio-group",{model:{value:t.updateNewsStatusData.newsStatus,callback:function(e){t.$set(t.updateNewsStatusData,"newsStatus",e)},expression:"updateNewsStatusData.newsStatus"}},t._l(t.newsStatusTypeList,(function(e){return a("el-radio",{key:e.dataId,attrs:{label:e.value}},[t._v(t._s(e.text))])})),1)],1)],1)],1),"IT_VCSS_001"==t.updateNewsStatusData.newsStatus?a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"跟进人："}},[a("div",[t._v(t._s(t.updateNewsStatusDataText.tailUserName))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"最后更新时间："}},[a("div",[t._v(" "+t._s(t.formateDate(t.updateNewsStatusDataText.newsUpdateTime))+" ")])])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"是否更换跟进人："}},[a("el-radio-group",{model:{value:t.isTailUserId,callback:function(e){t.isTailUserId=e},expression:"isTailUserId"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1)],1),t.isTailUserId?a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"请选择新的跟进人："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:""},model:{value:t.updateNewsStatusData.tailUserId,callback:function(e){t.$set(t.updateNewsStatusData,"tailUserId",e)},expression:"updateNewsStatusData.tailUserId"}},t._l(t.roleList,(function(t){return a("el-option",{key:t.userInfo.userId,attrs:{label:t.userInfo.userName,value:t.userInfo.userId}})})),1)],1)],1)],1):t._e()],1):t._e(),"IT_VCSS_002"==t.updateNewsStatusData.newsStatus?a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"中断原因：",prop:"breakCause"}},[a("el-select",{attrs:{clearable:""},model:{value:t.updateNewsStatusData.breakCause,callback:function(e){t.$set(t.updateNewsStatusData,"breakCause",e)},expression:"updateNewsStatusData.breakCause"}},t._l(t.breakCauseTypeList,(function(t){return a("el-option",{key:t.dataId,attrs:{label:t.text,clearable:"",value:t.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"说明："}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入",rows:6,resize:"none","show-word-limit":"",maxlength:"100"},model:{value:t.updateNewsStatusData.remark,callback:function(e){t.$set(t.updateNewsStatusData,"remark",e)},expression:"updateNewsStatusData.remark"}})],1)],1)],1)],1):t._e(),"IT_VCSS_003"==t.updateNewsStatusData.newsStatus?a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"说明：",prop:"remark2"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入",rows:6,resize:"none","show-word-limit":"",maxlength:"100"},model:{value:t.updateNewsStatusData.remark2,callback:function(e){t.$set(t.updateNewsStatusData,"remark2",e)},expression:"updateNewsStatusData.remark2"}})],1)],1)],1),a("p",[t._v(" 客户资源池中的客户转正式客户后，此处资源池中的数据将冻结不允许再进行修改，将在合同客户管理中添加新的正式客户数据。 ")])],1):t._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.tailDialogVisible=!1}}},[t._v("关 闭")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.tailUserIdmit()}}},[t._v("提 交")])],1)],1)],1)},s=[],n=a("b85c"),r=(a("fb6a"),a("ac1f"),a("1276"),a("159b"),a("d3b7"),a("d81d"),a("5319"),a("a434"),a("25f0"),a("2b6d")),l=a("a417"),o=a("c24f"),u=a("ed08"),c=a("a826"),p={components:{zmSelectVcusers:c["a"]},data:function(){return{currentUser:{},regionOptions:[],auditStatusTypeList:[],newsAuditStatusTypeList:[],listData:[],tailListData:[],customerNameList:[],applicantList:[],queryListData:{newsId:"",clientCompanyName:"",companyNature:"",industryType:"",industrySubType:"",isRisk:"",registerAddress:"",clientAuditStatus:"IT_VCAS_002",newsAuditStatus:"IT_VCAS_002",applicantNames:"",tailStatus:"",displays:[{display:"desc",field:"clientUpdateTime"}],tailUserId:""},queryTailListData:{tailTimeAee:""},vmClientCompanyTail:{clientContactName:"",happenAddress:"",newsId:"",remark:"",tailContent:"",tailId:"",tailResult:"",tailTime:"",tailType:""},updateNewsStatusData:{breakCause:"",newsId:"",newsStatus:"",remark:"",remark2:"",tailUserId:""},updateNewsStatusDataText:{clientCompanyName:"",tailUserId:"",newsUpdateTime:""},tailStartTimeObj:{tailStartTime:"",tailEndTime:"",newsId:""},tailDataList:{tailTime:[{required:!0,message:"请选择客户跟进日期",trigger:"change"}],clientContactName:[{required:!0,message:"请输入客户联系人姓名",trigger:"blur"}],happenAddress:[{required:!0,message:"请输入发生地点",trigger:"blur"}],tailType:[{required:!0,message:"请选择跟进类型",trigger:"change"}],tailContent:[{required:!0,message:"请输入跟进主体/内容",trigger:"blur"}],tailResult:[{required:!0,message:"请输入跟进收获",trigger:"blur"}]},tailRules:{breakCause:[{required:!0,message:"请选择中断原因",trigger:"blur"}],remark2:[{required:!0,message:"请输入说明",trigger:"blur"}]},roleList:[],sortData:[],searchParams:[],industryTreeArr:[],isTailUserId:0,currentCustomerInfo:{},queryDutyLoading:!1,loading:!1,maxWidth:"width:100%;",finalWorkplaceArea:"",currentTailName:"",currentTailObj:{},currentNewsId:"",outerVisible:!1,innerVisible:!1,tailDialogVisible:!1,paginationData:{},childrenPaginationData:{},currentPage:1,pageSize:15,pageSizes:5,pageIndex:1}},computed:{companyNatureTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_CPNT},industryTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_IDST},industrySubTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_IDSB},isRiskTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IS_RISK},vmClientStatus:function(){return this.$store.state.baseData.baseDataOptionList.IT_VCAS},newsStatusTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_VCSS},tailTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_TAIL},breakCauseTypeList:function(){return this.$store.state.baseData.baseDataOptionList.IT_VCBK}},created:function(){var t=this;this.regionOptions=Object(u["i"])("cityTree"),Object(l["u"])().then((function(e){t.industryTreeArr=e})),this.currentUser=this.$store.state.user.userInfo,Object(o["a"])().then((function(e){t.dataRanges=e.dataRanges})),Object(r["n"])({clientAuditStatus:"2",newsAuditStatus:"2"}).then((function(e){var a=e[0]||"";t.customerNameList=a.clients;var i=a.applicantUsers,s=[];for(var n in i)s.push({id:n,value:i[n]});t.applicantList=s})),Object(l["M"])({keyword:""}).then((function(e){e&&e.length>0&&(t.roleList=e)})),this.baseList(this.pageIndex,2),window.addEventListener("resize",this.handleResize)},filters:{relationClass:function(t,e){var a,i=Object(n["a"])(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(s.value==t)return s.text}}catch(r){i.e(r)}finally{i.f()}},ellipsis:function(t){return t?t.length>12?t.slice(0,12)+"...":t:""}},methods:{indexMethod:function(t){return this.pageSize*this.paginationData.pageIndex+t-this.pageSize+1},handleResize:function(){var t=this;this.$refs.table&&this.$nextTick((function(){t.$refs.table.doLayout()}))},getqueryLabelById:function(t,e){return Object(u["k"])(t,e)},exportData:function(){this.baseList(this.pageIndex,1)},baseList:function(t,e){var a=this;this.searchParams.length>0&&(this.queryListData.industryType=this.searchParams[0],this.queryListData.industrySubType=this.searchParams[1]);var i=JSON.parse(JSON.stringify(this.queryListData));i.applicantNames=""==i.applicantNames?[]:this.queryListData.applicantNames.split(",");var s=Object(u["i"])("cityTree"),n=[];i.registerAddress.length>0&&i.registerAddress.forEach((function(t){n.push(Object(u["b"])(s,t))})),i.registerAddress=n.toString(),2==e?Object(r["l"])({input:i,nextToken:"",pageEnd:0,pageIndex:t,pageSize:this.pageSize,pageStart:0}).then((function(t){a.paginationData=t,a.listData=t.result})):(i.queryTag1=1,Object(r["c"])({input:i,nextToken:"",pageEnd:0,pageIndex:this.currentPage,pageSize:this.pageSize,pageStart:0}).then((function(t){if(200==t.code){var e=t.msg,a="https://www.tobowork.com//api/tobosoft-toms/commons/exportfile/download?delete=true&fileName="+e,i=document.createElement("a");i.setAttribute("download",e),i.href=a,document.body.appendChild(i),i.click(),i.remove()}})))},emptyBtn:function(){this.searchParams=[],this.queryListData={newsId:"",clientCompanyName:"",companyNature:"",industryType:"",industrySubType:"",isRisk:"",registerAddress:"",clientAuditStatus:"2",newsAuditStatus:"2",applicantNames:"",tailStatus:"",displays:[{display:"desc",field:"clientUpdateTime"}],tailUserId:""},this.$refs.selectVcusers.emptySelectValue(),this.baseList(this.pageIndex,2)},queryList:function(){this.baseList(this.pageIndex,2)},clearTxt:function(){this.queryListData.industryType="",this.queryListData.industrySubType=""},handleCommand:function(t){var e=this;if("a"==t.command)this.$router.push({path:"/business/editlyAdded",query:{id:t.item.clientCompanyId,from:"resource"}});else if("b"==t.command)this.$router.push({path:"/business/info",query:{id:t.item.clientCompanyId,from:"resource"}});else if("c"==t.command){this.tailDialogVisible=!0;var a=t.item;this.currentCustomerInfo=t.item,this.currentTailName=a.clientCompanyName,this.updateNewsStatusData.breakCause=a.breakCause,this.updateNewsStatusData.newsId=a.newsId,this.updateNewsStatusData.newsStatus=a.newsStatus,this.updateNewsStatusData.remark=a.flowRemark,this.updateNewsStatusData.tailUserId=a.tailUserId,this.updateNewsStatusDataText.clientCompanyName=a.clientCompanyName,this.updateNewsStatusDataText.tailUserName=a.tailUserName,this.updateNewsStatusDataText.newsUpdateTime=a.newsUpdateTime}else"d"==t.command&&this.$confirm("此操作将永久删除该数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["o"])({clientCompanyId:t.item.clientCompanyId}).then((function(t){e.baseList(e.pageIndex,2),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(t){}))},beforeHandleCommand:function(t,e){return{item:t,command:e}},addTail:function(){var t=this;this.innerVisible=!0,this.vmClientCompanyTail={clientContactName:"",happenAddress:"",newsId:this.currentNewsId,remark:"",tailContent:"",tailId:"",tailResult:"",tailTime:"",tailType:""},this.$nextTick((function(){t.$refs.vmClientCompanyTail.clearValidate()}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;Object(r["r"])({vmClientCompanyTail:e.vmClientCompanyTail}).then((function(t){e.$message({message:"操作成功！",type:"success"}),e.queryTailListData.tailTimeAee="",e.tailStartTimeObj={tailStartTime:"",tailEndTime:"",newsId:e.currentNewsId},e.getTailListData(),e.innerVisible=!1,e.vmClientCompanyTail={clientContactName:"",happenAddress:"",newsId:e.currentNewsId,remark:"",tailContent:"",tailId:"",tailResult:"",tailTime:"",tailType:""}}))}))},seeTail:function(t){this.getTailListData(this.pageIndex),this.currentTailName=t.clientCompanyName,this.currentNewsId=t.newsId,this.tailStartTimeObj.newsId=t.newsId,this.outerVisible=!0},getTailListData:function(t){var e=this;null!=this.queryTailListData.tailTimeAee||void 0!=this.queryTailListData.tailTimeAee?(this.tailStartTimeObj.tailStartTime=this.queryTailListData.tailTimeAee[0],this.tailStartTimeObj.tailEndTime=this.queryTailListData.tailTimeAee[1]):(this.tailStartTimeObj.tailStartTime="",this.tailStartTimeObj.tailEndTime=""),Object(r["m"])({input:this.tailStartTimeObj,nextToken:"",pageEnd:0,pageIndex:t,pageSize:this.pageSizes,pageStart:0}).then((function(t){e.childrenPaginationData=t,e.tailListData=t.result}))},tailEdit:function(t){this.innerVisible=!0,this.currentTailObj=JSON.parse(JSON.stringify(t)),this.vmClientCompanyTail=this.currentTailObj,this.tailStartTimeObj.tailStartTime="",this.tailStartTimeObj.tailEndTime=""},tailDelete:function(t){var e=this;this.$confirm("此操作将永久删除该数据，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["p"])({tailId:t.tailId}).then((function(t){e.tailStartTimeObj={tailStartTime:"",tailEndTime:"",newsId:e.currentNewsId},e.getTailListData(),e.$message({type:"success",message:"删除成功!"})}))}))},tailUserIdmit:function(){var t=this;console.log(this.updateNewsStatusData),this.$refs,this.$refs.updateNewsStatusDataref.validate((function(e){if(!e)return!1;var a=JSON.parse(JSON.stringify(t.updateNewsStatusData));"IT_VCSS_003"==a.newsStatus&&(a.remark=t.updateNewsStatusData.remark2,delete a.remark2),Object(r["t"])(a).then((function(e){if(t.tailDialogVisible=!1,t.baseList(t.pageIndex,2),t.getTailListData(t.pageIndex),t.$message({type:"success",message:"修改成功！"}),"IT_VCSS_003"==a.newsStatus){var i=t.currentCustomerInfo,s={formData:{clientCompanyId:"",clientHistoryName:"",creditCode:"",clientCompanyName:"",registerMoney:"",clientSimpleName:"",legalPerson:"",registerArea:"",registerAddress:"",registerDate:"",customerStatus:"",companyNature:"",cooperationMode:"",companyScale:"",agentCompanyId:""},formData2:{companySiteUrl:"",operatingArea:"",operatingAddress:"",clientCompanyRemark:""},formData3:{clientGroupId:""},formData4:{scaleType:"",riskType:"",financeType:""}};"TM"==i.cooperateMode?i.cooperationMode="1":"FP"==i.cooperateMode?i.cooperationMode="2":i.cooperationMode="3";var n=[];n.push(i.industryType),n.push(i.industrySubType);var r=Object(u["i"])("cityTree"),l=[];i.registerAddress&&(l=i.registerAddress.split(","));var o=getObjByLabel(r,l),c=o.map((function(t){return t.value}));i.registerAddress=c,s.formData.industry=n,s.formData.cooperationMode=i.cooperationMode,s.formData.clientCompanyId="",s.formData.clientHistoryName=i.clientHistoryName,s.formData.creditCode=i.creditCode,s.formData.clientCompanyName=i.clientCompanyName,s.formData.registerMoney=i.registerMoney,s.formData.clientSimpleName=i.clientSimpleName,s.formData.legalPerson=i.legalPerson,s.formData.registerArea=i.registerAddress,s.formData.registerAddress=i.registerAddressDetail,s.formData.registerDate=i.registerDate.split(" ")&&i.registerDate.split(" ")[0],s.formData.customerStatus=i.customerStatus,s.formData.companyNature=i.companyNature,s.formData.cooperationMode=i.cooperationMode,s.formData.companyScale=i.companyScale,s.formData.agentCompanyId=i.agentCompanyId,s.formData2.companySiteUrl=i.companySiteUrl,s.formData2.operatingArea=i.operatingArea,s.formData2.operatingAddress=i.operatingAddress,s.formData2.clientCompanyRemark=i.clientCompanyRemark.replace(/<[^>]+>/g,""),s.formData3.clientGroupId=i.clientGroupId,s.formData4.scaleType=i.scaleType,s.formData4.riskType=i.riskType,s.formData4.financeType=i.financeType,i=JSON.stringify(s),t.$router.push({path:"/customer/newCustomer",query:{customerObj:i}})}}))}))},onSortChange:function(t){var e=this;this.sortData=[];var a="";a="ascending"===t.order?"asc":"desc";var i={display:a,field:t.prop};0===this.sortData.length?this.sortData.push(i):this.sortData.forEach((function(t,a){if(t.field===i.field){if(t.display===i.display)return void e.sortData.splice(a,1);e.sortData.splice(a,1),e.sortData.push(i)}else e.sortData.push(i)})),this.queryListData.displays=this.sortData,this.sortQueryVmClientList()},sortQueryVmClientList:function(){var t=this;this.queryListData.applicantNames=""==this.queryListData.applicantNames?[]:this.queryListData.applicantNames.split(","),Object(r["l"])({input:this.queryListData,nextToken:"",pageEnd:0,pageIndex:this.pageIndex,pageSize:this.pageSize,pageStart:0}).then((function(e){t.queryListData.applicantNames=t.queryListData.applicantNames.toString(),t.paginationData=e,t.listData=e.result}))},formateDate:function(t){function e(t){return t<10?"0"+t:t}var a=new Date(t),i=a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+" "+e(a.getHours())+":"+e(a.getMinutes())+":"+e(a.getSeconds());return i},handleSizeChange:function(){this.baseList(this.pageIndex,2)},handleCurrentChange:function(t){console.log(t),this.baseList(t,2)},childrenHandleSizeChange:function(){this.getTailListData(this.pageIndex)},childrenHandleCurrentChange:function(t){this.getTailListData(t)},getSelectValueVcusers:function(t){this.queryListData.clientCompanyName=t}},watch:{updateNewsStatusData:{handler:function(t,e){var a=this;console.log(t),this.$nextTick((function(){a.$refs.updateNewsStatusDataref.clearValidate()}))},deep:!0}}},m=p,d=(a("a7fb"),a("2877")),f=Object(d["a"])(m,i,s,!1,null,"4daee8d2",null);e["default"]=f.exports},a7fb:function(t,e,a){"use strict";a("21f7")},a826:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",t._b({staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",clearable:"","remote-method":t.remoteMethod},on:{clear:t.clear,change:t.getSelectValue},model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}},"el-select",t.$attrs,!1),t._l(t.optionSelectList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.clientCompanyName,value:t.clientCompanyName}})})),1)},s=[],n=a("2b6d"),r={props:{type:{type:String}},data:function(){return{selectValue:"",optionSelectList:[]}},mounted:function(){this.getOptionSelectList(),console.log("type",this.type)},methods:{emptySelectValue:function(){this.selectValue=""},getSelectValue:function(t){console.log("selectValue",t),this.$emit("getSelectValue",t)},getOptionSelectList:function(t){var e,a=this;"customerProfile"==this.type&&(e={notEqualNewsAuditStatus:"2"}),"cutomerResources"==this.type&&(e={clientAuditStatus:"2",newsAuditStatus:"2"}),void 0!=e&&(e.clientCompanyName=t||"",Object(n["n"])(e).then((function(t){var e=t;a.optionSelectList=e})))},remoteMethod:function(t){this.getOptionSelectList(t)},clear:function(){this.getOptionSelectList()},focus:function(){this.getOptionSelectList()}}},l=r,o=a("2877"),u=Object(o["a"])(l,i,s,!1,null,null,null);e["a"]=u.exports},c24f:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var i=a("b775");function s(){return Object(i["a"])({url:"/system/user/me",method:"post"})}}}]);