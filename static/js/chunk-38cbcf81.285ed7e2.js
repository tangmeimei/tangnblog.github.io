(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38cbcf81"],{"016b":function(e,t,a){e.exports=a.p+"static/img/salaryProcess.287c920e.png"},"4a0d":function(e,t,a){e.exports=a.p+"static/img/entry_process.d14f7fc1.png"},6494:function(e,t,a){e.exports=a.p+"static/img/new_staff_dismiss.969cb86b.png"},"6d07":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"imgContainer"},[a("el-dialog",{attrs:{title:e.title,visible:e.showImgModal,width:"30%","close-on-click-modal":!1,top:"10vh"},on:{"update:visible":function(t){e.showImgModal=t}}},[a("el-image",{attrs:{src:e.src}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])],1)],1)},n=[],o={name:"preceeImage",props:{isShowImgModal:{type:Boolean,default:!1},src:{type:String,default:""},title:{type:String,default:"流程图"}},data:function(){return{ccForm:{name:"",org:""},showImgModal:!1,loading:!1,optionList:[]}},watch:{isShowImgModal:{handler:function(e){e&&(this.showImgModal=!0)},immediate:!0},showImgModal:{handler:function(e){e||this.$emit("update:isShowImgModal",!1)}}},mounted:function(){},methods:{}},s=o,i=a("2877"),c=Object(i["a"])(s,r,n,!1,null,"7d9f3cd8",null);t["a"]=c.exports},a21c:function(e,t,a){e.exports=a.p+"static/img/staff_entry.bfffd600.png"},b2e0:function(e,t,a){e.exports=a.p+"static/img/staff_dismiss.ef59d3b1.png"},b4e5:function(e,t,a){e.exports=a.p+"static/img/staff_conversion.8d8e1a9d.png"},c818:function(e,t,a){e.exports=a.p+"static/img/infoChangeProcess.8d70216f.png"},d14b:function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"i",(function(){return o})),a.d(t,"j",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"s",(function(){return c})),a.d(t,"p",(function(){return u})),a.d(t,"e",(function(){return l})),a.d(t,"v",(function(){return d})),a.d(t,"t",(function(){return p})),a.d(t,"f",(function(){return m})),a.d(t,"u",(function(){return h})),a.d(t,"c",(function(){return f})),a.d(t,"r",(function(){return g})),a.d(t,"q",(function(){return b})),a.d(t,"k",(function(){return w})),a.d(t,"m",(function(){return k})),a.d(t,"b",(function(){return y})),a.d(t,"o",(function(){return D})),a.d(t,"n",(function(){return I})),a.d(t,"h",(function(){return O})),a.d(t,"l",(function(){return T})),a.d(t,"a",(function(){return S}));a("99af");var r=a("b775");function n(){return Object(r["a"])({url:"/task/initFlow",method:"post"})}function o(e){return Object(r["a"])({url:"/task/start",method:"post",params:e})}function s(e){return Object(r["a"])({url:"/task/readyCommit?orgId=".concat(e.orgId,"&city=").concat(e.city),method:"post",data:e.taskDTO})}function i(e){return Object(r["a"])({url:"/task/commit",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/task/queryTasksPage",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/task/queryTaskDetail",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/task/queryRecordList",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/task/breakTask",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/task/readTask",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/task/queryCanBackNodeList",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/task/saveTask",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/task/removeTask",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/task/queryTaskUppriceSelectList?empName=".concat(e.empName,"&flowName=").concat(e.flowName,"&phoneNo=").concat(e.phoneNo),method:"post",data:e})}function b(e){return Object(r["a"])({url:"/task/queryTaskSelect",method:"post",params:e})}function w(e){return Object(r["a"])({url:"/task/queryEmployFlowPage",method:"post",data:e})}function k(e){return Object(r["a"])({url:"/task/queryEmployTaskRecord",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/task/checkEmployUppriceGT6Month?empName=".concat(e.empName,"&flowName=").concat(e.flowName,"&phoneNo=").concat(e.phoneNo),method:"post",data:e})}function D(e){return Object(r["a"])({url:"/salary/queryNewSalaryInfo?employNum=".concat(e.employNum),method:"post",data:e})}function I(e){return Object(r["a"])({url:"/task/queryLeaveSelectList",method:"post",params:e})}function O(e){return Object(r["a"])({url:"/protectRule/getProtectRult",method:"post",params:e})}function T(e){return Object(r["a"])({url:"/employ/archives/queryEmployOfferDetail",method:"post",params:e})}function S(e){return Object(r["a"])({url:"/task/cancelTask",method:"post",data:e})}},f25f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"toms-container"},[a("div",{staticClass:"toms-list-searchWrap"},[a("zm-Search",{ref:"search",attrs:{inputList:e.inputList,btnConfig:e.btnConfig},on:{search:e.search,reset:e.resetTable}})],1),a("div",{staticClass:"toms-list-tableWrap"},[a("zm-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{tableData:e.tableData,columns:e.columns,height:"527px","header-cell-style":{"text-align":"center"},"header-cell-class-name":e.handleHeaderCellClass,currentPage:e.pageData.pageIndex,pageSize:e.pageData.pageSize,total:e.pageData.pageCount,sizeList:e.sizeList},on:{editFn:e.editFn,viewFn:e.viewFn,deleteFn:e.deleteFn,handleCurrentChange:e.handleCurrentChange,sortChange:e.sortChange,handleSizeChange:e.handleSizeChange}})],1),e.isShowImgModal?a("process-image",{attrs:{title:e.processTitle,isShowImgModal:e.isShowImgModal,src:e.processImageSrc},on:{"update:isShowImgModal":function(t){e.isShowImgModal=t},"update:is-show-img-modal":function(t){e.isShowImgModal=t}}}):e._e()],1)},n=[],o=a("1da1"),s=(a("96cf"),a("d81d"),a("159b"),a("a434"),a("7db0"),a("8cc7")),i=a("a937"),c=a("6d07"),u=a("ed08"),l=a("5f98"),d=function(e){var t=e.$store.state.baseData.baseDataOptionList["IT_RWZT"];return[{type:"text-input",bind_key:"subject",label:"主题",placeholder:"请输入",inputWidth:260,span:6},{type:"select-input",bind_key:"flowName",label:"流程名称",span:6,optionList:e.flowNameList},{type:"text-input",bind_key:"startUser",placeholder:"工号或姓名",label:"发起人",span:6},{type:"cascader-input",bind_key:"orgId",label:"所属部门",optionList:e.$store.state.baseData.orgTreeData[0].children,propLabel:"orgName",checkStrictly:!0,propValue:"orgId",span:6},{type:"date-input",span:6,label:"时间段",inputWidth:260,bind_key:"startTime",datePickerType:"daterange"},{type:"select-input",bind_key:"taskStatus",label:"流程状态",span:6,optionList:t}]},p={span:24,customList:[],leftBtnHidden:!Object(l["a"])("employ.flow.list")},m=function(e){return[{label:"流程",width:"50px",kind:"render",render:function(t,a){return t("i",{class:{"el-icon-menu":!0},style:{cursor:"pointer"},on:{click:function(){e.openProcessImage(a.row.flowName)}}})}},{label:"序号",width:"50px",kind:"render",render:function(t,a){var r=a.$index+1,n=(e.pageData.pageIndex-1)*e.pageData.pageSize;return t("span",r+n)}},{label:"流程主题",prop:"taskName",kind:"render",minWidth:"300px",align:"left",render:function(t,a){var r=JSON.stringify(a.row),n=encodeURIComponent(r),o=(a.row.taskNodeName||a.row.taskName,a.row.color?"red":"");return t("span",{class:{renderOperation:!a.row.color},style:{color:o,cursor:"pointer"},on:{click:function(){if(Object(l["a"])("employ.flow.info"))switch(a.row.flowName){case"员工定薪流程":e.$router.push({path:"/workbench/entryDetails/".concat(a.row.taskInstanceId),query:{taskObj:n}});break;case"员工入职流程":e.$router.push({path:"/workbench/entryProcessDetail/".concat(a.row.taskInstanceId),query:{taskObj:n}});break;case"员工调薪流程":e.$router.push({path:"/workbench/salaryDetails/".concat(a.row.taskInstanceId),query:{taskObj:n}});break;case"员工信息变更流程":e.$router.push({path:"/workbench/infoChangeDetails/".concat(a.row.taskInstanceId),query:{taskObj:n}});break;case"员工转正流程":e.$router.push({path:"/workbench/conversionDetails/".concat(a.row.taskInstanceId),query:{taskObj:n}});break;case"员工离职流程":e.$router.push({path:"/workbench/dismissProcessDetail/".concat(a.row.taskInstanceId),query:{taskObj:n}});break;case"员工离职流程(新)":e.$router.push({path:"/workbench/newDismissionFlowDetail/".concat(a.row.taskInstanceId),query:{taskObj:n}});break;case"员工信息变更流程（SSC）":e.$router.push({path:"/workbench/infoChangeDetailsSSC/".concat(a.row.taskInstanceId),query:{taskObj:n}});break}else e.$message.warning("没有列表详情权限，请联系管理员")}}},a.row.taskName)}},{label:"流程名称",prop:"flowName",sortable:"custom",align:"left"},{label:"当前环节",prop:"nodeName",sortable:"custom",kind:"render",align:"left",render:function(e,t){return e("span",t.row.nodeName)}},{label:"当前状态",prop:"taskStatus",sortable:"custom",kind:"render",render:function(t,a){var r="",n=e.$store.state.baseData.baseDataOptionList["IT_RWZT"];return n.map((function(e){e.value===a.row.taskStatus&&(r=e.text||"")})),t("span",{},r)}},{label:"最后操作时间",prop:"updatorTime",sortable:"custom",minWidth:"100px"},{label:"当前节点耗时",prop:"currentNodeStartTime",kind:"render",align:"left",render:function(e,t){var a="--",r=t.row.currentNodeStartTime,n=t.row.currentNodeEndTime||new Date;return r&&n&&(a=Object(u["l"])(r,n)),e("span",{},a)}},{label:"流程发起时间",prop:"creatorTime",minWidth:"100px",align:"left"},{label:"流程耗时",prop:"taskStartTime",kind:"render",align:"left",render:function(e,t){var a="--",r=t.row.taskStartTime,n=t.row.taskEndTime||new Date;return r&&n&&(a=Object(u["l"])(r,n)),e("span",{},a)}},{label:"发起人",prop:"creatorName",sortable:"custom",kind:"render",align:"left",render:function(e,t){return e("span",{},t.row.creatorName)}}]},h=a("fa38"),f=(a("a417"),a("d14b")),g={name:"HrProcessList",components:{zmTable:s["a"],zmSearch:i["a"],processImage:c["a"]},data:function(){return{btnConfig:p,tableData:[],columns:m(this),pageData:{pageIndex:1,pageSize:15,pageCount:0},tableLoading:!1,sortData:[{display:"asc",field:"taskStatus"}],searchData:{},sizeList:[15,30,50],flowNameList:[],isShowImgModal:!1,processImageSrc:"",processTitle:"流程图"}},computed:{inputList:function(){return d(this)}},mounted:function(){this.getFlowNameList(),this.getEmployFlowPageList()},methods:{openProcessImage:function(e){switch(e){case"员工定薪流程":this.processImageSrc=a("4a0d");break;case"员工入职流程":this.processImageSrc=a("a21c");break;case"员工离职流程":this.processImageSrc=a("b2e0");break;case"员工离职流程(新)":this.processImageSrc=a("6494");break;case"员工转正流程":this.processImageSrc=a("b4e5");break;case"员工信息变更流程":this.processImageSrc=a("c818");break;case"员工调薪流程":this.processImageSrc=a("016b");break}this.processTitle=e+"图",this.isShowImgModal=!0},getFlowNameList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["p"])({input:{},pageIndex:1,pageSize:999});case 2:a=t.sent,e.flowNameList=Array.isArray(a.result)&&a.result.map((function(e){return{text:e.flowName,value:e.flowName}}));case 4:case"end":return t.stop()}}),t)})))()},getEmployFlowPageList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={},r.queryRecordDTO={},Object.assign(r.queryRecordDTO,e),r.queryRecordDTO.startTime&&r.queryRecordDTO.startTime.length>0&&(r.queryRecordDTO.endTime=new Date(r.queryRecordDTO.startTime[1]),r.queryRecordDTO.startTime=new Date(r.queryRecordDTO.startTime[0])),r.queryRecordDTO.orgId&&r.queryRecordDTO.orgId.length>0?r.queryRecordDTO.orgId=r.queryRecordDTO.orgId[r.queryRecordDTO.orgId.length-1]:delete r.queryRecordDTO.orgId,n={input:r},o=Object.assign({},t.pageData,n),t.sortData&&t.sortData.length>0?r.queryRecordDTO.displays=t.sortData:r.queryRecordDTO.displays=[{display:"desc",field:"updatorTime"}],a.next=10,Object(f["k"])(o);case 10:s=a.sent,t.pageData.pageIndex=s.pageIndex,t.pageData.pageCount=s.rowCount,t.tableData=s.result[0].queryRecordVOList;case 14:case"end":return a.stop()}}),a)})))()},search:function(e){this.pageData.pageIndex=1;var t=JSON.parse(JSON.stringify(e));this.searchData=t,this.getEmployFlowPageList(t)},handleSizeChange:function(e){this.pageData.pageSize=e,this.getEmployFlowPageList()},editFn:function(e){this.$router.push({path:"/customer/editCustomer",query:{id:e.clientCompanyId}})},viewFn:function(e){this.$router.push({path:"/customer/detailCustomer",query:{id:e.clientCompanyId}})},resetTable:function(){this.pageData.pageIndex=1,this.searchData={},this.getEmployFlowPageList(this.searchData)},deleteFn:function(e){},handleCurrentChange:function(e){this.pageData.pageIndex=e,this.getEmployFlowPageList(this.searchData)},sortChange:function(e){var t=this,a="";if(a="ascending"===e.order?"asc":"desc",null!==e.order){var r={display:a,field:e.prop};if(0===this.sortData.length)this.sortData.push(r);else{var n=this.sortData.find((function(e){return e.field===r.field}));if(n){var o="";this.sortData.forEach((function(e,t){e.field===n.field&&(o=t)})),this.sortData.splice(o,1,r)}else this.sortData.push(r)}this.getEmployFlowPageList()}else this.sortData.forEach((function(a,r){a.field===e.prop&&t.sortData.splice(r,1)}))},handleHeaderCellClass:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;this.sortData.forEach((function(e){if(t.property===e.field){var a="";"desc"===e.display&&(a="descending"),"asc"===e.display&&(a="ascending"),t.order=a}}))}},watch:{}},b=g,w=a("2877"),k=Object(w["a"])(b,r,n,!1,null,null,null);t["default"]=k.exports}}]);