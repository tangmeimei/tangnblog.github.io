(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7776b2cb"],{"0fa9":function(e,t,a){},"76ee":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer-container"},[a("div",{staticClass:"search-wrap"},[a("zm-Search",{ref:"search",attrs:{inputList:e.inputList,btnConfig:e.btnConfig},on:{search:e.search,reset:e.resetTable,withdraw:e.withdrawOp,terminateFlow:e.terminateFlow,giveUpEntry:e.giveUpEntry}})],1),a("div",{staticClass:"tableContent"},[a("zm-table",{ref:"tableRef",staticStyle:{width:"100%"},attrs:{"header-cell-style":{"text-align":"center"},"header-cell-class-name":e.handleHeaderCellClass,tableData:e.tableData,columns:e.columns,height:"527px",currentPage:e.pageData.pageIndex,pageSize:e.pageData.pageSize,total:e.pageData.pageCount,sizeList:e.sizeList},on:{handleCurrentChange:e.handleCurrentChange,sortChange:e.sortChange,handleSizeChange:e.handleSizeChange,selectionChange:e.selectionChange}})],1)])},r=[],s=a("1da1"),o=a("5530"),c=(a("d81d"),a("159b"),a("a434"),a("7db0"),a("96cf"),a("8cc7")),i=a("a937"),u=a("5f98"),l=function(e){return[{type:"text-input",bind_key:"subject",inputWidth:240,label:"主题",placeholder:"请输入",span:6},{type:"select-input",bind_key:"flowId",label:"流程名称",span:6,optionList:e.flowNameList},{type:"text-input",bind_key:"startUser",label:"发起人",placeholder:"请输入",span:6},{type:"cascader-input",bind_key:"orgId",label:"所属部门",optionList:e.$store.state.baseData.orgTreeData[0].children,propLabel:"orgName",checkStrictly:!0,propValue:"orgId",span:6},{type:"date-input",span:6,label:"时间段",inputWidth:240,bind_key:"fullDate",datePickerType:"daterange"}]},d={span:24,customList:[{customBtnText:"终止流程",changeFn:"terminateFlow",role:"dashboard.done.stopflow"},{customBtnText:"放弃入职",changeFn:"giveUpEntry",role:"dashboard.done.unoffer"}],leftBtnHidden:!Object(u["a"])("dashboard.done.list")},p=function(e){return[{type:"selection",fixed:"left",width:"50px",selectable:function(e,t){return"员工入职流程"===e.flowName&&"IT_RUNS_010"!==e.runStatus&&"IT_RUNS_011"!==e.runStatus}},{label:"序号",width:"50px",kind:"render",render:function(t,a){var n=a.$index+1,r=(e.pageData.pageIndex-1)*e.pageData.pageSize;return t("span",n+r)}},{label:"工作主题",prop:"taskName",width:"500px",align:"left",kind:"render",render:function(t,a){var n=JSON.stringify(a.row),r=encodeURIComponent(n),s=a.row.taskNodeName||a.row.taskName,o=a.row.color?"red":"";return t("span",{class:{renderOperation:!a.row.color},style:{color:o,cursor:"pointer"},on:{click:function(){if(Object(u["a"])("dashboard.done.info"))switch(a.row.flowName){case"员工定薪流程":e.$router.push({path:"/workbench/entryDetails/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工入职流程":e.$router.push({path:"/workbench/entryProcessDetail/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工调薪流程":e.$router.push({path:"/workbench/salaryDetails/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工信息变更流程":e.$router.push({path:"/workbench/infoChangeDetails/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工转正流程":e.$router.push({path:"/workbench/conversionDetails/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工离职流程":e.$router.push({path:"/workbench/dismissProcessDetail/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工离职流程(新)":e.$router.push({path:"/workbench/newDismissionFlowDetail/".concat(a.row.taskInstanceId),query:{taskObj:r}});break;case"员工信息变更流程（SSC）":e.$router.push({path:"/workbench/infoChangeDetailsSSC/".concat(a.row.taskInstanceId),query:{taskObj:r}});break}else e.$message.warning("没有列表详情权限，请联系管理员")}}},s)}},{label:"流程名称",prop:"flowName",sortable:"custom",align:"left"},{label:"已办工作",prop:"nodeName",align:"left"},{label:"办理时间",prop:"assignUpdatorTime",sortable:"custom"},{label:"状态",prop:"runStatusCn"},{label:"发起人",prop:"creatorName",align:"left"},{label:"当前审批环节",prop:"nowNodeName",align:"left"},{label:"当前审批人",prop:"nextAssign",align:"left"}]},f=a("d14b"),h=a("fa38"),g=a("2f62"),m={name:"Finished",components:{zmTable:c["a"],zmSearch:i["a"]},data:function(){var e=p(this);return{btnConfig:d,tableData:[],columns:e,pageData:{pageIndex:1,pageSize:15,pageCount:0},searchData:{},sortData:[{display:"desc",field:"assignUpdatorTime"}],sizeList:[15,30,50],checkList:[],flowNameList:[],flowObj:null}},beforeRouteEnter:function(e,t,a){a((function(e){console.log(e.isRereshListPage),e.isRereshListPage&&(console.log("会执行吗"),e.queryBackLogList(),e.getFlowNameList(),e.CHANGE_LIST_PAGE_STAUTS(!1))}))},activated:function(){var e=this;this.$nextTick((function(){e.$refs.tableRef.doLayoutTable()}))},computed:Object(o["a"])(Object(o["a"])({},Object(g["e"])("entryCfmSalary",["isEditProcess","isRereshListPage"])),{},{inputList:function(){return l(this)}}),mounted:function(){this.queryBackLogList(),this.getFlowNameList()},methods:Object(o["a"])(Object(o["a"])({},Object(g["d"])("entryCfmSalary",["CHANGE_EDIT_PROCESS_STATUS","CHANGE_LIST_PAGE_STAUTS"])),{},{giveUpEntry:function(){var e=this;this.flowObj?this.$confirm("放弃入职将同时作废入职流程和员工定薪流程，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.cancelTaskFlow("IT_RWZT_008",!0)})).catch((function(){e.$message.info("已取消放弃入职操作")})):this.$message.warning("请先选择一条流程")},terminateFlow:function(){var e=this;this.flowObj?this.$confirm("是否同时作废员工定薪流程？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){e.cancelTaskFlow("IT_RWZT_007",!0)})).catch((function(t){"cancel"===t?e.cancelTaskFlow("IT_RWZT_007",!1):e.$message.info("已取消终止流程操作")})):this.$message.warning("请先选择一条流程")},cancelTaskFlow:function(e){var t=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,s,o,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=!(t.length>1&&void 0!==t[1])||t[1],s={confirmFlag:r,taskFlowConfig:{flowId:a.flowObj.flowId,flowName:"员工入职流程",version:"1"},taskNodeInstance:{nodeInstanceId:a.flowObj.nodeInstanceId,taskInstanceId:a.flowObj.taskInstanceId},taskStatus:e},n.next=4,Object(f["a"])(s);case 4:o=n.sent,c=o.code,i=o.msg,o.data,"200"===c?(a.$message.success("操作成功"),a.queryBackLogList()):a.$message.error(i);case 9:case"end":return n.stop()}}),n)})))()},queryBackLogList:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,s,c,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={},r=e||{},n.queryRecordDTO=Object(o["a"])({},r),n.queryRecordDTO.userId=t.$store.state.user.userInfo.userId,n.queryRecordDTO.runTypes=["IT_RUNX_003","IT_RUNX_001"],n.queryRecordDTO.runStatusList=["IT_RUNS_006","IT_RUNS_002","IT_RUNS_008","IT_RUNS_009","IT_RUNS_010","IT_RUNS_011"],s={input:n},c=Object.assign({},t.pageData,s),c.input.queryRecordDTO.displays=t.sortData,a.next=11,Object(f["s"])(c);case 11:i=a.sent,t.pageData.pageIndex=i.pageIndex,t.pageData.pageCount=i.rowCount,t.tableData=i.result[0].queryRecordVOList;case 15:case"end":return a.stop()}}),a)})))()},getFlowNameList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["p"])({input:{},pageIndex:1,pageSize:999});case 2:a=t.sent,e.flowNameList=Array.isArray(a.result)&&a.result.map((function(e){return{text:e.flowName,value:e.flowId}}));case 4:case"end":return t.stop()}}),t)})))()},search:function(e){this.pageData.pageIndex=1;var t=JSON.parse(JSON.stringify(e));t.fullDate&&2===t.fullDate.length&&(t.startTime=new Date(t.fullDate[0]),t.endTime=new Date(t.fullDate[1]),delete t.fullDate),t.orgId&&t.orgId.length>0&&(t.orgId=t.orgId[t.orgId.length-1]),t.orgId&&0===t.orgId.length&&delete t.orgId,this.searchData=t,this.queryBackLogList(t)},handleSizeChange:function(e){this.pageData.pageIndex=1,this.pageData.pageSize=e,this.queryBackLogList(this.searchData)},resetTable:function(){this.pageData.pageIndex=1,this.searchData={},this.queryBackLogList(this.searchData)},selectionChange:function(e){this.flowObj=e},withdrawOp:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.checkList.length){t.next=2;break}return t.abrupt("return");case 2:e.$confirm("是否确定撤回此流程？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a.nodeInstanceIdList=[],e.checkList.forEach((function(e){a.nodeInstanceIdList.push(e.nodeInstanceId)})),t.next=5,Object(f["v"])(a);case 5:n=t.sent,"200"===n.code?(e.$message.success("撤回成功"),e.queryBackLogList()):e.$message.warning(n.msg||"");case 7:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.pageData.pageIndex=e,this.queryBackLogList(this.searchData)},sortChange:function(e){var t=this,a="";if(a="ascending"===e.order?"asc":"desc",null!==e.order){var n={display:a,field:e.prop};if(0===this.sortData.length)this.sortData.push(n);else{var r=this.sortData.find((function(e){return e.field===n.field}));if(r){var s="";this.sortData.forEach((function(e,t){e.field===r.field&&(s=t)})),this.sortData.splice(s,1,n)}else this.sortData.push(n)}this.queryBackLogList()}else this.sortData.forEach((function(a,n){a.field===e.prop&&t.sortData.splice(n,1)}))},handleHeaderCellClass:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;this.sortData.forEach((function(e){if(t.property===e.field){var a="";"desc"===e.display&&(a="descending"),"asc"===e.display&&(a="ascending"),t.order=a}}))},selectable:function(e,t){return"IT_RUNS_007"!==e.runStatus&&"IT_RUNS_008"!==e.runStatus&&"IT_RUNS_009"!==e.runStatus}})},b=m,k=(a("eabc"),a("2877")),w=Object(k["a"])(b,n,r,!1,null,"398f440e",null);t["default"]=w.exports},d14b:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"i",(function(){return s})),a.d(t,"j",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"s",(function(){return i})),a.d(t,"p",(function(){return u})),a.d(t,"e",(function(){return l})),a.d(t,"v",(function(){return d})),a.d(t,"t",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"u",(function(){return h})),a.d(t,"c",(function(){return g})),a.d(t,"r",(function(){return m})),a.d(t,"q",(function(){return b})),a.d(t,"k",(function(){return k})),a.d(t,"m",(function(){return w})),a.d(t,"b",(function(){return y})),a.d(t,"o",(function(){return I})),a.d(t,"n",(function(){return O})),a.d(t,"h",(function(){return T})),a.d(t,"l",(function(){return D})),a.d(t,"a",(function(){return j}));a("99af");var n=a("b775");function r(){return Object(n["a"])({url:"/task/initFlow",method:"post"})}function s(e){return Object(n["a"])({url:"/task/start",method:"post",params:e})}function o(e){return Object(n["a"])({url:"/task/readyCommit?orgId=".concat(e.orgId,"&city=").concat(e.city),method:"post",data:e.taskDTO})}function c(e){return Object(n["a"])({url:"/task/commit",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/task/queryTasksPage",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/task/queryTaskDetail",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/task/queryRecordList",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/task/breakTask",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/task/readTask",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/task/queryCanBackNodeList",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/task/saveTask",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/task/removeTask",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/task/queryTaskUppriceSelectList?empName=".concat(e.empName,"&flowName=").concat(e.flowName,"&phoneNo=").concat(e.phoneNo),method:"post",data:e})}function b(e){return Object(n["a"])({url:"/task/queryTaskSelect",method:"post",params:e})}function k(e){return Object(n["a"])({url:"/task/queryEmployFlowPage",method:"post",data:e})}function w(e){return Object(n["a"])({url:"/task/queryEmployTaskRecord",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/task/checkEmployUppriceGT6Month?empName=".concat(e.empName,"&flowName=").concat(e.flowName,"&phoneNo=").concat(e.phoneNo),method:"post",data:e})}function I(e){return Object(n["a"])({url:"/salary/queryNewSalaryInfo?employNum=".concat(e.employNum),method:"post",data:e})}function O(e){return Object(n["a"])({url:"/task/queryLeaveSelectList",method:"post",params:e})}function T(e){return Object(n["a"])({url:"/protectRule/getProtectRult",method:"post",params:e})}function D(e){return Object(n["a"])({url:"/employ/archives/queryEmployOfferDetail",method:"post",params:e})}function j(e){return Object(n["a"])({url:"/task/cancelTask",method:"post",data:e})}},eabc:function(e,t,a){"use strict";a("0fa9")}}]);